# Kill any existing Quarto processes
# echo "ğŸ”ª Killing existing Quarto processes..."
# pkill -9 quarto 2>/dev/null || true
# pkill -9 lualatex 2>/dev/null || true
# pkill -9 pdflatex 2>/dev/null || true

# # Render website and prevent commit if it fails
# echo "ğŸ—ï¸  Rendering website..."
# if ! python scripts/render-book-website.py; then
#     echo "âŒ Website render failed! Commit aborted."
#     echo "Fix the errors and try again."
#     #exit 1
# fi

# Update embeddings for changed files before commit
#echo "ğŸ”„ Updating embeddings for changed files..."
#npm run vector:update || echo "âš ï¸  Embedding update failed, but continuing..."

# Note: WISHONIA review is not run automatically on commit
# Run manually with: npm run wishonia

echo "Running pre-render validation..."
if ! python scripts/pre-render-validation.py; then
    echo "Pre-render validation failed. Fix issues before committing."
    exit 1
fi

echo "âœ… Pre-commit checks passed!"
