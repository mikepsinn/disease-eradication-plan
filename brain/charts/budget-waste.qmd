```{python}
#| label: budget-waste
#| fig-cap: "The Stupidest Budget on Earth"

import sys
import os
from pathlib import Path

# Add project root to path (find it relative to current working directory)
project_root = Path.cwd()
if project_root.name != 'decentralized-institutes-of-health':
    while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
        project_root = project_root.parent
sys.path.insert(0, str(project_root))

import matplotlib.pyplot as plt
from brain.charts._chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_RED, COLOR_BLUE, COLOR_WHITE
)

# Setup styling
setup_chart_style(style='light', dpi=150)

# Data
categories = ['Disease\nTreatment', 'War &\nConflict', 'Finding\nCures']
amounts = [109.1, 9.7, 0.068]
colors_budget = [COLOR_RED, COLOR_RED, COLOR_BLUE]  # Problems are red, solution is blue

# Create chart
fig, ax = plt.subplots(figsize=(18, 10))
bars = ax.bar(categories, amounts, color=colors_budget, width=0.6,
              edgecolor=COLOR_WHITE, linewidth=2)

# Add value labels on bars
for bar, amount in zip(bars, amounts):
    height = bar.get_height()
    label = f'${amount}T' if amount >= 1 else f'${int(amount*1000)}B'
    ax.text(bar.get_x() + bar.get_width()/2., height,
            label, ha='center', va='bottom', fontsize=48, weight='bold', color=COLOR_BLACK)

ax.set_ylabel('Trillions per Year', fontsize=36, weight='bold', color=COLOR_BLACK)
ax.tick_params(axis='both', labelsize=32, colors=COLOR_BLACK)
ax.set_ylim(0, 120)
clean_spines(ax)
# Remove gridlines for cleaner look
# ax.grid(axis='y', alpha=0.3, linestyle='--', color=COLOR_LIGHT)

# Add branding
add_watermark(fig)

#plt.tight_layout()  # Disabled - using rcParams margins instead

# Save in brain/charts directory
output_dir = project_root / 'brain' / 'charts'
output_dir.mkdir(parents=True, exist_ok=True)
plt.savefig(output_dir / 'budget-waste.png', dpi=200, bbox_inches=None, facecolor=COLOR_WHITE)
plt.show()
```

