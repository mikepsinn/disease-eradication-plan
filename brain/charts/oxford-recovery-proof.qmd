
```{python}
#| label: oxford-recovery-proof
#| fig-cap: "Oxford RECOVERY Trial: Proof of Concept"

import sys
import os
from pathlib import Path

# Add project root to path (find it relative to current working directory)
project_root = Path.cwd()
if project_root.name != 'decentralized-institutes-of-health':
    while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
        project_root = project_root.parent
sys.path.insert(0, str(project_root))

import matplotlib.pyplot as plt
from brain.charts._chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_BLUE, COLOR_WHITE
)

# Setup styling
setup_chart_style(style='light', dpi=150)

# Data
metrics_oxford = ['Cost per\nPatient', 'Lives\nSaved', 'Time to\nResults', 'Patients\nIncluded']
oxford_vals = [500, 1000000, 6, 40000]
display_oxford = ['$500', '1M+', '6 months', '40,000']

# Create chart - all BLUE (showing proof of solution)
fig, ax = plt.subplots(figsize=(20, 9))
bars = ax.bar(metrics_oxford, oxford_vals,
              color=COLOR_BLUE,
              width=0.6, edgecolor=COLOR_WHITE, linewidth=3)

# Add value labels
for bar, display_val in zip(bars, display_oxford):
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2., height/2,
            display_val, ha='center', va='center', fontsize=56, weight='bold', color=COLOR_WHITE)

ax.set_ylim(0, max(oxford_vals) * 1.1)
ax.tick_params(axis='x', labelsize=36, colors=COLOR_BLACK)
ax.set_yticks([])
clean_spines(ax, ['top', 'right', 'left'])

# Add branding
add_watermark(fig)

#plt.tight_layout()  # Disabled - using rcParams margins instead

# Save in the same directory as this .qmd file
output_dir = Path(__file__).parent
plt.savefig(output_dir / 'oxford-recovery-proof.png', dpi=200, bbox_inches=None, facecolor=COLOR_WHITE)
plt.show()
```
