---
title: Economic Models for the 1% Treaty Initiative
jupyter: python3
---


This notebook contains the economic models and calculations supporting the cost-benefit analyses for the 1% Treaty, the Decentralized FDA (dFDA), and the associated Peace Dividend.

The purpose of this notebook is to provide a transparent, reproducible, and rigorous foundation for our economic claims, in alignment with best practices like the Gates Foundation Reference Case.

## Contents
1.  **Peace Dividend Analysis**: Quantifies the economic benefits of a 1% reduction in military spending and conflict costs.
2.  **dFDA Cost-Benefit Analysis**: Models the economic and health impacts (QALYs/DALYs) of a more efficient medical research system.
3.  **Sensitivity Analyses**: Tests the robustness of our conclusions by varying key assumptions and parameters.



## 1. Peace Dividend Analysis

This section quantifies the economic benefits derived from a 1% reduction in global military spending and the broader costs of conflict. The calculations are based on the data compiled in our `[Cost of War analysis](../problem/cost-of-war.md)`.

We model two types of benefits:
1.  **The Captured Dividend**: The direct funds redirected from military budgets to the DIH treasury.
2.  **The Societal Dividend**: The total economic value retained by society due to a 1% reduction in all conflict-related costs.


```{python}
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np
import pandas as pd
import os

# Set plot style for consistent visualizations
sns.set_style("whitegrid")

# Create a directory to save charts if it doesn't exist
charts_dir = '../../../assets/charts'
os.makedirs(charts_dir, exist_ok=True)

print("Plotting libraries imported and charts directory configured.")
```

```{python}
# Data from the "Cost of War" analysis (in billions of USD)
# Source: brain/book/references.md#sipri-2024-spending

# Direct Costs
direct_military_expenditure = 2718.0
infrastructure_destruction = 1875.0
human_life_losses = 1000.0
trade_disruption = 616.0
total_direct_costs = direct_military_expenditure + infrastructure_destruction + human_life_losses + trade_disruption

# Indirect Costs
lost_economic_growth = 2443.0 # Note: This is a calculated opportunity cost, not a direct expenditure.
veteran_healthcare = 200.1
refugee_support = 150.0
environmental_damage = 100.0
psychological_impact = 100.0
lost_human_capital = 270.0
total_indirect_costs = lost_economic_growth + veteran_healthcare + refugee_support + environmental_damage + psychological_impact + lost_human_capital

# Grand Total
total_cost_of_war = total_direct_costs + total_indirect_costs

# --- Calculations for 1% Reduction ---

reduction_percentage = 0.01

# Captured Dividend (from direct military spending)
captured_dividend = direct_military_expenditure * reduction_percentage

# Societal Dividend (from total costs)
societal_dividend = total_cost_of_war * reduction_percentage

# Print the results
print(f"--- 1% Peace Dividend Analysis ---")
print(f"Total Annual Cost of War: ${total_cost_of_war:,.1f} Billion")
print("-" * 35)
print(f"Captured Dividend (1% of Military Spend): ${captured_dividend:,.2f} Billion")
print(f"Societal Dividend (1% of Total Costs): ${societal_dividend:,.2f} Billion")

```

```{python}
# --- Modern Design System Setup ---

import matplotlib.font_manager as fm

# Modern color palette - sophisticated and professional
colors = {
    'dark': '#2C2C2C',      # Sophisticated off-black
    'primary': '#6366F1',   # Modern indigo - our main accent
    'secondary': '#8B5CF6', # Purple accent for variety
    'success': '#10B981',   # Clean emerald green
    'warning': '#F59E0B',   # Warm amber
    'danger': '#EF4444',    # Clean red
    'slate': '#64748B',     # Medium slate
    'slate_light': '#94A3B8', # Light slate for secondary data
    'grid': '#E5E7EB',      # Subtle gray for grids
    'text': '#374151',      # Readable dark gray
    'text_light': '#6B7280' # Lighter text
}

# Set modern typography globally
plt.rcParams.update({
    'font.family': 'sans-serif',
    'font.sans-serif': ['Inter', 'Helvetica Neue', 'Segoe UI', 'Arial', 'sans-serif'],
    'font.size': 12,
    'axes.titlesize': 20,
    'axes.labelsize': 14,
    'xtick.labelsize': 12,
    'ytick.labelsize': 12,
    'legend.fontsize': 12,
    'figure.titlesize': 24
})

def apply_modern_style(ax, remove_spines=['top', 'right'], grid_axis='y'):
    """Apply consistent modern styling to any axis"""
    ax.set_facecolor('white')
    
    # Remove specified spines
    for spine in remove_spines:
        ax.spines[spine].set_visible(False)
    
    # Style remaining spines
    for spine in ax.spines.values():
        if spine.get_visible():
            spine.set_color(colors['grid'])
            spine.set_linewidth(0.5)
    
    # Add subtle grid
    if grid_axis:
        ax.grid(True, axis=grid_axis, color=colors['grid'], 
                linestyle='-', linewidth=0.5, alpha=0.7)
        ax.set_axisbelow(True)
    
    # Remove tick marks
    ax.tick_params(axis='both', which='both', length=0)
    ax.tick_params(axis='x', colors=colors['text'])
    ax.tick_params(axis='y', colors=colors['text'])

def add_modern_watermark(fig):
    """Add consistent watermark styling"""
    fig.text(0.98, 0.02, 'WarOnDisease.org', ha='right', va='bottom', 
             fontsize=10, color=colors['grid'], alpha=0.8, fontweight='500')

print("✅ Modern design system loaded")
```

## 1a. Context: Global Spending Priorities

Before analyzing the peace dividend, it's important to understand the scale of global military spending relative to what is spent on medical research. This chart visualizes the fundamental trade-off at the heart of this initiative.

```{python}
# --- Modern Visualization: Global Spending Priorities ---

# Data for comparison
medical_research_spending = 67.5 # in billions of USD

spending_data = {
    'Category': ['Military Spending', 'Medical Research'],
    'Amount ($B)': [direct_military_expenditure, medical_research_spending]
}
spending_df = pd.DataFrame(spending_data)

# Create modern figure
fig, ax = plt.subplots(figsize=(10, 7))
fig.patch.set_facecolor('white')

# Modern color scheme
bar_colors = [colors['danger'], colors['success']]  # Red for military, green for medical

# Create bars with modern styling
bars = ax.bar(spending_df['Category'], spending_df['Amount ($B)'], 
              color=bar_colors, width=0.6, alpha=0.9)

# Apply modern styling
apply_modern_style(ax)

# Clean, prominent value labels
for i, bar in enumerate(bars):
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2, height + 50,
            f'${height:,.0f}B',
            ha='center', va='bottom', fontsize=16, fontweight='600', color=colors['text'])

# Modern callout for the multiple
multiple = direct_military_expenditure / medical_research_spending
ax.text(0.5, max(spending_df['Amount ($B)']) * 0.45, f'{multiple:.0f}× More', 
        ha='center', va='center', fontsize=18, fontweight='700', color='white',
        bbox=dict(facecolor=colors['dark'], alpha=0.8, boxstyle='round,pad=0.8'))

# Modern title and labels
ax.set_title('Global Spending Priorities', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=30)
ax.set_ylabel('Annual Spending (Billions USD)', fontsize=14, color=colors['text'], labelpad=15)
ax.set_xlabel('')

# Clean axis formatting
ax.set_ylim(0, direct_military_expenditure * 1.15)

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.12, right=0.95, top=0.9, bottom=0.1)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'military_vs_research_spending.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}
# --- Modern Visualization: Military vs. Disease Research Funding ---

# Data for comparison
disease_funding_data = {
    'Category': ['Military\nSpending', 'Cancer\nResearch', 'Heart Disease\nResearch', 'Alzheimer\'s\nResearch'],
    'Amount ($B)': [
        direct_military_expenditure,
        7.3, # NCI
        4.1, # NHLBI
        3.5, # NIA
    ]
}
disease_funding_df = pd.DataFrame(disease_funding_data)

# Create modern figure
fig, ax = plt.subplots(figsize=(12, 8))
fig.patch.set_facecolor('white')

# Sophisticated color scheme - gradient from red to blues
bar_colors = [colors['danger'], colors['primary'], colors['secondary'], colors['slate']]

# Create bars
bars = ax.bar(disease_funding_df['Category'], disease_funding_df['Amount ($B)'], 
              color=bar_colors, width=0.6, alpha=0.9)

# Apply modern styling
apply_modern_style(ax)

# Smart labeling - only label visible bars in log scale
for i, bar in enumerate(bars):
    height = bar.get_height()
    if height < 1000:  # Only label the smaller bars
        ax.text(bar.get_x() + bar.get_width()/2, height * 1.2,
                f'${height:,.1f}B',
                ha='center', va='bottom', fontsize=14, fontweight='600', color=colors['text'])
    else:  # Special treatment for the huge military bar
        ax.text(bar.get_x() + bar.get_width()/2, height * 1.1,
                f'${height:,.0f}B',
                ha='center', va='bottom', fontsize=14, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('Military vs. Disease Research Funding', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=30)
ax.set_ylabel('Annual Funding (Billions USD, Log Scale)', fontsize=14, color=colors['text'], labelpad=15)
ax.set_xlabel('')

# Use log scale but with cleaner formatting
ax.set_yscale('log')
ax.set_ylim(1, direct_military_expenditure * 2)

# Rotate labels slightly for better fit
plt.setp(ax.get_xticklabels(), rotation=0, ha='center')

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.1, right=0.95, top=0.9, bottom=0.15)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'military_vs_disease_spending.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}
# --- Modern Visualization: Peace Dividend Breakdown ---

# Create a DataFrame for the breakdown of savings
savings_data = {
    'Category': [
        'Military Expenditure', 'Lost Economic Growth', 'Infrastructure Destruction', 'Human Life Losses', 
        'Trade Disruption', 'Lost Human Capital', 'Veteran Healthcare', 
        'Refugee Support', 'Environmental Damage', 'Psychological Impact'
    ],
    'Savings ($B)': [
        direct_military_expenditure * reduction_percentage,
        lost_economic_growth * reduction_percentage,
        infrastructure_destruction * reduction_percentage,
        human_life_losses * reduction_percentage,
        trade_disruption * reduction_percentage,
        lost_human_capital * reduction_percentage,
        veteran_healthcare * reduction_percentage,
        refugee_support * reduction_percentage,
        environmental_damage * reduction_percentage,
        psychological_impact * reduction_percentage
    ]
}
savings_df = pd.DataFrame(savings_data).sort_values(by='Savings ($B)', ascending=True)

# Create modern horizontal bar chart
fig, ax = plt.subplots(figsize=(14, 10))
fig.patch.set_facecolor('white')

# Create a sophisticated color gradient from light to dark based on value
max_val = max(savings_df['Savings ($B)'])
bar_colors = []
for val in savings_df['Savings ($B)']:
    intensity = val / max_val
    if intensity > 0.7:
        bar_colors.append(colors['primary'])
    elif intensity > 0.4:
        bar_colors.append(colors['secondary'])
    else:
        bar_colors.append(colors['slate_light'])

# Create horizontal bars
bars = ax.barh(savings_df['Category'], savings_df['Savings ($B)'], 
               color=bar_colors, height=0.7, alpha=0.9)

# Apply modern styling
apply_modern_style(ax, remove_spines=['top', 'right', 'left'], grid_axis='x')

# Clean value labels positioned outside bars
for i, bar in enumerate(bars):
    width = bar.get_width()
    y = bar.get_y() + bar.get_height() / 2
    ax.text(width + max_val * 0.01, y, f'${width:,.2f}B', 
            va='center', ha='left', fontsize=12, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('Peace Dividend Breakdown by Category', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=35)
ax.set_xlabel('Annual Savings (Billions USD)', fontsize=14, color=colors['text'], labelpad=20)
ax.set_ylabel('')

# Clean axis formatting
ax.set_xlim(0, max_val * 1.12)

# Style tick labels
ax.tick_params(axis='y', labelsize=12, colors=colors['text'])

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.25, right=0.9, top=0.9, bottom=0.1)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'peace_dividend_breakdown.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}

```

```{python}
# --- Modern Visualization: Peace Dividend Composition ---

# To avoid clutter, we can group smaller categories into an 'Other' slice.
total_savings = savings_df['Savings ($B)'].sum()
savings_df['Percentage'] = (savings_df['Savings ($B)'] / total_savings) * 100

# Group small slices into 'Other'
threshold = 3  # Slightly higher threshold for cleaner look
main_slices = savings_df[savings_df['Percentage'] >= threshold]
other_slices_value = savings_df[savings_df['Percentage'] < threshold]['Savings ($B)'].sum()

if other_slices_value > 0:
    other_df = pd.DataFrame({
        'Category': ['Other Categories'], 
        'Savings ($B)': [other_slices_value],
        'Percentage': [(other_slices_value / total_savings) * 100]
    })
    plot_df = pd.concat([main_slices, other_df])
else:
    plot_df = main_slices

# Sort by size for better visual flow
plot_df = plot_df.sort_values(by='Savings ($B)', ascending=False)

# Create modern donut chart
fig, ax = plt.subplots(figsize=(12, 12))
fig.patch.set_facecolor('white')

# Modern color palette - sophisticated blues and grays
modern_colors = [colors['primary'], colors['secondary'], colors['success'], 
                colors['warning'], colors['slate'], colors['slate_light']]

# Create donut chart with modern styling
wedges, texts, autotexts = ax.pie(plot_df['Savings ($B)'], 
                                  labels=plot_df['Category'],
                                  autopct='%1.1f%%',
                                  startangle=90,
                                  pctdistance=0.85,
                                  colors=modern_colors[:len(plot_df)],
                                  wedgeprops=dict(width=0.5, edgecolor='white', linewidth=2))

# Style the text elements
for text in texts:
    text.set_fontsize(13)
    text.set_fontweight('600')
    text.set_color(colors['text'])

for autotext in autotexts:
    autotext.set_fontsize(12)
    autotext.set_fontweight('700')
    autotext.set_color('white')

# Add center circle for clean donut look
centre_circle = plt.Circle((0,0), 0.6, fc='white', linewidth=2, edgecolor=colors['grid'])
ax.add_artist(centre_circle)

# Add center text
ax.text(0, 0.1, 'Peace Dividend', ha='center', va='center', 
        fontsize=18, fontweight='700', color=colors['dark'])
ax.text(0, -0.1, f'${total_savings:.1f}B Annual', ha='center', va='center', 
        fontsize=14, fontweight='600', color=colors['text'])

# Modern title
ax.set_title('Peace Dividend Composition', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=40)

# Ensure circular shape
ax.axis('equal')

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.05, right=0.95, top=0.9, bottom=0.05)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'peace_dividend_pie_chart.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}

```

```{python}
# --- Modern Visualization: Peace Dividend Types ---

dividends_data = {
    'Type': ['Captured\nDividend', 'Total Societal\nDividend'],
    'Amount ($B)': [captured_dividend, societal_dividend]
}
dividends_df = pd.DataFrame(dividends_data)

# Create modern figure
fig, ax = plt.subplots(figsize=(10, 7))
fig.patch.set_facecolor('white')

# Modern color scheme - distinguish the two types
bar_colors = [colors['warning'], colors['primary']]  # Amber for captured, indigo for societal

# Create bars with modern styling
bars = ax.bar(dividends_df['Type'], dividends_df['Amount ($B)'], 
              color=bar_colors, width=0.6, alpha=0.9)

# Apply modern styling
apply_modern_style(ax)

# Clean, prominent value labels
for i, bar in enumerate(bars):
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2, height + 2,
            f'${height:,.1f}B',
            ha='center', va='bottom', fontsize=16, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('Peace Dividend Breakdown', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=30)
ax.set_ylabel('Annual Value (Billions USD)', fontsize=14, color=colors['text'], labelpad=15)
ax.set_xlabel('')

# Clean axis formatting
ax.set_ylim(0, societal_dividend * 1.12)

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.15, right=0.95, top=0.9, bottom=0.15)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'captured_vs_societal_dividend.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}

```

```{python}

```

```{python}

```

```{python}
# --- Modern Visualization: dFDA Investment Returns ---

# Data for the bar chart
investment_return_data = {
    'Label': ['Investment\n(OpEx)', 'R&D Savings\n(Financial)', 'Health Gains\n(Monetized)'],
    'Value ($B)': [dfda_annual_operational_cost, gross_rd_savings, monetized_qaly_value]
}
investment_return_df = pd.DataFrame(investment_return_data)

# Create modern figure
fig, ax = plt.subplots(figsize=(12, 8))
fig.patch.set_facecolor('white')

# Modern color scheme - progress from cost (red) to benefits (greens/blues)
bar_colors = [colors['danger'], colors['success'], colors['primary']]

# Create bars with modern styling
bars = ax.bar(investment_return_df['Label'], investment_return_df['Value ($B)'], 
              color=bar_colors, width=0.6, alpha=0.9)

# Apply modern styling
apply_modern_style(ax)

# Smart labeling for log scale
for i, bar in enumerate(bars):
    height = bar.get_height()
    # Position labels differently based on log scale
    if height < 1:  # Very small values
        y_pos = height * 3
    else:
        y_pos = height * 1.2
    
    ax.text(bar.get_x() + bar.get_width()/2, y_pos,
            f'${height:,.1f}B',
            ha='center', va='bottom', fontsize=14, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('dFDA Investment vs. Returns', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=30)
ax.set_ylabel('Value (Billions USD, Log Scale)', fontsize=14, color=colors['text'], labelpad=15)
ax.set_xlabel('')

# Use log scale for dramatic difference visualization
ax.set_yscale('log')
ax.set_ylim(0.01, monetized_qaly_value * 1.5)

# Clean tick formatting
from matplotlib.ticker import FuncFormatter
ax.yaxis.set_major_formatter(FuncFormatter(lambda x, p: f'${x:,.0f}B' if x >= 1 else f'${x:,.2f}B'))

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.12, right=0.95, top=0.9, bottom=0.15)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'dfda_roi_comparison.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

## 2. Sensitivity Analysis for the Peace Dividend

A key principle of rigorous economic modeling is to test the assumptions to understand how they impact the final conclusions. A sensitivity analysis allows us to see how the "Societal Dividend" changes when we vary our key inputs.

In this analysis, we will vary two key parameters simultaneously:
1.  **Reduction Percentage**: We will model a range of reductions from 0.5% to 2.0% to see the impact of partial or greater-than-expected success.
2.  **Accuracy of Indirect Cost Estimates**: The indirect costs of war (like lost economic growth) are harder to quantify than direct spending. We will model a scenario where these costs might be overestimated or underestimated by 25%.

This will create a matrix of possible outcomes, giving us a more robust understanding of the potential economic benefits under different scenarios.


```{python}
# Define the ranges for the sensitivity analysis
reduction_percentages = [0.005, 0.01, 0.015, 0.02]
indirect_cost_multipliers = [0.75, 1.0, 1.25] # Represents -25%, baseline, +25%

# Create an empty list to store results
results = []

# Loop through each combination of parameters
for redux in reduction_percentages:
    for mult in indirect_cost_multipliers:
        
        # Recalculate total cost based on the multiplier for indirect costs
        adjusted_indirect_costs = total_indirect_costs * mult
        adjusted_total_cost = total_direct_costs + adjusted_indirect_costs
        
        # Calculate the societal dividend for this scenario
        dividend = adjusted_total_cost * redux
        
        # Store the result
        results.append({
            "Reduction %": f"{redux:.1%}",
            "Indirect Cost Scenario": f"{int((mult-1)*100)}%",
            "Societal Dividend ($B)": f"{dividend:,.1f}"
        })

# Create a pandas DataFrame for better display
df = pd.DataFrame(results)

# Pivot the table for a matrix-like view
pivot_df = df.pivot(index="Indirect Cost Scenario", columns="Reduction %", values="Societal Dividend ($B)")

print("--- Sensitivity Analysis: Societal Dividend ($ Billions) ---")
print(pivot_df)

```

## 3. dFDA Cost-Benefit Analysis

This section models the health and economic benefits generated by the Decentralized FDA (dFDA) platform, which is funded by the "Captured Dividend" from the Peace Dividend analysis.

The model is based on the data in the full `[dFDA Cost Benefit Analysis document](./dfda-cost-benefit-analysis.md)`.

Key outputs of this model include:
-   Projected annual R&D savings.
-   Return on Investment (ROI) for the dFDA platform.
-   Estimated health gains in Quality-Adjusted Life Years (QALYs).
-   A sensitivity analysis on the key drivers of these benefits.


```{python}
# Core parameters for the dFDA model (in billions of USD)
# Source: brain/book/economics/dfda-cost-benefit-analysis.md

global_clinical_trial_market = 100.0
dfda_rd_cost_reduction_pct = 0.50
dfda_annual_operational_cost = 0.040 # $40 million

# Baseline QALYs generated annually
qaly_gains_annual_baseline = 840000 # in QALYs, not dollars

# Value of a QALY (standard economic value, can be debated)
value_per_qaly = 150000 # Using a common benchmark of ~$150k per QALY

# --- Calculations for dFDA Benefits ---

# Gross R&D savings
gross_rd_savings = global_clinical_trial_market * dfda_rd_cost_reduction_pct

# Net R&D savings (after operational costs)
net_rd_savings = gross_rd_savings - dfda_annual_operational_cost

# ROI Calculation
# ROI = (Net Benefit / Cost)
# Here, the cost is the operational cost, and the benefit is the gross savings it unlocks.
dfda_roi = gross_rd_savings / dfda_annual_operational_cost

# Monetized value of QALY gains
monetized_qaly_value = (qaly_gains_annual_baseline * value_per_qaly) / 1_000_000_000 # Convert to billions

# --- Connecting to the Peace Dividend ---
# The captured dividend must cover the operational cost.
funding_coverage_ratio = captured_dividend / dfda_annual_operational_cost


print(f"--- dFDA Cost-Benefit Analysis (Baseline) ---")
print(f"Annual Gross R&D Savings: ${gross_rd_savings:,.1f} Billion")
print(f"Annual dFDA Operational Cost: ${dfda_annual_operational_cost:,.3f} Billion")
print(f"Return on Investment (ROI): {dfda_roi:,.0f}:1")
print("-" * 45)
print(f"Annual QALYs Gained: {qaly_gains_annual_baseline:,.0f}")
print(f"Monetized Value of Annual QALYs: ${monetized_qaly_value:,.1f} Billion")
print("-" * 45)
print(f"Funding Coverage (Captured Dividend / OpEx): {funding_coverage_ratio:,.1f}x")

```

```{python}

```

```{python}
# --- Modern Visualization: NPV Analysis Over Time ---

# Calculate cumulative NPV streams for plotting
years = np.arange(1, T + 1)
cumulative_npv_costs = [C0] # Start with upfront cost at year 0
cumulative_npv_savings = [0] # No savings at year 0

# We need non-cumulative discounted streams first
discounted_ops_stream = [Cop / ((1+r)**t) for t in years]
discounted_savings_stream = [s / ((1+r)**t) for t, s in enumerate(annual_savings_stream, 1)]

# Now calculate cumulative sums
cumulative_npv_costs.extend(C0 + np.cumsum(discounted_ops_stream))
cumulative_npv_savings.extend(np.cumsum(discounted_savings_stream))

# Create a DataFrame for plotting
npv_df = pd.DataFrame({
    'Year': np.arange(0, T + 1),
    'Cumulative NPV of Costs ($B)': cumulative_npv_costs,
    'Cumulative NPV of Savings ($B)': cumulative_npv_savings
})
npv_df['Net Benefit ($B)'] = npv_df['Cumulative NPV of Savings ($B)'] - npv_df['Cumulative NPV of Costs ($B)']

# Create modern figure
fig, ax = plt.subplots(figsize=(14, 9))
fig.patch.set_facecolor('white')

# Modern line styling
line_width = 3
marker_size = 8

# Plot lines with modern styling
savings_line = ax.plot(npv_df['Year'], npv_df['Cumulative NPV of Savings ($B)'], 
                      label='Cumulative Savings', color=colors['success'], 
                      linewidth=line_width, marker='o', markersize=marker_size, alpha=0.9)

costs_line = ax.plot(npv_df['Year'], npv_df['Cumulative NPV of Costs ($B)'], 
                    label='Cumulative Costs', color=colors['danger'], 
                    linewidth=line_width, marker='o', markersize=marker_size, alpha=0.9)

# Modern area fills
ax.fill_between(npv_df['Year'], npv_df['Cumulative NPV of Costs ($B)'], npv_df['Cumulative NPV of Savings ($B)'], 
                where=(npv_df['Cumulative NPV of Savings ($B)'] > npv_df['Cumulative NPV of Costs ($B)']),
                color=colors['success'], alpha=0.15, interpolate=True, label='Net Benefit')
                
ax.fill_between(npv_df['Year'], npv_df['Cumulative NPV of Costs ($B)'], npv_df['Cumulative NPV of Savings ($B)'], 
                where=(npv_df['Cumulative NPV of Savings ($B)'] <= npv_df['Cumulative NPV of Costs ($B)']),
                color=colors['danger'], alpha=0.15, interpolate=True, label='Investment Period')

# Apply modern styling
apply_modern_style(ax, remove_spines=['top', 'right'], grid_axis='both')

# Modern title and labels
ax.set_title(f'NPV Analysis: Investment Payback Over {T} Years', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=30)
ax.set_xlabel('Year', fontsize=14, color=colors['text'], labelpad=15)
ax.set_ylabel('Cumulative NPV (Billions USD)', fontsize=14, color=colors['text'], labelpad=15)

# Clean axis formatting
ax.set_xticks(np.arange(0, T + 1, 1))
ax.tick_params(axis='both', labelsize=12, colors=colors['text'])

# Modern legend
legend = ax.legend(loc='upper left', frameon=True, fancybox=True, shadow=False, 
                  fontsize=12, facecolor='white', edgecolor=colors['grid'])
legend.get_frame().set_alpha(0.9)

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.1, right=0.95, top=0.9, bottom=0.1)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'npv_over_time.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

## 4. Sensitivity Analysis for the dFDA Model

This sensitivity analysis explores how the dFDA's financial viability, specifically its Return on Investment (ROI), changes under different assumptions. We will test the two most critical drivers of the financial model:

1.  **R&D Cost Reduction %**: The actual savings achieved could be lower or higher than our 50% baseline. We will model a range from 30% to 70%.
2.  **Annual Operational Cost**: The platform could be cheaper or more expensive to run than the estimated $40M. We will model a range from $20M to $80M.

This matrix will show the ROI under various performance scenarios, from conservative to optimistic.


```{python}
# Define the ranges for the dFDA sensitivity analysis
rd_reduction_scenarios = [0.3, 0.4, 0.5, 0.6, 0.7]
operational_cost_scenarios = [0.020, 0.040, 0.060, 0.080] # In billions of USD

# Create an empty list to store results
dfda_results = []

# Loop through each combination of parameters
for redux_pct in rd_reduction_scenarios:
    for op_cost in operational_cost_scenarios:
        
        # Recalculate gross savings for this scenario
        gross_savings = global_clinical_trial_market * redux_pct
        
        # Recalculate ROI for this scenario
        # Handle case where op_cost is zero to avoid division error, though not in our scenarios
        if op_cost > 0:
            roi = gross_savings / op_cost
        else:
            roi = float('inf')

        # Store the result
        dfda_results.append({
            "R&D Reduction %": f"{redux_pct:.0%}",
            "Annual OpEx ($B)": f"${op_cost:.3f}",
            "ROI (x:1)": f"{roi:,.0f}"
        })

# Create and pivot the DataFrame
dfda_df = pd.DataFrame(dfda_results)
dfda_pivot = dfda_df.pivot(index="Annual OpEx ($B)", columns="R&D Reduction %", values="ROI (x:1)")

print("--- Sensitivity Analysis: dFDA Return on Investment (ROI) ---")
print(dfda_pivot)

```

```{python}
# --- Modern Visualization: Combined Annual Benefits ---

# Data for the stacked bar chart
benefit_data = {
    'Peace Dividend': [win_1_peace_dividend],
    'dFDA R&D Savings': [win_2_dfda_bonus]
}
benefit_df = pd.DataFrame(benefit_data)

# Create modern figure
fig, ax = plt.subplots(figsize=(10, 8))
fig.patch.set_facecolor('white')

# Modern color scheme for the two benefit types
modern_colors = [colors['primary'], colors['success']]

# Create stacked bar with modern styling
bottom = 0
bars = []
for i, (col, color) in enumerate(zip(benefit_df.columns, modern_colors)):
    values = benefit_df[col].values
    bar = ax.bar(['Combined Annual Benefit'], values, bottom=bottom, 
                color=color, alpha=0.9, width=0.5, label=col)
    bars.extend(bar)
    bottom += values

# Apply modern styling
apply_modern_style(ax, remove_spines=['top', 'right', 'bottom'], grid_axis=None)

# Clean, prominent segment labels
cumulative_height = 0
for i, (col, color) in enumerate(zip(benefit_df.columns, modern_colors)):
    segment_height = benefit_df[col].values[0]
    y_center = cumulative_height + segment_height / 2
    ax.text(0, y_center, f'${segment_height:,.1f}B\n{col}', 
            ha='center', va='center', fontsize=14, fontweight='700', 
            color='white', bbox=dict(boxstyle='round,pad=0.3', facecolor=color, alpha=0.8))
    cumulative_height += segment_height

# Total value label
total_val = benefit_df.sum(axis=1).iloc[0]
ax.text(0, total_val + 5, f'Total Annual Benefit\n${total_val:,.1f}B', 
        ha='center', va='bottom', fontsize=16, fontweight='700', color=colors['dark'])

# Modern title and labels
ax.set_title('Combined Annual Benefits to Society', fontsize=22, fontweight='700', 
             color=colors['dark'], pad=40)
ax.set_ylabel('Annual Value (Billions USD)', fontsize=14, color=colors['text'], labelpad=20)
ax.set_xlabel('')

# Clean axis formatting
ax.set_ylim(0, total_val * 1.15)
ax.set_xticks([])

# Modern legend
legend = ax.legend(loc='upper right', frameon=True, fancybox=True, shadow=False,
                  fontsize=12, facecolor='white', edgecolor=colors['grid'],
                  title='Benefit Sources', title_fontsize=13)
legend.get_frame().set_alpha(0.9)

# Modern layout
plt.tight_layout()
plt.subplots_adjust(left=0.15, right=0.95, top=0.85, bottom=0.1)

# Add modern watermark
add_modern_watermark(fig)

# Save with high quality
file_path = os.path.join(charts_dir, 'total_annual_benefit.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

## 5. Rigorous Financial Model: Net Present Value (NPV) Analysis

The simple ROI calculation is useful for a high-level summary, but a more rigorous financial analysis uses **Net Present Value (NPV)**. This method accounts for the "time value of money" by using a discount rate to value future savings and costs in today's dollars. It provides a much more accurate picture of the investment's long-term value.

This model is based on the detailed framework in the `dfda-cost-benefit-analysis.md` document and calculates:
1.  The NPV of all costs (upfront and operational) over a 10-year horizon.
2.  The NPV of all savings (ramping up as the platform is adopted).
3.  A more robust ROI and Net Benefit based on these NPV figures.


```{python}
# NPV Model Parameters
# Source: brain/book/economics/dfda-cost-benefit-analysis.md -> "Example Parameterization" section

# Costs (in billions USD)
# Combines core platform build + medium broader initiative setup costs
C0 = 0.26975  # Upfront Costs
# Combines core platform ops + medium broader initiative annual costs
Cop = 0.04005   # Annual Operational Costs (constant)

# Savings (in billions USD)
Rd = 100.0  # Annual Global R&D Spend on clinical trials
alpha = 0.50  # Fraction of R&D cost saved

# Financial Parameters
r = 0.08  # Annual discount rate
T = 10    # Time horizon in years

# Adoption Curve p(t)
# Linear ramp from 0% to 100% over 5 years, then constant at 100%
def adoption_rate(t):
    if t == 0:
        return 0
    elif t <= 5:
        return t / 5
    else:
        return 1.0

print("NPV Model Parameters Loaded.")
print(f"Upfront Cost (C0): ${C0:.4f}B")
print(f"Annual OpEx (Cop): ${Cop:.4f}B")
print(f"Discount Rate (r): {r:.0%}")
print(f"Time Horizon (T): {T} years")

```

```{python}
import numpy as np
import numpy_financial as npf

# --- NPV of Costs ---
# Create a stream of operational costs over the time horizon
operational_costs_stream = [Cop] * T
# The npv function in numpy_financial takes the rate and a stream of cash flows.
# It assumes the first cash flow is at t=1.
npv_of_ops = npf.npv(r, operational_costs_stream)
# Total NPV of costs is the upfront cost plus the discounted stream of operational costs
npv_costs = C0 + npv_of_ops

# --- NPV of Savings ---
# Calculate the annual savings for each year, considering the adoption rate
annual_savings_stream = [(adoption_rate(t) * alpha * Rd) for t in range(1, T + 1)]
# Calculate the NPV of this savings stream
npv_savings = npf.npv(r, annual_savings_stream)

# --- Final ROI and Net Benefit ---
robust_roi = npv_savings / npv_costs
net_benefit = npv_savings - npv_costs

# --- Display Results ---
print("--- Rigorous Financial Analysis Results ---")
print(f"NPV of Total Costs over {T} years: ${npv_costs:,.3f} Billion")
print(f"NPV of Total Savings over {T} years: ${npv_savings:,.3f} Billion")
print("-" * 40)
print(f"Net Benefit (NPV Savings - NPV Costs): ${net_benefit:,.3f} Billion")
print(f"Robust ROI (NPV Savings / NPV Costs): {robust_roi:,.0f}:1")

```

```{python}

```

## 6. Final Summary: The Complete Value Proposition

This final section synthesizes the findings from the Peace Dividend and dFDA models to present the total annual benefit to society.

The model demonstrates two distinct and massive wins:

1.  **The Peace Dividend**: A standalone economic benefit from reduced conflict.
2.  **The dFDA Bonus**: An additional economic and health benefit unlocked by reinvesting a fraction of the peace dividend.


```{python}
# --- Total Annual Benefit Calculation ---

# Win #1: The Societal Dividend from less conflict
win_1_peace_dividend = societal_dividend

# Win #2: The additional Gross R&D Savings unlocked by the dFDA
win_2_dfda_bonus = gross_rd_savings

# Total combined annual benefit to society
total_annual_benefit = win_1_peace_dividend + win_2_dfda_bonus

# Print the final summary
print("--- The Complete Value Proposition ---\n")
print("This initiative creates two massive, independent wins for the world:\n")
print(f"1. The Peace Dividend: Society gets ${win_1_peace_dividend:,.2f} Billion richer every year from less conflict.")
print(f"2. The dFDA Bonus: We use a fraction of that dividend to unlock an *additional* ${win_2_dfda_bonus:,.2f} Billion in R&D savings.")
print("-" * 50)
print(f"Total Combined Annual Benefit to Society: ${total_annual_benefit:,.2f} Billion")
print(f"Plus {qaly_gains_annual_baseline:,.0f} extra years of healthy life, every year.")

```

```{python}

```

## 7. Comparative Analysis: Benchmarking Our Impact

The final two charts provide context for the scale of this initiative by comparing its economic model and impact to two important benchmarks:
1.  **Top-rated charities**: How does a self-funding, wealth-generating model compare to a traditional donation-based model?
2.  **Historical public health successes**: How does the *scale* of the annual benefit compare to some of the best public health investments in history?

```{python}
# --- Visualization: Comparison with Top Charities ---

# This chart illustrates the fundamental difference between a cost model and a profit model.
# Top charities *spend* money to save lives (a financial cost for a health gain).
# Our initiative *makes* money while saving lives (a financial gain *and* a health gain).

# Data for the chart
# Note: ROI for charities is conceptually < 0 because it's a cost. We'll represent this as a cost per outcome.
# The value for our initiative is the NPV-based ROI calculated earlier.
comparison_data = {
    'Intervention': ['Top Charities (e.g., GiveWell)', 'Our Initiative (dFDA)'],
    'Value Proposition': ['Cost per Life Saved', 'Net Profit per Dollar Invested'],
    'Financial Return per $1': [-1, robust_roi] # -1 represents a cost, +481 represents a return
}
df_comparison = pd.DataFrame(comparison_data)

# Create the plot
plt.figure(figsize=(10, 7))
ax = sns.barplot(x='Intervention', y='Financial Return per $1', data=df_comparison, 
                 palette=['#FF6347', '#32CD32'])

plt.title('The Two Models for Saving Lives: Cost vs. Profit', fontsize=16, pad=20)
plt.ylabel('Financial Return per Dollar')
plt.xlabel('')

# Custom annotations to explain the model
ax.text(0, -50, 'Spends money\nto save lives efficiently.\n(A cost)', ha='center', va='top', fontsize=12, color='black')
ax.text(1, robust_roi / 2, 'Generates wealth\nwhile saving lives.\n(A profit)', ha='center', va='center', fontsize=12, color='white', weight='bold')

# Set y-axis to be symmetric log to handle positive and negative values
plt.yscale('symlog')
plt.ylim(-10, robust_roi * 1.5)
plt.grid(axis='y', linestyle='--')
plt.tight_layout()

# Add watermark
plt.figtext(0.99, 0.01, 'WarOnDisease.org', ha='right', va='bottom', fontsize=10, color='black', alpha=0.7)

# Save the figure
file_path = os.path.join(charts_dir, 'comparison_charity_models.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight')

plt.show()

print(f'Chart saved to {file_path}')
```

```{python}
# --- Visualization: Comparison with Historical Public Health Wins ---

# Data for the chart
# Source for estimates: economic-impact-summary.md
# Our initiative's benefit is the annualized 10-year NPV net benefit.
annualized_net_benefit = net_benefit / T

health_wins_data = {
    'Intervention': [
        'Our Initiative (dFDA)',
        'Childhood Vaccinations',
        'Smoking Cessation',
        'Water Fluoridation'
    ],
    'Annual Net Economic Benefit ($B)': [
        annualized_net_benefit,
        15.0, # Representative estimate for "Billions to Tens of Billions"
        12.0, # Representative estimate for "Billions to Tens of Billions"
        0.8   # Representative estimate for "Hundreds of Millions to Billions"
    ]
}
df_health_wins = pd.DataFrame(health_wins_data).sort_values(by='Annual Net Economic Benefit ($B)', ascending=False)

# Create the plot
plt.figure(figsize=(12, 8))

# Highlight our initiative distinctly
colors = ['#32CD32' if name == 'Our Initiative (dFDA)' else '#A0A0A0' for name in df_health_wins['Intervention']]
ax = sns.barplot(x='Annual Net Economic Benefit ($B)', y='Intervention', data=df_health_wins, palette=colors)

# Currency tick formatter
from matplotlib.ticker import FuncFormatter
ax.xaxis.set_major_formatter(FuncFormatter(lambda v, pos: f'$ {v:,.0f}B'))

# Add numeric labels to bars (outside, with padding)
max_val = float(df_health_wins['Annual Net Economic Benefit ($B)'].max())
for bar in ax.patches:
    width = bar.get_width()
    y = bar.get_y() + bar.get_height() / 2
    ax.text(width + max_val * 0.02, y, f'$ {width:,.1f}B', va='center', ha='left', fontsize=11)

plt.title('Scale of Impact: dFDA vs. Historical Public Health Wins', fontsize=16, pad=20)
plt.xlabel('Annual Net Economic Benefit (Billions of USD)')
plt.ylabel('')

# Ensure room for labels on the right
plt.xlim(0, max_val * 1.18)
plt.grid(axis='x', linestyle='--', alpha=0.4)
plt.tight_layout()

# Equal padding on all sides
plt.subplots_adjust(left=0.075, right=0.925, top=0.925, bottom=0.075)

# Add watermark
plt.figtext(0.99, 0.01, 'WarOnDisease.org', ha='right', va='bottom', fontsize=10, color='black', alpha=0.7)

# Save the figure
file_path = os.path.join(charts_dir, 'comparison_public_health_wins.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight')

plt.show()

print(f'Chart saved to {file_path}')
```

```{python}
# --- Visualization: Comparison with Top Charities (Improved) ---

# Recreate data to ensure this cell is self-contained
comparison_data = {
    'Intervention': ['Top Charities (e.g., GiveWell)', 'Our Initiative (dFDA)'],
    'Financial Return per $1': [-1, robust_roi]
}
df_comparison = pd.DataFrame(comparison_data)

plt.figure(figsize=(10, 7))
ax = sns.barplot(x='Intervention', y='Financial Return per $1', data=df_comparison,
                 palette=['#FF6347', '#32CD32'])

plt.title('The Two Models for Saving Lives: Cost vs. Profit', fontsize=16, pad=20)
plt.ylabel('Financial Return per Dollar')
plt.xlabel('')

# Add numeric labels with currency formatting
for p in ax.patches:
    val = float(p.get_height())
    x = p.get_x() + p.get_width() / 2
    if val >= 0:
        ax.text(x, val * 1.02, f'$ {val:,.0f}', ha='center', va='bottom', fontsize=12)
    else:
        ax.text(x, val * 1.02, f'$ {val:,.0f}', ha='center', va='top', fontsize=12)

# Improve scaling: small room below for the negative bar, room above for positive label
upper = float(robust_roi) * 1.12
lower = -2.0
plt.ylim(lower, upper)
plt.grid(axis='y', linestyle='--', alpha=0.4)
plt.tight_layout()

# Equal padding on all sides
plt.subplots_adjust(left=0.075, right=0.925, top=0.925, bottom=0.075)

# Add watermark
plt.figtext(0.99, 0.01, 'WarOnDisease.org', ha='right', va='bottom', fontsize=10, color='black', alpha=0.7)

# Save the figure (overwrite existing output file)
file_path = os.path.join(charts_dir, 'comparison_charity_models.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight')

plt.show()

print(f'Chart saved to {file_path}')
```

```{python}
# --- Modern Minimalist Design: Charity Comparison ---

import matplotlib.font_manager as fm

# Modern color palette
colors = {
    'dark': '#2C2C2C',      # Sophisticated off-black
    'accent': '#6366F1',    # Modern indigo
    'negative': '#EF4444',  # Clean red
    'grid': '#E5E7EB',      # Subtle gray
    'text': '#374151'       # Readable dark gray
}

# Set modern typography
plt.rcParams.update({
    'font.family': 'sans-serif',
    'font.sans-serif': ['Inter', 'Helvetica Neue', 'Arial', 'sans-serif'],
    'font.size': 12,
    'axes.titlesize': 18,
    'axes.labelsize': 14,
    'xtick.labelsize': 12,
    'ytick.labelsize': 12
})

# Data
comparison_data = {
    'Intervention': ['Traditional Charities', 'Our Initiative'],
    'Financial Return per $1': [-1, robust_roi]
}
df_comparison = pd.DataFrame(comparison_data)

# Create figure with modern styling
fig, ax = plt.subplots(figsize=(11, 7))
fig.patch.set_facecolor('white')

# Create bars with sophisticated colors
bars = ax.bar(df_comparison['Intervention'], df_comparison['Financial Return per $1'], 
              color=[colors['negative'], colors['accent']], 
              width=0.6, alpha=0.9)

# Modern, clean styling
ax.set_facecolor('white')
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)
ax.spines['left'].set_color(colors['grid'])
ax.spines['bottom'].set_color(colors['grid'])

# Subtle grid
ax.grid(True, axis='y', color=colors['grid'], linestyle='-', linewidth=0.5, alpha=0.7)
ax.set_axisbelow(True)

# Clean, large labels with better positioning
for i, bar in enumerate(bars):
    val = float(bar.get_height())
    if val < 0:
        ax.text(bar.get_x() + bar.get_width()/2, val - 20, f'${val:,.0f}', 
                ha='center', va='top', fontsize=16, fontweight='600', color=colors['text'])
    else:
        ax.text(bar.get_x() + bar.get_width()/2, val + 15, f'${val:,.0f}', 
                ha='center', va='bottom', fontsize=16, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('Investment Models: Cost vs. Return', 
             fontsize=20, fontweight='700', color=colors['dark'], pad=30)
ax.set_ylabel('Return per Dollar Invested', fontsize=14, color=colors['text'], labelpad=15)
ax.set_xlabel('')

# Clean axis limits
ax.set_ylim(-50, robust_roi * 1.08)

# Remove tick marks
ax.tick_params(axis='both', which='both', length=0)
ax.tick_params(axis='x', colors=colors['text'])
ax.tick_params(axis='y', colors=colors['text'])

# Minimal layout
plt.tight_layout()
plt.subplots_adjust(left=0.1, right=0.95, top=0.9, bottom=0.1)

# Subtle, modern watermark
plt.figtext(0.98, 0.02, 'WarOnDisease.org', ha='right', va='bottom', 
            fontsize=10, color=colors['grid'], alpha=0.8, fontweight='500')

# Save with high quality
file_path = os.path.join(charts_dir, 'comparison_charity_models.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

```{python}
# --- Modern Minimalist Design: Public Health Impact ---

# Data
annualized_net_benefit = net_benefit / T
health_wins_data = {
    'Intervention': [
        'Our Initiative',
        'Childhood Vaccinations', 
        'Smoking Cessation',
        'Water Fluoridation'
    ],
    'Annual Economic Impact': [
        annualized_net_benefit,
        15.0,
        12.0, 
        0.8
    ]
}
df_health_wins = pd.DataFrame(health_wins_data).sort_values(by='Annual Economic Impact', ascending=True)

# Create modern horizontal bar chart
fig, ax = plt.subplots(figsize=(12, 8))
fig.patch.set_facecolor('white')

# Sophisticated color scheme - highlight our initiative
bar_colors = []
for intervention in df_health_wins['Intervention']:
    if 'Our Initiative' in intervention:
        bar_colors.append(colors['accent'])  # Modern indigo for our initiative
    else:
        bar_colors.append('#94A3B8')  # Elegant slate gray for others

# Create horizontal bars
bars = ax.barh(df_health_wins['Intervention'], df_health_wins['Annual Economic Impact'], 
               color=bar_colors, height=0.65, alpha=0.9)

# Clean, minimal styling
ax.set_facecolor('white')
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)
ax.spines['left'].set_visible(False)
ax.spines['bottom'].set_color(colors['grid'])

# Subtle vertical grid only
ax.grid(True, axis='x', color=colors['grid'], linestyle='-', linewidth=0.5, alpha=0.7)
ax.set_axisbelow(True)

# Clean value labels positioned outside bars
max_val = float(df_health_wins['Annual Economic Impact'].max())
for i, bar in enumerate(bars):
    width = bar.get_width()
    y = bar.get_y() + bar.get_height() / 2
    ax.text(width + max_val * 0.015, y, f'${width:,.1f}B', 
            va='center', ha='left', fontsize=14, fontweight='600', color=colors['text'])

# Modern title and labels
ax.set_title('Annual Economic Impact Comparison', 
             fontsize=22, fontweight='700', color=colors['dark'], pad=35)
ax.set_xlabel('Annual Economic Benefit (Billions USD)', 
              fontsize=14, color=colors['text'], labelpad=20)
ax.set_ylabel('')

# Clean axis formatting
ax.set_xlim(0, max_val * 1.12)

# Remove tick marks and style labels
ax.tick_params(axis='both', which='both', length=0)
ax.tick_params(axis='x', colors=colors['text'])
ax.tick_params(axis='y', colors=colors['text'], labelsize=13)

# Minimal layout with breathing room
plt.tight_layout()
plt.subplots_adjust(left=0.15, right=0.9, top=0.9, bottom=0.15)

# Subtle watermark
plt.figtext(0.98, 0.02, 'WarOnDisease.org', ha='right', va='bottom', 
            fontsize=10, color=colors['grid'], alpha=0.8, fontweight='500')

# Save with high quality
file_path = os.path.join(charts_dir, 'comparison_public_health_wins.png')
plt.savefig(file_path, dpi=300, bbox_inches='tight', facecolor='white', edgecolor='none')

plt.show()
print(f'Modern chart saved to {file_path}')
```

