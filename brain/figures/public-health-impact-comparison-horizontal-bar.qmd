---
jupyter: python3
echo: false
---

```{python}
import matplotlib.pyplot as plt
from pathlib import Path
import sys

# Find project root dynamically
project_root = Path.cwd()
if project_root.name != 'decentralized-institutes-of-health':
    while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
        project_root = project_root.parent
sys.path.insert(0, str(project_root))

# Import centralized style
from brain.figures._chart_style import setup_chart_style, add_watermark, clean_spines
from brain.figures._chart_style import COLOR_BLACK, COLOR_WHITE

setup_chart_style()

# Data - from combined annual benefit calculation
peace_dividend = 97.1
dfda_savings = 50.0
total_benefit = peace_dividend + dfda_savings

interventions = [
    'Water Fluoridation',
    'Smoking Cessation',
    'Childhood Vaccinations',
    '1% Treaty / dFDA Initiative'
]
values = [0.8, 12.0, 15.0, total_benefit]

# Create figure
fig, ax = plt.subplots(figsize=(12, 6))

# Create horizontal bars - all black
bars = ax.barh(interventions, values, color=COLOR_BLACK, height=0.6)

# Value labels
max_val = max(values)
for i, (bar, val) in enumerate(zip(bars, values)):
    width = bar.get_width()
    y = bar.get_y() + bar.get_height() / 2
    ax.text(width + max_val * 0.015, y, f'${val:,.1f}B',
            va='center', ha='left', fontsize=16, color=COLOR_BLACK, weight='bold')

# Axis formatting
ax.set_xlabel('Annual Gross Economic Benefit (Billions USD)', fontsize=12, color=COLOR_BLACK)
ax.set_ylabel('')
ax.set_xlim(0, max_val * 1.12)

# Clean spines
clean_spines(ax, ['top', 'right', 'left'])

# Add watermark
add_watermark(fig)

# Save figure
output_dir = project_root / 'brain' / 'figures'
output_dir.mkdir(parents=True, exist_ok=True)
plt.savefig(output_dir / 'public-health-impact-comparison-horizontal-bar.png', dpi=200, bbox_inches=None, facecolor=COLOR_WHITE)

plt.show()
```
