```{python}
#| echo: false
import sys
import os

# Quarto executes from project root (execute-dir: project in _book.yml)

appendix_path = os.path.join(os.getcwd(), 'brain', 'book', 'appendix')
if appendix_path not in sys.path:
    sys.path.insert(0, appendix_path)

from economic_parameters import *
```

```{python}
#| echo: false
import graphviz
import sys
from pathlib import Path
from IPython.display import Image as IPImage, display

# Add brain/figures to path for helper import

figures_path = Path.cwd()
if figures_path.name != 'decentralized-institutes-of-health':
    while figures_path.name != 'decentralized-institutes-of-health' and figures_path.parent != figures_path:
        figures_path = figures_path.parent
sys.path.insert(0, str(figures_path / 'brain' / 'figures'))

from _graphviz_helper import setup_graphviz_style, render_graphviz_with_watermark

dot = graphviz.Digraph(comment='Three Ingredients System', format='png')
dot.attr(rankdir='TB', size='10,12')
setup_graphviz_style(dot)

with dot.subgraph(name='cluster_system') as system:
    system.attr(label='How to Trick Humanity Into Not Killing Itself', style='dashed')
    system.node('Military', '$2.7 TRILLION\nMurder Budget\n(current situation)')
    system.node('Treaty', 'Steal 1%\n($27B/year)\nNobody notices')
    system.node('DIH', 'DIH Treasury\nHolds the money\nDemocracy but working', penwidth='3')
    system.node('DFDA', 'dFDA\nAmazon for drugs\n82X cheaper trials')
    system.node('Cures', 'CURES\nCancer gone\nDeath optional')
    system.node('Feedback', 'Everyone profits\n270% returns\nRepeat until death optional')
    
    system.edge('Military', 'Treaty', label='1% Treaty')
    system.edge('Treaty', 'DIH', label='$27B/year')
    system.edge('DIH', 'DFDA', label='Fund trials')
    system.edge('DFDA', 'Cures', label='Actually works')
    system.edge('Cures', 'Feedback', label='Holy shit\ndo it again')
    system.edge('Feedback', 'Treaty', label='2%, 5%, 50%...', style='dashed')

png_path = render_graphviz_with_watermark(dot, 'three-ingredients-system-diagram')
display(IPImage(str(png_path)))
```
