```{python}
#| echo: false
import sys
import os

# Quarto executes from project root (execute-dir: project in _book.yml)

appendix_path = os.path.join(os.getcwd(), 'brain', 'book', 'appendix')
if appendix_path not in sys.path:
    sys.path.insert(0, appendix_path)

from economic_parameters import *
```

```{python}
#| echo: false
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path
import sys

# Find project root dynamically

project_root = Path.cwd()
if project_root.name != 'decentralized-institutes-of-health':
    while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
        project_root = project_root.parent

# Add paths

sys.path.insert(0, str(project_root / 'brain' / 'book' / 'appendix'))
sys.path.insert(0, str(project_root / 'brain' / 'figures'))

from economic_parameters import calculate_personal_lifetime_wealth_conservative_baseline
from _chart_style import (
    setup_chart_style, add_watermark, clean_spines, add_png_metadata,
    COLOR_BLACK, COLOR_WHITE, PATTERN_DIAGONAL, get_project_root
)

setup_chart_style()

# Define scenarios

scenarios = [
    ('Young\nProfessional\n(Age 25,\n$60K)', 25, 60000, 0.01),
    ('Mid-Career\n(Age 40,\n$75K)', 40, 75000, 0.01),
    ('Near\nRetirement\n(Age 60,\n$80K)', 60, 80000, 0.01),
    ('Low Income\n(Age 30,\n$30K)', 30, 30000, 0.01),
    ('High Income\n(Age 35,\n$150K)', 35, 150000, 0.01),
]

# Calculate benefits for each scenario using Evidence-Based Conservative model
# NOTE: This is the CONSERVATIVE baseline (antibiotic precedent, 5yr life extension)
# For realistic estimates, see Disease Eradication Model ($2.4M-$5.8M, 34-106yr)

scenario_names = []
benefits = []

for name, age, income, treaty_pct in scenarios:
    calc = calculate_personal_lifetime_wealth_conservative_baseline(
        treaty_pct=treaty_pct,
        current_age=age,
        annual_income=income,
        discount_rate=0.03,
        conservative=True  # Use conservative 5-year life extension
    )
    scenario_names.append(name)
    benefits.append(calc['total_lifetime_benefit'])

# Create figure

fig, ax = plt.subplots(figsize=(14, 10))

# Create bars

x_positions = np.arange(len(scenario_names))
bars = ax.bar(x_positions, benefits, width=0.7,
              color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=2)

# Add value labels on top of bars

for i, (x, benefit) in enumerate(zip(x_positions, benefits)):
    ax.text(x, benefit + 10000, f'${benefit/1000:.0f}K',
            ha='center', va='bottom', fontsize=32, weight='bold', color=COLOR_BLACK)

# Set labels and title

ax.set_xticks(x_positions)
ax.set_xticklabels(scenario_names, fontsize=32, weight='normal')
ax.set_ylabel('Total Lifetime Benefit (Conservative Baseline)', fontsize=22, weight='bold')
ax.set_title('Personal Lifetime Wealth Benefits from 1% Treaty\nBy Demographic Scenario (Conservative Estimate)',
             fontsize=32, weight='bold', pad=20)

# Format y-axis to show dollars

ax.yaxis.set_major_formatter(plt.FuncFormatter(lambda y, p: f'${y/1000:.0f}K'))

# Clean up spines

clean_spines(ax, positions=['top', 'right'])

# Add watermark

add_watermark(fig)

# Save figure

output_dir = get_project_root() / 'brain' / 'figures'
output_dir.mkdir(parents=True, exist_ok=True)
output_path = output_dir / 'conservative-baseline-lifetime-wealth-by-scenario-column-chart.png'

plt.savefig(output_path, dpi=200, bbox_inches=None, facecolor=COLOR_WHITE)

# Add metadata

add_png_metadata(
    output_path,
    title="Personal Lifetime Wealth by Scenario",
    description="Comparison of lifetime wealth benefits for different age groups, income levels, and treaty percentages"
)

plt.show()
```

**Key Insights (Conservative Baseline - Evidence-Based Model):**

This chart uses the **Evidence-Based Conservative model** (antibiotic precedent, 5yr life extension) showing **minimum expected benefits**:

1. **Young professionals benefit most** (~$650K) due to more years to compound benefits
2. **Even near-retirement individuals** gain substantially (~$350K over remaining lifetime)
3. **High earners gain more in absolute terms** (~$1.2M) but...
4. **Low earners gain more proportionally** (1,100% of annual income vs 800% for high earners)
5. **Everyone wins** - This isn't a zero-sum redistribution, it's wealth creation

**IMPORTANT:** These are **CONSERVATIVE estimates** using the antibiotic precedent (ONE technology, ONE disease category).

**Realistic estimates** using the Disease Eradication Model (115x cumulative research, ALL diseases tackled):

- **$2.4M - $5.8M** lifetime benefit
- **34 - 106 years** life extension
- See [Disease Eradication Model](../appendix/disease-eradication-personal-lifetime-wealth-calculations.qmd) for details