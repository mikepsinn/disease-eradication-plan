```{python}
#| echo: false
import sys
import os

# Quarto executes from project root (execute-dir: project in _book.yml)

appendix_path = os.path.join(os.getcwd(), 'brain', 'book', 'appendix')
if appendix_path not in sys.path:
    sys.path.insert(0, appendix_path)

from economic_parameters import *
```

```{python}
#| label: victory-bonds-returns
#| fig-cap: "VICTORY Bonds: 270% Perpetual Returns"

import sys
import os
from pathlib import Path

# Add project root to path (find it relative to current working directory)

project_root = Path.cwd()
if project_root.name != 'decentralized-institutes-of-health':
    while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
        project_root = project_root.parent
sys.path.insert(0, str(project_root))

import matplotlib.pyplot as plt
from brain.figures._chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    add_png_metadata, COLOR_BLACK, COLOR_WHITE
)

# Setup styling

setup_chart_style(style='light', dpi=150)

# Data
# Sources: S&P 500 (historical avg), Real Estate (avg appreciation),
# Venture Capital (industry avg), Medallion Fund (brain/book/references.qmd),
# Cocaine (UN estimates), VICTORY Bonds (brain/book/economics/victory-bonds.qmd)

investments = ['S&P 500', 'Real Estate', 'Venture\nCapital', 'Medallion\nFund', 'Cocaine\nTrafficking', 'VICTORY\nBonds']
returns = [10, 15, 25, 39, 90, 270]

# Create chart

fig, ax = plt.subplots(figsize=(14, 10))

# White bars with black outline for comparison items, solid black for VICTORY Bonds (emphasis)

bars = []
for i, ret in enumerate(returns):
    if i == len(returns) - 1:  # Last item (VICTORY Bonds) - solid black for emphasis
        bar = ax.barh(i, ret, color=COLOR_BLACK, edgecolor=COLOR_BLACK, height=0.6, linewidth=2)
    else:  # Other investments - white with black outline
        bar = ax.barh(i, ret, color=COLOR_WHITE, edgecolor=COLOR_BLACK, height=0.6, linewidth=2)
    bars.append(bar)

# Add value labels

for i, (bar, ret) in enumerate(zip(bars, returns)):
    width = bar[0].get_width()
    # White text on black bar (VICTORY Bonds), black text on white bars (others)
    if i == len(returns) - 1:  # VICTORY Bonds - white text on black bar
        ax.text(width/2, bar[0].get_y() + bar[0].get_height()/2.,
                f'{ret}%', ha='center', va='center', fontsize=44, weight='bold',
                color=COLOR_WHITE)
    else:  # Other investments - black text outside white bars
        ax.text(width, bar[0].get_y() + bar[0].get_height()/2.,
                f'  {ret}%', ha='left', va='center', fontsize=44, weight='bold',
                color=COLOR_BLACK)

# Add title (36pt for presentation/large format - must be larger than axis labels but smaller than data values)
# Use figure.suptitle instead of ax.set_title to center over entire figure including y-axis labels

fig.suptitle('Annual Returns from Various Investments', fontsize=36, weight='bold', color=COLOR_BLACK, y=0.98)

# Set y-axis labels

ax.set_yticks(range(len(investments)))
ax.set_yticklabels(investments)

# Remove x-axis (labels are on the bars per design guide)

ax.set_xlim(0, 300)
ax.tick_params(axis='y', labelsize=36, colors=COLOR_BLACK)
ax.tick_params(axis='x', length=0, labelsize=0)  # Hide x-axis ticks and labels
ax.set_xlabel('')  # Remove x-axis label

clean_spines(ax)
# Remove gridlines for cleaner look
# ax.grid(axis='x', alpha=0.3, linestyle='--', color=COLOR_BLACK)

# Add branding

add_watermark(fig)

#plt.tight_layout()  # Disabled - using rcParams margins instead

# Save in brain/figures directory

output_dir = project_root / 'brain' / 'figures'
output_dir.mkdir(parents=True, exist_ok=True)
output_path = output_dir / 'victory-bonds-roi-projection-bar-chart.png'

# Save the figure

plt.savefig(output_path, dpi=200, bbox_inches=None, facecolor=COLOR_WHITE)

# Add metadata for attribution (post-processing step)

add_png_metadata(
    output_path,
    title="Annual Returns from Various Investments",
    description="Comparison of ROI: S&P 500, real estate, venture capital, hedge funds, and VICTORY Bonds"
)

plt.show()
```
