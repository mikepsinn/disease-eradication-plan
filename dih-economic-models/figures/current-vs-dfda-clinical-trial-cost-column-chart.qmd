```{python}
#| echo: false
from economic_parameters import *
```

```{python}
#| label: current-vs-dfda-clinical-trial-cost-column-chart
#| echo: false
import matplotlib.pyplot as plt
from pathlib import Path

from figures._chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_WHITE,
    add_png_metadata, get_figure_output_path)

setup_chart_style()
fig, ax = plt.subplots(figsize=(8, 6))

# --- Data ---
# Source: Chapter table "The Itemized Receipt of Stupidity We're Eliminating"

categories = ['Current System\n(Average Trial)', 'Proposed dFDA\n(Decentralized Trial)']
values = [57, 2]  # In millions of USD

# --- Create Bar Chart ---
# Use solid black for the high-cost problem, white for the clean solution

colors = [COLOR_BLACK, COLOR_WHITE]
edgecolor = COLOR_BLACK
bars = ax.bar(categories, values, color=colors, edgecolor=edgecolor, linewidth=2, width=0.6)

# --- Add Title ---

ax.set_title(
    "The $55 Million Difference: Clinical Trial Costs",
    fontsize=28, weight='bold', color=COLOR_BLACK, pad=30, loc='center'
)

# --- Remove Y-Axis and its Spines (Tufte principle) ---

ax.get_yaxis().set_visible(False)
clean_spines(ax, positions=['top', 'right', 'left'])

# --- Customize X-Axis ---

ax.tick_params(axis='x', which='major', length=0)  # No ticks
ax.set_xticklabels(categories, fontsize=18, color=COLOR_BLACK, linespacing=1.5)

# --- Add Direct Data Labels ---
# For the large black bar, place a contrasting white label inside

bar_current = bars[0]
y_current = bar_current.get_height()
ax.annotate(
    f'${y_current}M',
    xy=(bar_current.get_x() + bar_current.get_width() / 2, y_current / 2),
    xytext=(0, 0),
    textcoords="offset points",
    ha='center', va='center',
    fontsize=44, weight='bold',
    color=COLOR_WHITE,
    fontname='Courier New'
)

# For the small white bar, place a black label above it

bar_dfda = bars[1]
y_dfda = bar_dfda.get_height()
ax.annotate(
    f'${y_dfda}M',
    xy=(bar_dfda.get_x() + bar_dfda.get_width() / 2, y_dfda),
    xytext=(0, 10),
    textcoords="offset points",
    ha='center', va='bottom',
    fontsize=44, weight='bold',
    color=COLOR_BLACK,
    fontname='Courier New'
)

# --- Adjust plot limits for visual balance ---

ax.set_ylim(0, max(values) * 1.25)

# --- Add Watermark ---

add_watermark(fig)

# --- Save and Show Plot ---

output_path = get_figure_output_path('current-vs-dfda-clinical-trial-cost-column-chart.png')
plt.savefig(output_path, dpi=200, facecolor=COLOR_WHITE)
plt.show()
```
