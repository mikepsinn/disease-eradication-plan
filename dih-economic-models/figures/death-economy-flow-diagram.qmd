```{python}
#| echo: false
from economic_parameters import *
```

```{python}
#| echo: false
import graphviz
from pathlib import Path
from IPython.display import Image as IPImage, display

from figures._graphviz_helper import setup_graphviz_style, render_graphviz_with_watermark

dot = graphviz.Digraph(comment='Death Economy Flow', format='png')
dot.attr(rankdir='TD', size='10,10')
setup_graphviz_style(dot)

with dot.subgraph(name='cluster_death') as death:
    death.attr(label='The $119T Death Toilet', style='dashed')
    death.node('War', 'War: $9.7T/year\n(Direct + hidden +\nlost Pentagon money)')
    death.node('Disease', 'Disease: $109.1T/year\n(Healthcare + lost\nproductivity + suffering)')
    death.node('DeathToilet', 'The Death Toilet\n$118.8T/year\n(More than\nEarth\'s GDP)')
    death.edge('War', 'DeathToilet')
    death.edge('Disease', 'DeathToilet')

with dot.subgraph(name='cluster_solutions') as solutions:
    solutions.attr(label='What Humans spend on Solutions', style='dashed')
    solutions.node('Research', 'Medical Research\n$68B/year\n(0.06% of\ndeath costs)')

dot.edge('DeathToilet', 'Research', label='1,750x more', style='dashed')

png_path = render_graphviz_with_watermark(dot, 'death-economy-flow-diagram')
display(IPImage(str(png_path)))
```
