```{python}
#| echo: false
#| fig-cap: "Probability of Exceeding Threshold: Treaty ROI - Historical Rate (Conservative Floor)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Monte Carlo samples

samples = [259313.99912087078, 277604.38478859514, 247384.8353662129, 241734.2824924208, 290904.36856016354, 276734.9297475119, 263422.8148610516, 271770.02187342674, 266470.8852776366, 277178.7541432284, 243583.61352794254, 246590.40929040953, 264761.41008575866, 235925.7511793939, 255198.22262242177, 277206.17722245137, 257731.2517133154, 277521.51978295215, 243612.04040355273, 267126.47139616817, 269623.159267733, 276083.3262322889, 232874.6877715948, 269086.89989357285, 273364.219805565, 272305.00243899465, 253478.69226319806, 257814.1609760933, 256616.61616157336, 256151.88281660393, 188129.68635446148, 273070.4237112317, 274406.2237947387, 276986.2005653148, 251194.9223952781, 235870.8151099503, 268346.5112744082, 277119.39649570774, 277042.1449006691, 250230.15977883237, 247592.88285335797, 253186.63887521622, 275954.09437602735, 261047.59964233558, 263668.25916275213, 261362.280865274, 243822.44289685242, 261247.936388308, 249432.40284076642, 264728.52340486454, 259692.13500470162, 250769.63443523663, 275347.79691976553, 271822.10616119695, 273902.9573141383, 275719.2545930929, 271129.80087229, 223889.8844082179, 277233.92120146187, 240887.19768331153, 273398.8923054098, 272050.7344751206, 262643.7977631132, 252015.10094678073, 248513.1979133796, 246135.58590011808, 272255.17468109, 273802.7420944585, 244224.4814868246, 269735.1321791568, 276905.13654613856, 277498.884671377, 277424.3318679166, 254416.8748707052, 263099.34855308145, 249104.3114111143, 273350.0109502131, 262738.67333537806, 250928.18615826877, 271664.6428272335, 255478.75617702087, 275923.34871842427, 272463.24995948025, 272729.04746546934, 277303.81992771605, 254686.4016292069, 273890.89850708307, 265877.5992772895, 254850.56170937736, 255745.317448251, 249814.4100822721, 268057.6260363256, 273297.5690164841, 267702.0216763123, 273686.2927868473, 275458.391989351, 276589.896417691, 277580.5676585714, 256947.30007540237, 277381.1290356652, 272678.67119427066, 230382.28178563857, 272365.10707330424, 247758.44721968306, 277463.46607850597, 269978.4196543787, 277502.8812811817, 272112.36344089743, 244750.29613705835, 276266.67170304724, 256058.88947129197, 260916.729962341, 275292.1236394836, 275469.835792965, 264631.67993849836, 274603.7520277368, 261035.5278271669, 265685.45030830737, 220277.39136099626, 270548.84198342223, 277600.4846772377, 262269.4905412878, 261331.82905653495, 228412.27342425796, 244904.48533471403, 258028.52236599647, 224951.05786324642, 277330.9963287531, 275727.1911411709, 277444.6007450432, 272841.9299333913, 276152.5723416323, 250661.97162185787, 270263.0910844539, 275192.7853822346, 277596.2442481616, 259099.44428052037, 244815.04877722467, 196875.27245636808, 145347.25171709535, 256573.68787568435, 277571.5432385425, 302971.930207136, 260206.30323911703, 276981.74862023006, 273191.3841350306, 275468.39272439777, 268839.1639039508, 237857.69092751548, 262772.19374861626, 269160.3443212914, 277604.00705064356, 272872.2635659463, 274098.44193378, 267201.73376757023, 211371.47099355128, 263369.0311393789, 240442.97877929296, 274254.1874517296, 277345.1183459564, 277533.51412888325, 276426.6944993793, 188911.27018814886, 277026.2417521568, 244804.28779769395, 277372.74797871104, 242007.90809920972, 257323.24842315548, 269124.6529125867, 266946.7518874201, 275861.313473868, 255757.23368091887, 273709.61178048176, 277175.0605056697, 276891.41576095554, 262421.4280123803, 221048.08625117183, 262706.0058686814, 268433.4175477068, 259771.59627990137, 230160.64117211304, 261346.12972487937, 273131.64315195964, 236589.1992540455, 256205.10990283437, 222514.94569424304, 262179.2753880534, 277180.4084536475, 276227.06385137385, 218601.70124621573, 214275.49975002708, 269529.77415988274, 272749.4040049544, 225013.26629019057, 277550.7279246755, 277344.7933962249, 250433.6248676576, 272908.4310491626, 266235.8614946611, 269246.0170953048, 258507.88304972847, 226812.88193182324, 264235.94972595543, 250416.50664628358, 297490.9920086457, 267102.8608503866, 277133.8953703591, 277206.5078268086, 277283.5444131015, 272039.38629899564, 242483.33369804578, 276562.56246172905, 265504.036210285, 274072.48880294524, 271942.8624731884, 239825.60649972412, 253322.4820264365, 229130.2501479733, 269086.47327797627, 276204.3564804779, 270290.5900132697, 260804.63980178683, 262330.9537657843, 277581.4465231679, 264238.00156287075, 261139.70006867294, 166956.6461508615, 204364.26486744842, 277179.64306964003, 271323.5256025489, 275277.0859520603, 275257.56533843576, 259048.30409140023, 233412.77751324617, 276454.621042855, 275855.68887891417, 303996.1818874241, 269232.19756633823, 277598.9272453739, 274603.15080583637, 277278.50590212404, 267978.08233086334, 278236.548318187, 275236.0362563277, 188865.0881236422, 276832.0955195496, 277566.2426063288, 206910.59564328406, 145880.89739773958, 277391.57652408176, 272537.78471839445, 258409.34487000105, 213943.72192910797, 277568.0684536112, 270646.47489402274, 246603.6636194033, 256050.04300805012, 272650.2989703931, 268712.37301837053, 276168.3824467441, 270529.2872648282, 270989.6802080181, 261047.39882242662, 274888.7193395307, 255092.60025914016, 239517.45386294855, 262808.56082858564, 258156.00364447894, 265033.57093803387, 266130.4508870008, 276399.84580833203, 259026.541027654, 268035.0716553544, 191018.42718832078, 221242.6563395608, 257300.6053760158, 276686.69877032225, 277541.55253353115, 233885.80018109732, 260324.67991279784, 254866.44619006704, 277384.36700422945, 242133.52394946304, 255540.1341741169, 277545.02469203726, 273917.2528386904, 260301.6121859239, 265048.0597299874, 271398.59686418006, 268151.5022199788, 270756.21226385416, 262872.862310246, 224676.79053629315, 354195.32823203434, 270507.36204943573, 262332.3386768487, 259525.83675850343, 272590.0844772887, 278171.23509530904, 258744.2190857942, 214032.52261194875, 274405.7900464351, 244049.76656265743, 271955.65578122274, 267348.26383062, 277602.76417813974, 272044.34547477297, 230355.58342757216, 252112.8361580857, 213705.69850311612, 234326.19173284734, 255938.31236215006, 212941.66855749648, 255940.7329630475, 245115.46803464397, 271467.2353249451, 264750.47295011894, 276216.03993774566, 240232.2119417372, 277368.76270649355, 246457.3370116749, 269723.8079957054, 234523.55326772854, 247372.7442150476, 207955.44817472677, 247952.55920620833, 273871.79592075996, 267457.06588434585, 277390.120738041, 274476.01084115304, 223342.0060618814, 250595.48502241567, 276227.87610311655, 277595.02505967626, 265459.42811746587, 277216.66755235824, 276001.85942506575, 259136.20211445194, 235032.65703389628, 251394.6588768575, 318573.625364788, 259322.52498191275, 264633.72462676425, 256586.98193234156, 219786.23777131143, 298363.2765611117, 275261.5564271466, 251886.57297708557, 273731.29439941037, 224527.3966028214, 257741.14138296424, 244563.8048928913, 275054.59787345544, 245535.55372059534, 237779.59527853027, 261030.7954053515, 260995.06742282267, 260143.39747820102, 277223.4884840448, 268961.0357421608, 269050.89776654803, 257362.5947342131, 239916.25521094393, 277600.762457509, 268550.8941773956, 224342.71337154927, 276556.75608973217, 277030.700118296, 261741.80489873476, 244629.17964549948, 265899.44935134467, 229407.6450770096, 244259.73403083743, 244705.39704026052, 252890.21305954334, 177384.07943382964, 269973.7022061251, 294384.4963600809, 220193.1898715162, 273744.058278444, 263860.8172041751, 230044.41877711553, 273417.91286225966, 277043.10634524794, 273433.09304392786, 276876.97419615806, 255924.07655213762, 253696.60617458264, 260001.321212121, 275814.6296228293, 320893.0710816864, 265008.34104868764, 273920.366631645, 255410.64504406354, 248777.9520395009, 263192.43823607126, 247104.24812105834, 261116.6980889176, 253538.98461063206, 276272.5520966801, 269531.3895226108, 261869.13972488538, 245335.97885173533, 272896.4807150306, 253777.4817137368, 270980.85481853556, 268413.140142303, 245070.15912660182, 293689.52811142744, 276773.21362647094, 275059.4144951173, 323814.71341292554, 276061.34586974187, 247414.27012354834, 271284.1810444104, 261845.82146000455, 237127.70056226305, 229449.51385467694, 267499.16657408164, 228597.07316350096, 264202.67696341185, 277106.20434513496, 275294.6276787201, 275078.9751324746, 277321.1882757083, 272390.52019431914, 245835.13405323512, 214466.63138083255, 276103.47963978996, 257123.79450349242, 277604.39991142845, 255009.67865351026, 268662.3723390638, 283003.20798761246, 242107.4510785554, 275399.47514691437, 274653.2941368917, 277594.43079958734, 275856.8898186245, 256227.42238895776, 269699.3994009899, 258727.80977874662, 257902.33422407086, 229680.13759407547, 272167.8622456715, 275122.328557627, 237818.75718352688, 272000.0402353041, 236326.59521596855, 257363.01786811932, 268663.3031378063, 258230.15148155292, 199703.7594832236, 191991.24232666256, 264690.2060889163, 262701.52675897884, 237535.8118447315, 277145.20982486376, 258619.14576894807, 266651.84995234775, 259089.80392982892, 277086.624075759, 273611.92437818943, 299014.4616380061, 277532.39667195326, 273756.4012231836, 271414.5453368934, 200562.99129914312, 236598.53132770336, 277527.80856031715, 258256.6815475816, 273079.445328406, 271275.97798936744, 262131.5373038611, 251106.44081821185, 272115.70370339684, 237924.38697929218, 277477.93699848116, 266003.2901839219, 162709.89267632447, 261259.97038748336, 225956.3102284563, 264215.769418098, 252164.24521487742, 267260.1363589565, 269369.4595563758, 276789.90186036995, 256165.28433399423, 277172.0086762326, 249808.7713637976, 237251.42153136688, 257786.91199966203, 271305.67728815123, 255551.9800545123, 271654.3068938293, 241887.0461989839, 283035.9181920637, 272061.48833535245, 293540.2554750616, 274903.9317306407, 228257.94076871476, 243109.0341012165, 276384.5093514053, 274811.83190229896, 412530.1356228545, 274759.83490785357, 172221.5934012213, 256046.98917147337, 274934.2886540092, 255261.81638699927, 274031.3080048012, 271478.9398104376, 264043.58736004535, 267823.5644426555, 246210.0250894732, 258332.74056170337, 249731.5106531573, 276143.92021086265, 243029.77296515144, 219352.47056049624, 277542.52049514325, 277319.58384160436, 229183.33238355245, 269735.8194801713, 226934.48702791403, 273549.96787311323, 225227.32275595126, 263342.2368649276, 260432.25102288966, 221535.3818140748, 272444.762897055, 277482.28600322106, 273627.64595170657, 255594.46336726032, 273962.66172523034, 250597.2409791767, 274707.60528229765, 235271.72488743666, 331469.233218296, 276832.5817705419, 273630.5169046688, 277051.0344347706, 260682.6241652207, 269524.64708054485, 270779.05168508936, 269170.16390763334, 261716.84375326222, 277591.18752903544, 248638.26117296147, 249890.98670702183, 257321.04992867666, 252824.69368700075, 259515.56104349927, 194528.94947974486, 267842.4281285639, 271629.876457793, 276624.12271835376, 277603.38919408974, 277081.2747074468, 277323.6090575614, 267528.84605887806, 258588.9153941525, 265075.9166949995, 276702.6468989682, 242958.33914426004, 247703.74578974067, 269178.43372257904, 275844.8738361782, 253044.188122704, 262071.00863067425, 275447.3500345403, 267476.8669636659, 260341.67369692583, 277361.9148240726, 262028.21222884775, 275373.751747075, 229170.11825920697, 232052.4036557531, 270765.0237551802, 257863.98843437844, 333474.24744789995, 277438.77185889933, 271423.71699484467, 277592.6836216667, 248422.51639458322, 196840.48796458796, 277374.592997508, 277106.51806929184, 260970.47570492062, 219959.67910502374, 277190.17349889275, 260650.2243402337, 207913.44171601374, 272614.0356818281, 276872.10056261317, 273301.66796794196, 274502.5105813053, 245569.80904337467, 260824.36716652883, 279355.83350453264, 253931.35841124726, 275123.19770053757, 231191.137650633, 275615.28381085274, 275698.62851749425, 253241.199348134, 247023.1433985028, 255704.58564947263, 273574.45347334933, 253324.66352993023, 277603.79569044657, 260974.52074829754, 275704.5469828151, 255750.744684001, 276947.29018682934, 276862.3454079968, 248439.0106326828, 260824.72526174688, 275486.48029067524, 225356.59162879427, 273525.56235483737, 265473.42415021046, 260177.58351220595, 275540.77793009963, 255103.1522725462, 274648.27699502045, 273141.2568281669, 228298.2153672201, 277604.4007366687, 333841.4377379347, 219965.777882653, 165258.77386590108, 273054.81937668304, 289965.87175202806, 271682.0811056401, 271305.2714393283, 269711.193748248, 277539.80401946855, 252197.5099206699, 253688.04524841334, 274911.9616050429, 248856.51536896706, 193459.07405973863, 262435.65595926205, 272087.025146741, 268861.1453930041, 251214.94254195492, 276483.44791416504, 262606.8585835263, 272851.0261857603, 206212.19234344998, 269435.8680915813, 217981.70106049167, 277556.0162041184, 251986.66897639353, 258955.3557621202, 277247.2092891742, 262312.2503081481, 233198.04906707225, 271884.42856465536, 273984.37381576153, 266486.14273008675, 277371.07453796343, 272161.2916715615, 267737.68889323296, 274866.9564154804, 273207.75740800274, 254815.78625682587, 274526.872057647, 353934.9401718627, 246384.46491322297, 260094.9007401902, 276342.675428018, 276632.56343824434, 244883.82872521566, 258215.86173052993, 174310.44149437617, 256425.49506199043, 257253.6362683675, 269307.8835089158, 245446.73482593283, 250942.2290085678, 231929.93187110667, 274510.92018691415, 273457.2450898994, 274010.6557491518, 246210.15395071972, 223774.4871842149, 273758.4890626034, 273317.1696131432, 259085.67179906162, 270654.4223580855, 241383.7959387233, 313754.97680210555, 277053.44080912817, 276807.7138238226, 322163.89550973155, 277530.7536898116, 277411.53386870475, 269904.1813287849, 236378.06879128524, 270642.9046443479, 277603.0390498023, 267263.46724303626, 238383.45758673028, 277552.163215515, 277397.41186978173, 252770.01123334948, 270251.5382070435, 250317.25474832143, 266407.6072489061, 248786.21878744714, 277603.92208886263, 266376.2157504551, 270067.9995725672, 277219.65958605165, 273995.36652250506, 249238.7468243104, 272287.75859596714, 277599.93251016113, 268014.21372025844, 235901.07470867675, 317279.8704299615, 274884.5425665613, 277434.25148500106, 225022.1490459347, 259849.62313001137, 246895.52473934426, 277482.3973809526, 277528.2397659063, 255712.0069926073, 264925.6448198837, 253035.78139275583, 269672.0613001843, 259956.4464568009, 262748.13153171295, 246591.12538803753, 245734.47572382216, 273140.5300505977, 313209.6134179541, 239856.89769981208, 233995.5227930642, 277599.1224713801, 284897.5240588052, 264053.18847507, 242030.24178442315, 209443.5340363851, 253907.66741289204, 272587.26729602145, 277339.1700959188, 265898.9332702907, 271509.0941489556, 277595.91790794145, 193697.3461924555, 210249.3440435644, 235646.0534000217, 277428.4036596956, 244312.64599758785, 250537.05296699976, 255848.71641042046, 231996.76497872692, 250655.82998049105, 247686.39360245378, 250612.9995057687, 258428.27346951145, 279918.34085577825, 264385.82749085495, 274898.03089817223, 276879.7078614765, 217051.2730091731, 213924.10672018962, 228411.1834779483, 260503.8669999868, 228694.6876156763, 265886.6218437296, 261730.478215015, 277570.6860218981, 257018.07057805685, 264881.01728849515, 276731.7195008865, 267151.30362661055, 267702.23842795705, 209445.69366986753, 243138.29893818128, 265899.0529569615, 260656.10942715371, 265221.2304982965, 269935.21917191765, 277583.4973810535, 269024.4752951579, 276573.9703321205, 277050.29432698817, 254043.10002199915, 257163.42503196298, 280119.8439565402, 268508.10578628216, 240043.55142717538, 238069.28129193606, 239110.3748772488, 265331.89249669906, 277142.35655269213, 277582.17839387077, 258333.7409994481, 257466.4136157247, 230771.00742778118, 236788.43098306222, 268683.25457391585, 277082.66264060396, 271813.5431471621, 261396.1829859883, 269920.9750625499, 275126.86789407086, 260559.0939385929, 274309.3061699243, 275619.7436866666, 259149.79608419133, 273010.06069230696, 260766.7286989019, 260074.92112059728, 277484.2106343748, 274036.80872931605, 225804.13201930365, 277421.7018652568, 301938.8568642858, 285029.3260999938, 265535.5563279163, 265498.11222025735, 268414.41132795764, 233144.1763622638, 368932.3927330693, 257044.93837136385, 221646.4710598639, 277511.2192416284, 272701.8630958352, 276619.878424212, 277343.4567777525, 271921.6492546266, 226147.27643314152, 206880.2706505178, 272066.42579417524, 202580.73660975965, 265401.3676836425, 212302.06959488362, 267959.88749858283, 263351.70642818155, 257813.39912572314, 127261.1409005686, 244423.88699535158, 276292.4816969329, 240865.1309779299, 272445.65755030024, 274140.0351013602, 242704.212646103, 265494.6228132836, 259946.06654473976, 265847.0671535423, 258532.39382045955, 256302.7120500447, 289974.3865763021, 249780.94437157712, 277561.3605904118, 275510.36076149583, 267291.7668022588, 264378.0975167678, 276185.03751613793, 245025.3657136799, 276441.4961095811, 273077.616578087, 275198.47500140656, 267061.1371814424, 259939.13945172745, 277590.665658847, 248139.12610601026, 264825.6331225219, 287006.51410054637, 291404.3704051862, 266380.93321621587, 270241.96131342, 268150.2259208387, 266694.0037572248, 261202.0776332298, 241518.26215535434, 277543.8540262337, 277390.23856017244, 277570.8773581475, 259697.03041935462, 232149.76064763154, 273403.9054819321, 345461.0770503897, 274759.90422272636, 277084.9940598336, 274914.54416039883, 273097.246571076, 265338.81404819177, 271701.40817331313, 238378.274069283, 276042.6970443053, 277219.13585879985, 254899.81802334462, 274381.85580143257, 257203.28485359007, 263976.800935386, 268959.4813025577, 220736.2996540824, 275564.82139069797, 192998.11227806922, 270316.9800023469, 276897.0464180701, 264678.7482937699, 277589.3321161928, 276612.2711015743, 257017.00327059842, 252850.49039568435, 275564.44640432554, 240299.34146866636, 234962.59684867453, 225853.34618354606, 253556.4704216237, 228272.2576686655, 286273.592725374, 271795.3247119444, 277238.79980195273, 263612.51649065776, 275059.88705827785, 269294.2296710866, 204026.33945440926, 269357.303946358, 256589.49031034662, 270431.2467510404, 264555.2053850478, 266009.85830106307, 255698.74708513473, 234713.49122213662, 218722.4568188965, 259194.5285652026, 251923.8979521171, 277454.30620675586, 267857.2759264967, 241742.6675232851, 243985.79077164913, 261526.69556579343, 243373.542478093, 254586.1550201689, 233591.2995462023, 259686.34484941445, 272356.89378682, 258550.72736659882, 407213.36355947616, 257375.42860088727, 464252.84119163593, 276017.27328208374, 255609.17683009084, 254935.23298820746, 277420.63421301777, 276329.305471259, 228037.26166408093, 274070.79517513775, 182213.23703597783, 266171.0775595674, 256736.68198818722, 219763.5967319926, 263352.385807991, 277585.7453517275, 268268.03512420855, 266845.15907874086, 276256.3459995692, 270819.0088440679, 276547.12220672437, 242227.0399159667, 265421.422378283, 271251.2239915928, 268201.88753092015, 261258.9842008785, 251171.78981119095, 277583.15060095733, 277604.40747926326, 236640.04891887156, 273150.6919127965, 275774.12181809853, 255815.8626930846, 255306.55593642208, 274447.8468271281, 261110.37030031174, 247814.1361248638, 257589.65840438043, 250750.3222233331, 275897.54299812246, 258669.21812938657, 271561.0536271325, 274055.7033260834, 243848.5807187183, 224415.87852214655, 209652.38867281124, 229872.13609796696, 268268.1604964242, 258132.0056255439, 246909.9019645039, 263569.61744878086, 263358.2019281056, 245240.71289028536, 267308.68032519217, 276456.0824350462, 273179.4891693053, 250696.56458309948, 266071.3823647252, 258442.6715138345, 249682.0519911344, 272631.6707067205, 247216.93291711892, 257477.44147668572, 277130.47589777847, 225653.01721646055, 274271.36487206223, 272557.1315225902, 277604.2407433023, 277599.33517937595, 265054.2332365272, 271109.20851749677, 272079.69862201455, 251091.71488466588, 258450.95583733538, 259037.46686248734, 256690.8909399059, 251190.620883903, 301355.39328494266, 272483.1594196777, 306212.2660886645, 265391.3114581956, 266225.9797630363, 238497.12342838474, 233998.43360268197, 261730.99097706567, 274266.82101401675, 254734.20560384548, 274585.9558272934, 266160.3967094652, 240338.41918508025, 274914.9996857842, 245773.58436295632, 249475.18696205414, 277513.1464315857, 240714.86966726964, 248874.46986310754, 263990.4326788346, 276681.95085781504, 277205.8039037873, 274695.28393566643, 253201.7435919064, 277514.8844720641, 255979.05083455937, 277095.36336167465, 269954.9974805756, 263822.25402596965, 170867.75969201486, 276146.99183452403, 224659.27834975717, 262933.77197870373, 256656.54319424665, 263631.7933899067, 255792.15023937053, 269071.76066337695, 225260.60601226764, 273728.4970345459, 235767.2362566422, 275768.8583738703, 267327.4785830087, 277592.8134355991, 255524.41338361579, 225558.817060312, 267656.882685064, 269831.5996375394, 277537.56924879865, 270381.5996429009, 273563.0651664232, 277404.5725583998, 261173.42552941473, 229734.22293084688, 151820.09662925635, 275215.87860329007, 225886.75550982138, 260775.03033815685, 269027.9945643026, 256106.12347244704, 264848.6305521578, 263805.9202521199, 273096.4937420468, 275956.36284543463, 274273.3888402227, 250155.77111163267, 271154.5972550862, 275311.4807037241, 265959.11002743844, 246089.12710185387, 262244.71002886066, 275872.40367283346, 232753.50209102966, 221044.8885254796, 254485.8694340151, 240721.95093079074, 232246.57499365028, 235835.03901964126, 251247.00141927763, 251681.95754543148, 253817.78749927916, 277565.4754817687, 248813.02525493444, 276331.29536500643, 276879.6490269968, 230240.40115232504, 244752.9081178089, 224143.2581889583, 271074.4535249089, 277450.4575051064, 270566.716477959, 263988.14239997213, 264485.15413110936, 235721.3070927685, 272437.55161622463, 258149.0808250443, 277570.38200276904, 255646.9321866576, 266069.0393575709, 276599.1988674335, 270490.4294227975, 269611.1848304398, 271050.14157052705, 211149.02099220204, 268056.8836202175, 270623.7483974171, 300651.6688895226, 277342.9693447095, 270936.29819385556, 276123.5375781971, 227667.82294396195, 269272.5781017874, 230734.6682752664, 264853.11528111296, 265367.00403146533, 267874.71354655555, 266055.0556062716, 214597.0526506534, 322071.3526080581, 294253.1488205478, 274756.25935539627, 265835.9475488276, 249115.1312510343, 255051.9563543319, 272764.2474355767, 239321.27958194583, 238974.89002287437, 262160.48579145636, 241059.45201358263, 260088.3036262277, 274954.68349291093, 248895.81242377998, 263801.17142623843, 266104.97259338835, 224627.8092534576, 338772.1780433731, 275765.69437608094, 277337.3020210726, 272466.2261922616, 270799.0975067545, 274751.28686907655, 277565.7767401634, 277212.83880240656, 170197.69102746504, 209175.15093618556, 273142.7579570937, 272470.86806427134, 277458.85752588196, 288071.9549112216, 268400.8853209872, 277581.21529185673, 267799.80721012456, 273449.6389121655, 276679.68845481, 262960.9541121413, 257794.97801616514, 256495.20315042784, 276606.0778773019, 244322.58941075506, 276911.6829186244, 250725.9007757361, 266347.1266687736, 276155.2159169639, 271769.33862108394, 257816.1733231826, 251278.38880710347, 268842.7376211542, 222649.2114225569, 239678.61127423044, 270832.3682769092, 247394.36683816905, 200777.7996792435, 199114.98289617768, 277163.68460608216, 277444.482435462, 224226.49499624455, 277600.8700416706, 276591.0609476185, 274097.063283839, 256424.5165681887, 268131.0523681726, 275824.1064934022, 276027.642217315, 276331.08181131264, 277288.7978207787, 179993.33737910053, 259489.06094559748, 243362.5692135545, 274131.9244387445, 269642.22800745815, 276340.26066067297, 365953.7390298608, 276140.8300390858, 281678.10452390084, 313513.734441504, 277305.7074622341, 229539.18796457257, 267018.9534054295, 230665.45742267158, 256661.38523010243, 246451.24661128307, 277365.97227197123, 253702.9522227109, 248011.81278553966, 275113.97451435967, 252743.0984942163, 252562.39409213257, 274826.160100301, 277521.77322805737, 277348.0840140219, 264323.8285966034, 258768.47470978714, 276867.63668635534, 265587.78239090584, 252443.9225207964, 251133.63041067924, 221969.979894311, 231108.58826766274, 277584.7277458997, 216933.30258264756, 274620.47270216607, 238517.69926884034, 264719.86151134595, 273148.16037604265, 281487.48588285764, 269389.8894254222, 274053.6795892049, 240917.2201232923, 223154.58953185575, 276892.9274354124, 259380.79218653726, 276427.8987992761, 275623.6414678783, 246686.55454950474, 266902.93822345976, 213223.17671624257, 274048.90619651583, 239931.32612208964, 264088.33378467534, 246064.32833611724, 273609.5830654951, 267119.29629085417, 268375.29202914156, 277099.7280830639, 249907.4366620563, 250239.79769811517, 251813.80657054496, 222474.0957898605, 225417.88335454135, 272633.1345793601, 257623.21084426268, 275577.94599770836, 265654.4678161492, 275347.81860956707, 219654.7191371813, 257857.88525463926, 270192.4054469925, 233806.28376016472, 305565.85548835865, 295087.97283382795, 246062.54989659312, 264879.2720023412, 260616.85521671368, 276562.5372309871, 266599.4703524859, 196458.75850176698, 245227.51560604456, 262486.70878098125, 273504.7954283531, 272907.98491461354, 302780.6597896041, 260446.23446878462, 244596.541110393, 273819.48650496587, 275918.959845146, 277435.5121110868, 277533.94709061756, 265026.7028687548, 299778.1298174223, 251242.25923960464, 247286.28136167396, 270741.9262166805, 342683.3211631711, 277579.66696095956, 232539.8260915133, 384110.8795603314, 272237.55867961654, 277362.82897781825, 245806.17257552373, 276035.170379507, 256840.8425323007, 252582.18788501332, 206954.67761393505, 269935.69836640736, 257547.9345371463, 275025.1769085358, 233909.22127410982, 276670.158611079, 274946.9122928015, 266579.8018266306, 274003.8513605774, 261127.02651879797, 240912.09880131585, 259599.93387049026, 273622.02862992004, 268528.81952418055, 247628.25723737438, 286088.99482915626, 277590.58636292344, 243669.21339511906, 260149.32425368708, 256636.08889083602, 205467.41681275194, 255170.8863574915, 250025.37728437944, 156878.85059650295, 270120.9030587584, 276898.4743874929, 256229.84489890884, 255940.78807628521, 274572.33955197234, 277603.4190483081, 178389.98811393083, 258772.5685769118, 276477.55462043296, 242482.49312197865, 268257.1847651499, 270770.9628885863, 252668.87114238532, 276803.35792288434, 258134.3208303462, 202084.03586183843, 255233.0933669481, 272651.09227117506, 274346.28188572807, 273123.6966664638, 270788.58598275646, 272673.6422515335, 242470.95157471576, 276647.6425021689, 244104.3693586632, 272700.1720511492, 257525.18550670735, 277512.9313937774, 229418.4714347011, 232127.47074707644, 241153.34829668852, 274656.66514872125, 245081.9396781249, 256817.86696599034, 273371.1540645, 266620.67395653843, 257836.94457508076, 252837.11843496456, 262315.3140916486, 259641.1057810828, 224605.76139284315, 232761.8723832556, 397435.4952167149, 271788.21308321506, 269267.48594067595, 277871.3514301555, 264158.2464400334, 232026.20342106614, 277579.0534167171, 258536.89676295465, 277413.5501888301, 276008.3547248292, 224478.95862655624, 274749.50284184224, 255336.8103246673, 285644.3638781098, 205287.60196440638, 251563.31427062105, 269581.9253288196, 252307.23366009368, 275843.61489564, 234162.14538797113, 271887.34147526725, 269955.0134131058, 274162.9612277539, 275155.2709843418, 248985.34727347674, 260487.40795325144, 250197.76136194257, 266309.98608915333, 253990.35452693954, 273238.21412769076, 182974.74751525346, 273931.38503476186, 231630.73532079934, 228124.30424705424, 277174.797818643, 183001.25409286303, 240050.06617022675, 240799.44279462929, 265558.0698355264, 270178.83759694465, 270046.1909705065, 257182.03023922705, 227021.990873632, 262223.0598490518, 277400.12743529375, 245220.79223498493, 242324.31381297382, 250116.06473399192, 247528.0417232469, 271062.5164729618, 277451.1972019639, 277243.7046333347, 272887.02573101234, 260935.23021638248, 267773.13992229785, 273516.93251976924, 411127.68386368436, 277066.30282365764, 236128.71173336636, 275946.5377509371, 257935.59581792384, 276025.82904163876, 225773.1496696004, 268897.799948097, 259669.88911803762, 177489.66602938122, 223166.46812734698, 271621.91326199094, 275282.81461753877, 271910.8571431406, 254078.37161412602, 268183.98472873424, 272917.26139239606, 224821.19974314616, 268351.3823859818, 178971.43161473327, 264232.5488176418, 210239.60207311774, 258017.33251214479, 241050.17208081664, 276422.2129202548, 277181.93837359076, 255402.28609876725, 240263.97223132246, 265303.878452276, 276838.6508781676, 276294.2628964307, 275669.7039661883, 278878.8707007477, 263825.7993108467, 235995.45539207704, 266402.9674271849, 314802.29986995255, 269725.7049440369, 269234.5651790637, 190848.7544329652, 275347.99670893117, 272853.99546352157, 215453.4071263763, 255655.74613163844, 252640.59474764063, 263714.30850002664, 258696.24429389814, 246595.73052667157, 276963.08920552174, 243623.78865351848, 276184.9991465645, 258735.04926522874, 262281.6592163686, 275508.66662197164, 266588.5311159501, 275567.95915319625, 277593.0109532366, 272326.5912262952, 277555.6290758301, 258872.01047651414, 277456.45027400216, 248491.7380821446, 277357.5992001537, 275005.7241499638, 275587.36727201735, 229532.91469081075, 258687.70861504998, 270085.7471294804, 254375.54346578618, 301304.38256881497, 266993.3757389718, 196827.10492522386, 263323.18609976507, 264721.42287930776, 253052.2868340479, 243096.37417211366, 293982.1552304444, 273363.92936434015, 261557.2471032368, 276350.2007188081, 229963.34218157968, 271753.7528520263, 289813.4646116578, 276950.8665567172, 379965.2164391359, 270462.13110179524, 269684.4575548584, 273313.0411476077, 237452.91263246903, 233648.7515705662, 269369.1210727418, 303149.7399966628, 251158.8352457529, 252856.50499307274, 259200.1030872192, 240481.73560717783, 277413.2144154457, 196136.91826037917, 277522.6055845476, 247420.37334226773, 273687.14660759066, 277454.628526052, 223168.87554383426, 270901.1852756544, 244761.7421735922, 260935.0709346829, 268179.0106271676, 228258.33393880425, 270504.1881661915, 279731.4319615912, 276928.67851260584, 252969.41996811543, 257055.72756135563, 273943.96507512504, 276420.25359501695, 275166.25166481896, 272497.9690805775, 276159.40571876784, 275622.58395170636, 276451.2116085219, 246772.82958778483, 245672.2952985694, 268930.0253698148, 272872.9072667686, 263155.0268104691, 277001.0887554436, 277465.235461789, 277480.0968835416, 275682.12474198453, 277417.4208777175, 262659.430073984, 247983.01857011387, 273649.0985982235, 265617.87379343435, 270224.5798138291, 258410.50597130696, 266393.38383592275, 275387.29497463314, 276983.3800864843, 265529.0619528188, 239018.87310135865, 309236.0959773943, 258305.90341766962, 233934.6351281431, 269059.93315280194, 252996.1901686401, 276260.1428213965, 268446.87179879064, 273123.82882605767, 325156.1659892137, 241667.21038394867, 277565.55308433325, 273716.5270766429, 276064.8297757277, 275842.1425932626, 269429.96814660786, 276458.16944222915, 257499.4085705707, 255589.14113690655, 258919.8141189347, 260896.38247076358, 221092.97314188184, 277595.8928267995, 267224.1777511928, 235752.77669931747, 231513.60969087077, 275724.57999824133, 271710.7239387133, 228447.46827808273, 254126.81995689662, 261903.91044441427, 270186.5868115575, 272758.0103551212, 259713.87183759417, 270762.68721514964, 266982.4705520508, 264493.50307591446, 276059.74905836134, 253483.52436188652, 145324.10569177277, 279487.4595598473, 258842.16742041224, 276668.0797456451, 252256.52545528786, 265172.13065765105, 247054.26778566724, 234387.21288668306, 261969.13844808203, 235773.02557959483, 325150.4755266342, 220662.38291313816, 257572.65725604774, 237485.4535263935, 277201.6688491858, 277073.8010735375, 263021.0225726493, 266475.62831262714, 259838.03003114174, 237275.7053257105, 278722.878351958, 240717.17437504645, 265963.6751736552, 269950.0879482308, 275189.2143417478, 254260.61288258215, 334012.10582274164, 250291.7832091934, 274940.0464784072, 265027.2020955606, 268443.2245137659, 234578.22419916003, 269514.6293296027, 276190.06393121363, 274340.3905757498, 231242.092970992, 253371.4428674049, 272783.62407086516, 270500.66598987335, 273942.25228462135, 257234.1180015623, 278372.0050440826, 247345.89711862, 263405.562590896, 174069.08079421712, 277561.4695816043, 268136.02591092704, 209398.6580976774, 233877.87822602433, 276206.48521102435, 261239.25816628188, 266091.5792315499, 259864.81092205917, 276225.91543846414, 267884.6419214951, 273482.76812410046, 263261.65237494174, 255654.64536739246, 270350.28076585266, 273217.4040756046, 240264.63095452593, 257837.18126030586, 276432.43229054724, 271216.49793682824, 274834.6792195614, 277601.2790637565, 274696.9385962918, 232684.73255530928, 275724.9386173253, 250520.64761376852, 274702.5505399177, 260675.96604278605, 268850.1294877088, 243773.69896758607, 274663.487909018, 273864.6865213274, 276105.57378792606, 274630.6048688178, 277057.0279083389, 256681.08671280084, 273845.57581360557, 174754.87370091578, 276939.292504065, 261711.19132904746, 277510.84512880346, 274183.9048268767, 263121.7566480765, 322787.32608882175, 260938.10907113453, 202716.3562975337, 273689.952381113, 260394.7038764313, 239138.80564154682, 269255.09350885585, 275158.4423504571, 316668.40901528194, 250498.9347215945, 268332.0448232649, 277594.3117752778, 263450.26434586383, 275186.2972869285, 274591.7064084294, 251462.90200223992, 276471.2208910188, 238441.47722436357, 275960.3674309452, 275930.0242208792, 201456.8640648318, 235922.14808570803, 264084.20469673455, 277480.84991661756, 274601.26468485896, 264607.2489796174, 265360.8529405044, 267913.9979678196, 266750.57927391346, 270130.57707516744, 275513.79631079786, 274455.63369304244, 242522.04027957586, 276225.55474825273, 269704.8014434564, 277017.7644347376, 263785.0608714653, 272825.5488336242, 224478.95759356255, 254166.63496504977, 276668.3526015465, 249649.62964371077, 276760.1637264422, 275117.587484452, 259091.9844030041, 274164.0640685952, 243179.17313772874, 276759.2830660076, 275533.9484620116, 275875.16356942063, 274998.7910911185, 236813.30022045106, 250839.0147895443, 215182.3959056175, 180792.84906411226, 277603.0138502426, 264668.11462864507, 277376.01220147504, 276778.41062899504, 275638.4845349379, 277601.3258062943, 277603.0398943716, 268902.44343896495, 277215.95821444504, 244696.28115126494, 277419.32298027404, 151797.48270879863, 273663.7519076293, 264634.0641645277, 276780.69560680457, 215437.56258322528, 236171.1697308882, 259503.49261531993, 276404.6883001793, 261548.5461047278, 277524.4808900252, 224982.77736542377, 245670.13406754742, 264131.0810800437, 336887.4748214485, 277563.3548652766, 249181.66059620384, 233186.28751295607, 236498.13414493014, 273574.9239261802, 259390.96088547874, 239430.70205661806, 272501.53293258353, 266292.0388288419, 260059.62708109984, 271532.34677017253, 284394.5234543233, 271913.1623239296, 271937.33866471174, 268970.83906804, 274975.8304763659, 273556.13158511266, 266925.95516551286, 255851.0757329048, 271588.95775359415, 273114.3376774159, 264197.76706958073, 288914.8170859955, 254948.22947812383, 266143.58212245564, 265315.62227800157, 241118.33989200936, 291022.1437805983, 292414.01517000084, 260060.5508660163, 266276.1487123419, 262476.05883004173, 273799.91692458553, 249843.46553000787, 241975.50527174157, 254765.2971806335, 270900.0310760564, 301337.6996588423, 246839.69752730086, 232900.928529231, 250399.17167980145, 277289.3095567319, 249577.15318768556, 244148.27054624306, 221735.24931861684, 277275.55920144153, 270334.1269464622, 247476.79185578268, 264943.8923832917, 277532.50425497215, 256568.390089745, 252222.10826004014, 264292.4602771047, 261341.41695956752, 270865.6629455121, 224449.26955894055, 277365.2834036569, 275223.3437995691, 265908.4569938443, 243596.93125378428, 274875.49207917246, 276678.9419254456, 296661.14917910227, 265461.2312230099, 277530.6304989333, 272768.5090967282, 249927.22929664084, 275743.4131860947, 261068.20753752446, 271510.22993030935, 249624.60667862333, 254998.35590851493, 276172.502639329, 269338.4127156978, 238552.93128760578, 257109.85589180145, 275967.202775014, 250089.14990666258, 277581.2076627274, 226645.63996585057, 239164.3641646056, 259673.6318089919, 262768.0528255235, 270039.77577002236, 249443.42803259435, 272573.89639242314, 260967.62228392749, 243807.30564536218, 274958.1294872433, 275507.70770682127, 277309.5895524014, 277597.8013111992, 282839.07900494686, 247979.7656317798, 208711.67860168355, 226219.11383643624, 273040.4162972923, 248122.70317109633, 226326.43439888547, 273732.7926073885, 264000.82636699255, 294675.02666894475, 260229.59340516783, 277598.31375371956, 261803.36005663982, 274027.82765877835, 253194.6271581656, 239151.51065779323, 276812.31816663477, 277490.3158530566, 304583.5956697841, 270990.0989797657, 275164.9452275603, 274171.2218666353, 255576.63635629276, 273645.6670028867, 277589.7700945022, 274880.5794117394, 237690.7402331758, 251555.4680462847, 268642.9604497184, 251108.27422547198, 277425.2479452839, 265467.9788527652, 262990.1149122123, 273896.2964370554, 256032.15497237295, 276795.69647019135, 254080.43742236902, 252951.36313976074, 405126.80841504404, 233912.68444698362, 421823.3955342116, 275506.33403256314, 239125.56130337142, 271785.9050605623, 275245.859668194, 277570.34001474886, 239077.1602405929, 288953.6443130751, 235870.21812800394, 267227.4333306727, 277317.21130652906, 275180.5208735439, 277597.2513316062, 243978.1205920576, 247904.99258922247, 275739.20855118026, 273031.9344951548, 277222.813839044, 230569.21276538898, 276378.1024388337, 220194.04907419407, 266799.358846645, 277422.14450163016, 276053.1408303075, 276919.6052385068, 276911.5971938427, 264144.3244945077, 277164.08790008584, 306222.7894881744, 272700.0303380716, 281171.8090937931, 276614.9864009294, 277392.7704600745, 277256.0366349721, 196615.1331207272, 264964.96121326485, 260736.83586986366, 279449.20611642924, 275854.07949146134, 261441.00366128402, 277600.92418825714, 242720.48810737272, 277276.23218849674, 271307.5251160123, 275210.4587505521, 262608.4392379688, 275733.8877820979, 271061.96433303674, 270495.419116308, 276492.4947278725, 254735.97957637996, 260901.37894133158, 267871.25433274684, 273392.31208517205, 246041.86237976432, 270490.51043082844, 271623.93938406743, 263930.32475494215, 216068.23891881297, 276455.8016338438, 246821.63362323237, 287087.0947286662, 261395.2072105658, 221184.05983766244, 254641.60962793083, 262465.91020772245, 274943.6604871237, 265495.4186963165, 270757.6068325567, 276829.07394198386, 271362.65242019366, 261832.22250298804, 276713.39407494577, 276945.54390047333, 276294.38821355073, 257177.10291587163, 253128.0847285352, 261059.33978521836, 240982.46932119128, 264294.51154990075, 257144.50398767323, 259335.40289078254, 267926.65437875426, 274618.73168036935, 183877.74816282964]
thresholds = [231020.3462323187, 266399.1061952704, 277417.4208777175]
display_name = "Treaty ROI - Historical Rate (Conservative Floor)"
units = "ratio"

# Calculate exceedance probabilities (1 - CDF)

sorted_samples = np.sort(samples)
exceedance = 1 - np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

# Create figure

fig, ax = plt.subplots(figsize=(10, 6))

# Plot exceedance curve

ax.plot(sorted_samples, exceedance * 100, color=COLOR_BLACK, linewidth=2.5)
ax.fill_between(sorted_samples, 0, exceedance * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Annotate thresholds

for thresh in thresholds:
    exceed_pct = (np.array(samples) >= thresh).sum() / len(samples) * 100
    ax.axvline(thresh, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
    ax.axhline(exceed_pct, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.3)

    # Add label with formatted threshold value (use format_parameter_value for full units)

    ax.annotate(f'{exceed_pct:.0f}% chance\nâ‰¥ {format_parameter_value(thresh, units)}',
                xy=(thresh, exceed_pct), xytext=(thresh * 1.05, exceed_pct + 5),
                fontsize=10, ha='left', weight='bold',
                bbox=dict(boxstyle='round,pad=0.3', facecolor=COLOR_WHITE, edgecolor=COLOR_BLACK, alpha=0.9))

ax.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=12)
ax.set_ylabel('Probability of Exceeding Value (%)', fontsize=12)
ax.set_title(f'Exceedance Probability: {display_name}', fontsize=14, weight='bold', pad=15)
ax.set_ylim(0, 100)
ax.set_xlim(left=min(sorted_samples) * 0.95)

clean_spines(ax)
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('exceedance-treaty_roi_historical_rate.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Exceedance: {display_name}',
    description=f'Probability of {display_name} exceeding various thresholds'
)

plt.show()
```

*This exceedance probability chart shows the likelihood that Treaty ROI - Historical Rate (Conservative Floor) will exceed any given threshold. Higher curves indicate more favorable outcomes with greater certainty.*
