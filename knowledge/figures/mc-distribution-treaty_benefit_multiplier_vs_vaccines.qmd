```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Treaty System Benefit Multiplier vs Childhood Vaccination Programs (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results
samples = [10.202428407274203, 12.163262098995519, 8.62315246673719, 9.23992517840253, 14.206117489806877, 13.051783512173555, 10.210633093797945, 10.933711382863299, 10.540391289540317, 12.772976057683314, 9.719834193316759, 9.91594876562501, 10.361750325503573, 9.644413247601637, 10.0763129250422, 13.30706769129879, 9.707305223362262, 12.220790421712202, 9.220732114872106, 10.46417161541519, 11.358602961927842, 11.389078102683978, 8.412972387424038, 11.204228733550313, 11.689761641497796, 11.766658029344043, 10.115606575879882, 9.042336577389426, 10.049025883794963, 9.81497436885286, 7.7058281875611225, 10.34266878239331, 12.092011378935618, 12.076988313566085, 9.1260803775259, 9.723946111158979, 9.842834016780122, 11.02614326443515, 12.511357271661925, 9.44091240566248, 9.949980413577336, 10.322119895564304, 11.798757160123357, 9.708106081316668, 9.508074893398508, 10.184235782179043, 9.482420991220106, 10.489965589704742, 9.470923966302006, 9.489868247936604, 10.297094859437493, 10.067371371483759, 13.020428910932056, 10.9082133773295, 11.126630643303681, 12.343157585593838, 11.174180671820045, 7.812602177474698, 12.267464631740003, 9.579206136913408, 14.50049743534552, 11.454287667519784, 9.533994269267918, 9.291030865800632, 9.867360971275833, 9.051754027391278, 10.996386828686617, 11.64735480888668, 8.859607447907747, 10.908458555287131, 14.636398039498484, 12.52207391990482, 11.014664724878369, 9.19822873748327, 10.110766996151014, 10.529289319507884, 11.7987850248844, 9.897887096275898, 9.744993729627984, 11.016549352286244, 9.928859394528342, 10.94163391771324, 12.325850945424285, 11.706412214377888, 13.425903954355755, 10.231179608078762, 10.595751966229443, 10.459002838217272, 10.015620733947305, 10.585078745087204, 9.602725423867037, 11.511703659526214, 10.929388362121783, 10.31325684260009, 13.310971745509194, 12.604291617430672, 15.334242355553265, 11.532452315848236, 9.441205490414502, 13.082887433037946, 11.09968906003769, 8.890113093372847, 10.97395529007238, 8.785207823690687, 12.340368324106432, 9.673646677738805, 12.439298539099704, 10.97641931693015, 9.79363359504011, 13.060333826128494, 10.147063830011602, 9.926204578231268, 11.483542594847759, 13.137010116701, 10.197220730269073, 12.772612178244843, 10.335965958386092, 10.144655416080568, 8.890575163300488, 10.407227375803064, 11.527943036535335, 9.657969652811227, 11.407466096720228, 8.391204889605051, 8.94897554735679, 10.565855102622297, 8.438068087323959, 14.234189533842796, 10.496892331864224, 13.917534521818618, 11.86833250101188, 12.782689373953199, 9.658316015043075, 11.343160655010808, 13.384048085311617, 12.930247884430718, 10.245362605937434, 9.181656238674233, 7.4323071312150875, 6.032451903799867, 10.718537547177696, 11.863968580326011, 15.526369607567181, 10.662083424867143, 12.190189526083854, 12.10115494117973, 11.633476702350137, 10.991677501461938, 9.323424230185276, 9.67880826874428, 12.240574676560694, 12.655401547392433, 14.616883692509136, 10.37652638796474, 11.530820613955278, 8.872802303816714, 11.025578938642505, 9.176186870073296, 11.318306916033166, 13.385668569204313, 13.18966603770296, 12.483222265062079, 7.920905152309009, 12.539284598345262, 10.268636131572205, 12.804473997986525, 10.069939247977572, 10.023614670768206, 11.094889133443838, 9.897376348772049, 11.800258031969047, 9.926567482481202, 10.40256130468026, 12.445891159783601, 13.807094594564758, 10.404204255515829, 8.303560424835386, 9.370074172883736, 11.585711847988959, 10.613818900500242, 9.589421928041476, 11.200832637152434, 11.334389270094281, 8.967309466015474, 9.598917870130279, 9.087549851042713, 9.569470246549226, 13.263945324155223, 12.64697554199224, 9.14494924449088, 9.18185200605719, 10.93741077781072, 12.06387962531589, 7.335153752165983, 11.744617959597973, 13.082293575719932, 9.24433204928346, 10.047577115773317, 10.963418188406898, 10.580627930013701, 9.907043451961712, 8.667509274173085, 10.502692553524152, 9.94404394512203, 14.886021973166612, 10.185183964915637, 12.247496757766715, 13.223318185345782, 11.66721115236379, 9.996742116452893, 9.819236014911018, 12.438887224768429, 11.523903347602582, 10.891357202506681, 10.519523181590896, 9.262453406263853, 8.913195316556983, 8.311514378303588, 11.463209110192148, 11.753140738451316, 10.225951086855856, 10.364724484919646, 10.622238466495283, 12.950933525486453, 10.202419970182232, 10.52997559569263, 6.456070046955266, 7.514184485731876, 12.658621179210616, 11.400912406935417, 13.328662761371247, 12.428641502717447, 10.387417791710211, 9.301695575028642, 12.008278279391272, 11.721834882496678, 14.182643181901701, 10.295636367834312, 12.473198815453985, 11.543021977989637, 12.176583318325482, 10.610360016259236, 15.06810412470857, 14.376408178698126, 7.445330510357307, 13.7938271881519, 12.5852196316606, 8.269776205844584, 5.986340022982237, 12.92216194513425, 11.603606605378841, 11.131052406830054, 7.852878540088322, 12.61105028836303, 10.383019137053036, 8.866746818772292, 10.538814807484137, 11.40696948734423, 11.88898804895492, 12.842881151359851, 10.282741014311327, 11.107618073922263, 10.389165278402482, 11.900343755437232, 10.41613388922996, 8.431968784191975, 11.063621028074536, 10.929051909228058, 11.764964941687538, 10.75705140997955, 11.677548298264531, 10.053440246277646, 10.510046780767404, 7.5690284329896995, 8.05859507946274, 9.334726558005789, 12.45193110566645, 12.728233142849291, 9.32210154938531, 10.446031329013017, 10.237562818068795, 14.015185983507097, 8.88407932314834, 9.613662522444235, 11.975549261329263, 10.817679731527969, 10.196487566243945, 11.111469033181542, 11.157693137259686, 11.014603304594532, 11.97724821199706, 9.467671898334027, 8.346002276800345, 17.908327283117604, 11.425752198718621, 9.948083524033459, 9.111419731273012, 11.616981357496586, 14.072542928594112, 9.18229855051181, 8.199657429160975, 13.370623509116175, 10.272183025730248, 10.985937229043293, 10.870148534069521, 11.899909341695658, 11.432318002469595, 8.728232353399383, 10.476180390601318, 8.16099431357114, 9.287093775330712, 9.370694617503448, 7.589915781048915, 9.09115650518004, 8.784323151431737, 12.155544500883513, 10.07429152592707, 11.427530392962153, 9.587070590662101, 12.741283308124075, 9.176810296452551, 10.342202173813444, 9.705148612856954, 9.596689514823272, 7.658569503422156, 9.964859514387244, 14.04525892463728, 9.857783116303606, 14.257193549552643, 11.684591611349846, 8.993065528644825, 9.975799293519783, 12.279555647762827, 13.461637731429413, 11.810174258959695, 13.61763028014206, 10.527396030618917, 10.210032915289062, 8.079625324663683, 9.620874496574297, 15.511881982266463, 8.852732930551518, 10.098027423177777, 10.449192832055866, 8.28428579519924, 15.044201914327521, 12.677962054408816, 10.017230610807733, 14.873988446376222, 9.12334730902089, 10.941639021731607, 9.713143140190144, 11.238602878967756, 9.808753082375954, 9.968465501335485, 9.613476488262359, 9.095556475065047, 9.847580503828286, 12.997190084888546, 9.885664504986224, 11.51158708557281, 10.214166679836953, 9.141747031650723, 12.609263520565088, 11.15854430342894, 8.59033700893789, 11.391581143245007, 12.360739699799177, 10.494405144944384, 8.574341087083951, 10.466479595141516, 8.933106206678087, 9.049768055282438, 10.39847307923015, 10.394749439319636, 7.390946611611504, 11.678738652765551, 13.073199637871504, 9.006524512044477, 10.86331853734128, 10.350760325791187, 9.444090914313268, 13.258749219132282, 13.60894041308169, 12.610955108263926, 12.114425776005579, 9.873675347194919, 10.230741921245945, 10.822518798604458, 12.620664005422418, 16.513710006930037, 10.72726129930479, 11.078031006147649, 10.834850697140014, 9.926181186202014, 10.751860078425054, 8.897289879701818, 9.937587227245727, 10.127168002108952, 12.943939822480633, 11.05262802171171, 9.68810209597616, 9.24642027112704, 10.542547628326977, 10.419955155592021, 10.949311449545228, 11.650872883687583, 9.888565008760786, 13.85077819725152, 12.751205117729441, 13.852419159635883, 15.748876185601866, 12.078655814344364, 9.195134183157187, 11.509666094962926, 10.278145849265375, 8.583937097751377, 8.914050734468585, 10.694127328898462, 8.203055428934658, 10.316464187980326, 12.272730597429481, 12.423950531979527, 13.653434388633189, 11.995733432870653, 10.530516265840431, 9.295581775388918, 8.964592775228873, 14.298818618217577, 10.429627865233753, 12.639336227939252, 9.744975941867537, 10.597203659550832, 13.060239659557837, 9.86997841562289, 11.761760276638054, 12.137905800114135, 11.297656500695192, 11.59977106409593, 10.22023775373399, 10.230711455741611, 9.431168518432612, 9.680348582691813, 8.842137683846342, 11.15427168947579, 12.568254775329347, 8.881359216662382, 10.601999591313126, 9.04026251269914, 9.909247044692016, 10.006794101105537, 11.03581783291912, 7.758311466018088, 7.568606119763838, 10.324812618172116, 10.304648670364525, 9.010464798391311, 11.687875239498931, 11.048527717871742, 10.704836469328951, 10.161956180607836, 11.88522306849135, 13.291792026975948, 14.24717619763518, 12.95320169723351, 12.113271195281856, 12.368127364164014, 8.299863412303795, 9.006742259147401, 12.678495911546163, 10.625332510371138, 10.591914326498758, 10.804965465898535, 10.544643824297802, 10.46975331649879, 12.2281155641693, 8.955077593917109, 13.193115019375872, 11.061901100823212, 6.445065014624316, 10.816319659920124, 8.968794234211726, 10.326900607419391, 9.094356859603185, 10.998158969506031, 11.207575410610032, 11.594408371412072, 9.93226076151226, 13.362002488888669, 9.174664552057763, 8.971625771713551, 10.54733713235639, 11.328809324769708, 10.217336820933925, 11.326434729174151, 8.745122902084221, 14.759927376691635, 10.655975997987287, 15.246209969987913, 13.735058276230555, 8.77744762767136, 8.737823928115148, 11.758349443745333, 13.29837421658853, 21.16842570599903, 10.819920231767654, 7.023199910873485, 10.575449173123431, 11.175241819513474, 9.704413254676345, 13.083418921561258, 11.255392778023833, 11.196870078574362, 10.204765595550864, 9.005938171692279, 9.828053864218084, 10.004371559862392, 11.11121202614539, 9.508577302029554, 9.009919799126122, 11.26665158878775, 10.549730704219568, 8.447280822181366, 11.833281065273075, 7.978163533364795, 11.674396257378671, 9.32057195996941, 11.12171955937987, 9.60559066554536, 8.705782437846214, 11.558417435243047, 12.162790996625876, 10.413666508466365, 9.147884528784731, 13.668019856819623, 9.11306886710461, 11.94446515903289, 8.572712489643978, 16.301732640823978, 11.775986014687659, 13.321400562621733, 10.667363580607274, 11.103084594839741, 10.714256760980994, 10.601019995349446, 10.34930529829476, 10.587778889174105, 11.36252113111353, 9.729753514329179, 9.703906366765233, 10.067572640708327, 10.165939033716656, 10.078488234550974, 7.771757606993233, 10.869208716500687, 10.786448205713688, 11.614510027654584, 13.09125585026464, 13.568811513155058, 13.07237274543585, 11.179177995406029, 10.47489339301794, 9.844478321530797, 12.828785539525041, 9.124767243962683, 9.650280106689824, 11.597495976750528, 12.082749498646, 9.648082117417323, 10.24817256061479, 12.828530379091498, 9.889628325239867, 10.145286309994264, 10.429517835196332, 10.331902258952399, 13.966611584921269, 9.333055154185821, 8.80471652497042, 11.148757218010998, 9.230102892218305, 17.069275564154815, 13.794082885173715, 10.487017300275467, 13.22026183947263, 10.245946640984839, 7.181563612407554, 12.481459926221179, 12.897087275572595, 9.951549836638138, 8.367155342685923, 12.418109565147518, 10.743954105582668, 8.93776010887013, 13.695199975787766, 12.263514019961509, 10.524629568045508, 11.229461208148903, 9.806441152368452, 10.520947550323442, 14.642117699572573, 10.277677011391974, 11.264742716260086, 9.462967328634956, 12.430223871669245, 12.014454080305752, 10.241905563355227, 10.134705235806402, 9.275648451712687, 12.576703113141827, 8.935629157523111, 11.863721587815892, 9.11638231351285, 12.052016224352798, 10.483126321323986, 11.429205559636065, 11.828158404816367, 9.301503552770834, 9.699058640725017, 12.799589419688452, 9.340222514707882, 12.56060069300384, 10.542601111767445, 9.885814589391305, 12.258097542919863, 9.764390120389354, 10.71134864799301, 11.292871152929644, 8.878122266679227, 13.734592483428681, 15.69662049528927, 8.394890027726133, 6.499895649630912, 10.406692150108787, 13.631925759121431, 11.800586396169379, 11.257407428060535, 10.813431051026651, 11.865249213162611, 9.291103940805062, 10.09970745517165, 13.268315576515475, 9.008717389921586, 7.887642125734763, 10.060777028535137, 12.19086651511, 10.5467014452253, 9.583051668575978, 14.501566310361873, 9.908902844702393, 10.270525463859597, 8.321654648182513, 10.408684466208763, 8.386268270451264, 12.890102986759114, 9.228318207618242, 9.715595588724433, 12.350778456982429, 10.3414572157801, 8.371788878141626, 9.654153765902358, 14.380163738912383, 9.513843344721591, 12.628599667546641, 10.552760320616429, 11.43973636739842, 13.671880755913582, 14.859162489166392, 10.303842955251351, 12.277580000161624, 18.340611407947954, 8.840984115251992, 10.361718278061968, 11.243341395304881, 13.53678365007734, 8.526791021252746, 10.255938401405716, 7.5849433372214135, 10.439806288534907, 10.036897941242794, 10.846833564462859, 8.922198631858372, 10.758460757211738, 8.06327680022907, 12.203691075722848, 11.399720681766699, 11.225608089462868, 9.98860324151311, 8.52947226185623, 11.154046789761408, 11.834921195214225, 10.577654388573134, 10.780247995628768, 10.47151471740814, 17.004273572314922, 12.807805341626498, 11.515362606171086, 16.038358005309313, 11.551919863032227, 12.40506134382822, 9.891636187335198, 8.394830794587213, 11.203021893111085, 11.244942557848137, 10.325048992419845, 9.768068977384441, 12.152193542490854, 13.261982919983742, 10.181519927969394, 10.904099265067497, 9.278273250876259, 10.404709312635704, 9.915498566059046, 13.156616179004944, 10.403880514631682, 12.235657926312886, 13.288086921451656, 13.010699815292082, 10.192654393330983, 11.060391915836295, 12.062852214742314, 11.247052797974428, 8.895169795807584, 15.719045843074298, 12.941145149531092, 12.016838968707498, 8.084992822975524, 9.919491146263054, 8.501712652274152, 13.349742479393452, 12.501446044557303, 10.866160525768182, 10.491770651578145, 10.392933510655412, 10.627197397665862, 10.143193984900934, 9.161904148730487, 9.641456433827024, 9.698170855389646, 14.023145381902324, 14.679045410876775, 10.26858647622554, 9.405199796617211, 12.070538006282412, 13.091895997299243, 11.184631737017558, 8.96216084067197, 8.112502304416536, 8.891256268348206, 11.787354451833409, 12.694137669128576, 10.730143066091518, 10.646395330272327, 11.63144369629745, 7.264089383250107, 8.148858493054572, 8.449201210972165, 10.696822558139823, 8.711844993449333, 8.938489522989357, 9.764092647344249, 8.873267753992437, 9.54675375472948, 8.705692550371431, 9.5589717386669, 9.965352512368844, 12.960197991721245, 10.743885435582841, 12.331878600130239, 11.54949513618501, 8.008415629113697, 8.46681256891305, 8.467830086243879, 10.418022568963043, 8.860661938992678, 10.421607348206276, 9.75337317172995, 13.788466706340476, 10.981565029478716, 10.150391449610332, 12.16535668021414, 10.356765349036602, 10.814129017100086, 8.075640664007377, 9.407544927114214, 10.557337606688632, 10.74605495087323, 10.70787769430975, 10.608804125034926, 11.826784383361506, 10.558314306945594, 11.903584344454522, 11.28438022804354, 9.542432292504008, 10.001003179315248, 13.117577226117723, 11.173322326012059, 9.23391384277038, 8.767117881588801, 8.955309386709898, 10.03577819411721, 12.773608177945773, 11.56280489876809, 10.00727466064883, 10.220470798889709, 9.124875447751423, 9.238272163268798, 10.661634364701468, 13.05835543703127, 10.858883967970893, 11.25908444651892, 11.300723127975177, 11.138963533306471, 10.342431471269478, 11.082698558739004, 12.300934496916208, 8.72845274577884, 10.963358822576108, 10.751587864178559, 10.554614314068253, 13.838896870068575, 12.410093472235978, 9.180646504404223, 12.722211191213384, 14.079085933134278, 15.10747029277173, 10.972334282707449, 10.676142819697734, 10.579426757072103, 8.596324871217892, 16.58040303753054, 9.645320069153605, 8.329579310843405, 12.173913548860627, 11.788156176803088, 11.654217727539327, 11.99263444831674, 11.361853755569063, 8.999283549606954, 7.80045089776362, 11.909017513304686, 8.007527533099935, 10.675586873931438, 8.566474665159454, 10.825432565510503, 10.204672577732259, 10.250780117535983, 5.653339653718036, 9.351573730365148, 11.396731205528255, 9.082763505756194, 11.070206217169948, 10.89082800908457, 9.464594037119978, 10.092296722994268, 9.94669686305226, 10.673509700246804, 10.618154715952295, 10.339095442170864, 14.403810038009992, 8.29612942631165, 13.024510291444445, 13.594745283399874, 10.959566671299115, 9.603274183664885, 11.378696767750958, 9.985017945533068, 13.729373200917427, 10.912350411797552, 10.783747548059184, 12.060080685097587, 10.619323488828135, 12.324514920070964, 9.685473062484123, 10.62582673361722, 13.884524587752543, 14.816704405997037, 11.30532226999513, 11.662094948365672, 10.771811564236272, 9.707769691405781, 9.967704151036413, 9.709723402474964, 12.566196350755302, 12.63977847444924, 11.87355220143599, 10.58897311712693, 9.584949218180133, 11.062081976325116, 16.41198429431307, 13.015174186615308, 11.504982491269432, 11.149380395694514, 12.434750292191422, 10.427152589373582, 11.233642418206118, 9.480259447359789, 11.870069101874403, 12.178663884726987, 10.499563913069483, 14.106209218793222, 9.775474298058807, 11.073793443922513, 10.264816886120752, 8.359196676192173, 10.687560171318426, 7.210493576948031, 11.009272888107763, 13.015013127204258, 11.035022765287714, 12.41580934192782, 11.791359648737126, 9.64668330937289, 9.725297066370949, 11.995036381366111, 8.42716567623266, 8.600966314628034, 8.99861846890647, 10.178833353656804, 8.837247982035771, 15.656795903279226, 12.081304126486607, 12.107442458466714, 11.261133498947187, 11.511068808897525, 11.38301742950365, 8.174081974125153, 10.785197603156949, 9.791406164152383, 9.538673901841634, 10.641445612095506, 10.231728625297125, 9.151678212187214, 8.848402026808849, 8.451801530171068, 10.542272498687879, 10.05186194714167, 11.935307454162661, 11.090818213624573, 8.975786370888944, 8.99014525453698, 10.79289938983576, 9.579131321679668, 10.120283080497451, 9.022579153857032, 10.416332473116816, 10.23778437522981, 9.093375737061944, 21.55709923850477, 9.710470052722178, 25.09294579768297, 13.639945808815623, 9.840093753580016, 10.332823686640102, 12.74380942846173, 11.114959243376331, 8.267334310021702, 10.529912734213916, 7.4284880937113345, 9.583793519692577, 10.312393443813967, 8.068727915532442, 9.161203190434657, 12.57249723038539, 11.065282342606611, 10.535453861072481, 12.014626426393844, 9.558464660952604, 12.811715186908561, 8.402163039560719, 11.358778558792569, 11.248827671790604, 10.294256863263422, 9.907319285184899, 9.71422677245674, 11.806996222071112, 13.205662103612351, 9.30511012259006, 10.80109469234429, 12.941925221200293, 9.82688984315574, 8.872330585662237, 12.804965101733883, 9.955721896840597, 10.255672132593984, 9.366713578581031, 9.339590678919675, 11.745370136604276, 9.741808756090304, 11.758935970483911, 11.177461450959177, 9.431283598735668, 8.676999348941619, 7.931430387882739, 9.024840755474674, 10.567615087802642, 11.361028008027851, 9.642926993488485, 10.877378194086536, 10.495960332491098, 9.385935139862793]  # Truncate for embedding
baseline = 10.336733333333333
mean = 10.806159150440708
std = 1.8544128243077151
p5 = 8.155280032849042
p50 = 10.632871048480494
p95 = 13.966635196324296
display_name = "Treaty System Benefit Multiplier vs Childhood Vaccination Programs"
units = "ratio"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from
output_path = get_figure_output_path('mc-distribution-treaty_benefit_multiplier_vs_vaccines.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 10.34 |
| Mean (expected value) | 10.81 |
| Median (50th percentile) | 10.63 |
| Standard Deviation | 1.854 |
| 90% Confidence Interval | [8.155, 13.97] |

*The histogram shows the distribution of Treaty System Benefit Multiplier vs Childhood Vaccination Programs across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
