```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Total Annual Cost of War Worldwide (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results
samples = [11904092107971.47, 10064339017041.633, 11216720215876.441, 12943024451783.145, 8584516660267.1045, 9837377263841.553, 11413435951236.438, 10972716182334.459, 11395529668432.309, 10433301499161.562, 12574039864503.256, 13625054996898.67, 10964357617521.604, 13635222231528.562, 12285749946506.248, 10956296912762.701, 11416356859735.941, 10080480219051.531, 12627672630921.906, 10528533734939.156, 11406015649987.352, 9396828888384.83, 12804622788149.938, 10978671591257.805, 11103177198288.867, 11076091971291.041, 12303357695570.438, 10834486472680.598, 11520659646170.21, 11689144467993.135, 13984143573831.12, 9537357143225.53, 10441217127318.531, 10368516547366.842, 11965091208383.55, 13949398172949.422, 10173917767262.63, 9304518112318.707, 9955080965933.865, 11970906385528.238, 12989831671217.07, 12462452269489.393, 9868839997714.814, 10763192058082.121, 11020672378791.367, 11892522296456.037, 13277718850334.168, 11229782765422.906, 11233023113343.254, 10429995366320.59, 11952306424965.186, 11971383679554.723, 8886005861254.352, 10049317286249.166, 9816115027004.957, 10738721738527.006, 11014926726559.21, 13317573748533.617, 9848465997275.773, 13085716099637.734, 9871805055295.117, 9976531928426.691, 11589112055717.137, 12875822689105.73, 13735618401941.686, 12079536463018.672, 10329110522680.045, 10863158568722.955, 11665102570562.031, 11062115418402.527, 10372254640342.242, 9717728686486.574, 8646005461483.094, 11438560382760.709, 10970250562882.926, 13295804321516.281, 10356511090841.19, 10388807255705.809, 12202842638996.65, 10738005436152.902, 11577251756281.795, 9530907833142.527, 11785861794045.521, 11153526423221.904, 10003886281962.645, 11874755054501.11, 9985026942264.475, 10859356069616.674, 11126464184867.373, 13284014857168.02, 12226056769105.395, 12037992262004.926, 10201653440835.941, 11335295949977.803, 8948503747680.617, 8399245947539.814, 10312735738050.426, 9382227075211.664, 11090998226289.568, 10179903493963.434, 10535292337134.93, 13759485603445.777, 10635598015059.43, 11144922634930.656, 9215679351817.076, 10254692774363.291, 10313316198109.355, 10621379197708.516, 13057128758748.053, 8620461616395.572, 12329750206495.037, 11440863657164.521, 10060904079294.043, 9206550548406.852, 11336823372835.203, 11500499878453.82, 10967236758858.219, 10283926503398.574, 14290113279239.684, 10289887185865.242, 8510297340567.509, 10754494388236.236, 12845646479958.26, 12877430631250.648, 11464016894230.191, 13108662460551.088, 12896656534920.82, 10483515941157.244, 9903595227081.95, 10848636575545.047, 10357956461325.682, 9447340370960.287, 12159127908305.25, 10624886425126.414, 9213232572954.148, 9898033906491.963, 11802975859071.18, 12684419157534.07, 14095571972536.406, 14635675933394.469, 13220911252998.223, 9181649103747.553, 8742301266809.539, 12600623306271.963, 10202915059703.797, 11169683068716.969, 9525429551665.23, 11108513563809.791, 12830043797114.95, 11235140323244.926, 12082432297192.656, 9421367949473.629, 9029585189172.836, 9389791641932.2, 12336056795066.102, 15164351507917.36, 11324739592390.652, 12655331657953.428, 10764235562470.238, 10201315850392.102, 10787469012952.785, 10593214708025.12, 14788650650573.133, 10567567550822.535, 13320475399321.113, 9793352431537.402, 13477510661936.54, 12403645315624.326, 10845809838627.07, 10732377382752.736, 10559813275917.555, 11225220599997.477, 9696509545332.81, 9541923369505.287, 9677581118733.027, 11671306270519.041, 14341466356009.512, 10204431438662.54, 11396261517176.543, 12907755242498.193, 14259964059465.465, 12172704321640.848, 10649070053637.71, 13362818159529.465, 11778212011940.459, 14231555766443.363, 10763170405198.664, 10390032386068.8, 8735941064704.014, 14912624766585.438, 15595290332241.277, 11495493881674.646, 11750950405760.955, 12331774625998.375, 9212649376373.67, 10707413508235.197, 11418859338560.951, 10016017594356.844, 11536908086675.016, 10919673215980.678, 12087722573616.602, 13772630811088.059, 11471946710461.598, 11766482343240.191, 8704956165758.605, 10800180029622.734, 9669598581641.957, 9902146233118.482, 9062891977812.973, 9359066597967.754, 13444601836250.695, 9353751953267.117, 12290222403685.555, 9896808381783.234, 10551759908335.047, 13034664149677.879, 11654418382502.854, 12833291000502.98, 11506728426943.264, 9271500393958.287, 10134491484319.29, 11465848914026.307, 12194938674307.52, 9195575460338.938, 10858334250854.666, 11399827134936.309, 15077495046320.795, 14209988442245.96, 10578547865332.969, 11540305418398.4, 9005345291097.451, 11397382104283.088, 11740907403999.516, 14309795035603.389, 10226739167049.98, 10327529664281.004, 7847614341758.335, 10185284434213.941, 9357450323250.27, 11127806375432.152, 10015387023281.768, 10798945876460.557, 9142489059423.115, 9773464595176.14, 14731841155304.488, 9413936828632.168, 9551258830610.344, 14387232795585.295, 14052073925984.84, 8930544719985.398, 10998262402604.633, 12640764056038.125, 13983816374446.91, 9440232458483.61, 9701872090540.84, 11242405128412.469, 13084495876835.01, 10087013783967.344, 12191123719833.127, 8864156511838.59, 9840791431371.023, 10785112519388.58, 12176047084404.488, 10739663556867.48, 12714172748631.121, 12255672606833.39, 12527093177187.541, 12963340719457.129, 12450902146054.945, 11339965938321.508, 9787628417507.764, 11370151639731.865, 10049289491294.059, 14248119858276.734, 12303160868535.766, 10745783644122.555, 10116896053487.129, 9323737343797.127, 13450112223513.115, 12159473240150.045, 12286068981246.393, 8956082753225.451, 12742439768508.617, 11403469789937.36, 8803410988330.205, 10065735355152.066, 11546238698665.812, 11274808617930.295, 11352766017204.994, 10868210691894.76, 11139894824585.277, 10496685859846.14, 14000008861820.611, 8700963212287.782, 11821221100304.656, 11267558812653.188, 10262362734343.855, 10354375171161.553, 9205044664223.309, 10930935480843.934, 14450468158458.44, 8377195499700.842, 14133179637698.254, 10338828827863.176, 10251846963503.117, 9238381208605.586, 10777120913424.758, 13926053164745.566, 13286019188810.91, 13702575469049.164, 13943163605106.562, 10833152930808.566, 13421743617938.863, 10974074352480.41, 12028177170179.084, 11195252941248.25, 10844891915489.613, 9775511247702.932, 13158833936046.988, 9702285065084.066, 12222129824828.883, 10185083339448.164, 14745437788626.814, 12168955751716.248, 14132846038435.162, 12292193896895.66, 9320441490005.953, 10131431253913.121, 10505146381246.402, 10103652496971.398, 14410819983830.34, 11397511594788.207, 10156927532193.834, 10712447933850.256, 12494843905773.607, 9735530331965.373, 9569501740268.71, 12703850616409.125, 12028597980408.16, 11574640562523.941, 8548923916068.24, 10650780427809.46, 10912406503560.045, 12504732405581.96, 13436499572811.066, 9097192512621.81, 11396717511528.766, 12493510139658.738, 9467369423087.611, 15011299513082.115, 11468061919920.578, 13344512501360.967, 9950471891903.219, 12854378093098.596, 13934232986594.947, 10983974444881.275, 10205145452497.969, 10991456985063.383, 10598810526129.004, 10256701355378.3, 11716347253540.79, 11182971656329.102, 12775325999041.496, 9530217224511.781, 10289023754446.855, 13602691631372.053, 9120623725182.574, 9648571041921.557, 11422167855489.762, 11214934463754.316, 10567303532949.678, 13762345136325.646, 11862947041869.625, 13024272810525.357, 12561262592836.572, 14993843320562.809, 11399616484369.584, 7835850889371.945, 14989085892517.867, 9796242021948.031, 11403836168272.045, 15011558144835.414, 8725013843426.961, 9323713694471.064, 8404655747838.652, 11061624481922.63, 11271702356155.639, 12583737062409.69, 12671582982066.613, 9609327087879.742, 8789156000358.781, 11301734237888.371, 9639702362442.336, 13309356478731.941, 12591723796698.912, 11391497722434.848, 11719802843536.059, 11583448150638.447, 12031163063724.51, 11207982709464.621, 10863194658114.633, 11515397207229.857, 11834343453545.867, 10045036429929.215, 12467587749285.188, 9692454167866.326, 11731286724143.023, 13534988836957.482, 8164615752269.161, 9481025890751.559, 9919968988633.525, 8521474652580.287, 9876895815999.656, 12317478116358.2, 10864995525987.053, 11051477471265.324, 12783432528602.887, 13751585136166.395, 10710551535542.482, 12671166778801.135, 10193834737790.543, 9863414220588.422, 11111021568496.156, 9304854654565.053, 9131847903268.95, 10094893642613.973, 12324389217215.867, 15839832145642.402, 10238086213780.158, 13178690148640.566, 9642445184667.248, 13339607593131.57, 10471301086941.363, 8499269912078.543, 13621342730202.703, 10378311212115.094, 10529499141962.998, 8544757185820.319, 9532795085900.367, 11842866325689.568, 10388767725342.824, 10837790854374.445, 11355964331982.57, 13744224426334.422, 11127054391493.25, 8155184884914.021, 13056326374814.04, 10542182724998.672, 13337888860243.168, 11061198555643.168, 10246960852251.996, 12804171498325.34, 12869718349289.61, 14009295504740.459, 10983074638840.002, 11199166160482.797, 12559606709775.227, 10152772929481.098, 12022814914507.125, 11003416215918.275, 11249759513057.578, 9708376871361.777, 8986069943943.094, 8208258714179.224, 9832470030382.1, 11146961547074.477, 11812964535440.916, 16082552701426.04, 12875722283695.7, 9739210654797.008, 11622441969631.686, 10380417305532.547, 10530683418070.14, 11467520238295.74, 13251085768690.549, 10818564605922.166, 12216769536688.395, 10076616954306.777, 11315520774458.197, 15208850517177.441, 11747837285705.172, 13998634019360.848, 11591979818156.37, 11048049752485.357, 11411970799363.54, 10406890199854.941, 9631417007644.953, 11889742654107.895, 10968778144085.887, 11610474091493.775, 13067306150842.805, 11590685056247.645, 11382612746709.236, 11724321195020.312, 10805176878158.89, 12095881246958.572, 9386303797033.938, 9768748528930.605, 8862722996607.223, 9184748901488.598, 13908950720945.37, 11770324701715.46, 9826563335477.27, 9595118915117.672, 9587500000000.0, 10210475019633.928, 15501498279570.252, 11999958406906.254, 10219023633760.402, 11650509727470.473, 8977696734685.918, 11159531325041.08, 11908953334866.314, 10238630124670.336, 12173164148792.73, 11036087562254.94, 12364368192050.893, 9851235614070.643, 13039709218554.895, 14431249835036.934, 8589834989589.957, 8668622946214.889, 13521298133325.37, 11769015312783.984, 13233628060226.867, 10100819643818.0, 14683579466746.96, 12007733708360.203, 10947369824243.086, 14595493834062.664, 10083745027645.133, 9372168432491.672, 9845119861047.363, 11099758700750.562, 9035175952772.883, 11335137336324.969, 10391277840717.781, 13302077468618.904, 8509930385415.43, 9637370574854.43, 8498177161255.423, 9244880424184.172, 12804914483188.107, 10720912636592.584, 10581451814718.5, 10305928961075.836, 12600536964510.38, 9251833895967.96, 12591479128814.885, 12666528661949.824, 11895034506278.543, 11185356775853.395, 12174948718045.025, 14198930762068.064, 11615242261618.953, 10229479735803.363, 9923713888768.658, 9893541907568.443, 10176498717102.22, 10183983331031.889, 11421386522138.969, 12284482216563.752, 10707599348195.379, 10539657801893.607, 12546496374295.99, 12269944143808.15, 10943352279344.045, 9888446231357.12, 11415481696857.336, 11469923841997.998, 8962456218613.736, 10850979088410.902, 11523091359794.516, 8685214067701.852, 11282724122436.332, 10024653738062.15, 14781143503302.053, 13404581252626.834, 10740485715276.656, 10407179012257.49, 8309124915225.938, 9878937675839.58, 10417730409344.06, 10230908109137.73, 13244188951653.254, 14226477060501.314, 9470555033024.025, 10934152939495.547, 10645183119382.094, 13706331664212.254, 8566789248691.85, 10989564276599.695, 16051059919750.332, 8678146422879.907, 8341351539739.385, 9858784709726.273, 9413477891879.072, 12713703252953.312, 11882156360850.719, 9277804315101.254, 12561373055777.207, 9440248416797.332, 13740886306987.72, 10063514294394.47, 10873832044617.922, 12713128486541.523, 13922756712519.332, 11282536981605.465, 8301618024020.629, 11728680820993.748, 9503869754929.139, 11084115868071.996, 8649660213312.736, 12152877544510.125, 9589693836416.299, 8881991766519.787, 11466490266958.234, 10247145423356.656, 11172091619474.71, 15006042695110.48, 11012471338086.814, 11600813110435.172, 11203798739332.492, 10561894780345.11, 11201603175765.86, 10356251887469.3, 9991454670381.617, 14092070051423.367, 10676879148153.506, 8093520517781.28, 13570053417405.818, 14790018648131.748, 9481690813418.295, 7860354357962.684, 11855968512125.074, 10898587790239.836, 10427209708794.078, 9451242845636.166, 11804949097561.422, 12135863145589.086, 8797427061020.994, 12290724267566.693, 15386837240397.008, 11901899923780.715, 11748040824676.738, 11188366663730.176, 12243743744424.63, 9816321123992.428, 11271178691459.113, 9345753742609.41, 15251426413021.531, 11043671396489.713, 14101348316173.098, 10038884165828.479, 11849030472668.68, 10423153214882.63, 10383861402980.098, 10996334413983.635, 12575510450991.86, 9476489818835.25, 9301266583373.344, 9757590076647.762, 10633314167654.676, 10365753736281.012, 11632719036496.863, 9062733280162.63, 9952010003060.445, 12282190037542.943, 11209112636620.174, 8300445032221.73, 11484031210721.32, 12404791937055.047, 9149649362439.422, 9723255709640.77, 11866599385706.738, 11956211370259.293, 16406000000000.0, 12405678779405.395, 11657761409161.352, 11188467972707.742, 12202261528472.734, 13640603073194.887, 12803860062218.43, 10244601127021.79, 10851225606084.984, 10627011604932.555, 12941120832321.812, 13391484654564.758, 10246376273750.121, 11145135671436.32, 12387867573971.406, 11019949992413.094, 14093767574730.271, 9178839442566.512, 10436574600935.535, 9048759111908.492, 8803268494184.559, 9774607056548.01, 10810660960233.613, 9347446620954.883, 13008508179060.41, 10815679013510.96, 8965522873175.28, 10463493081551.012, 14446552338065.045, 9947637919051.047, 10874138658038.465, 11983715354134.473, 9941208351761.74, 12039943494884.254, 10793179251943.121, 12971192983464.312, 9999829242711.521, 11516258046506.168, 12053620769549.68, 10226857830616.062, 8519942159263.105, 13218882500641.176, 10600754728581.627, 9453171079530.629, 12129147120402.902, 12477055597517.438, 9153283095229.0, 9516118917101.062, 9185489091372.514, 12544642360296.219, 11569551607972.61, 10795127847553.062, 10214217226514.053, 9698268125445.93, 13184125285483.557, 11463029841458.75, 13462352608188.148, 10452389707218.783, 12022335985535.494, 11138924707826.998, 12437711376856.59, 12655705039880.154, 9126540879357.54, 8221127116051.832, 13351001154943.082, 13303735172232.896, 8845560946204.387, 7844288735351.689, 12229371377691.834, 11373383094818.992, 14218408839950.684, 11084384666998.145, 11770827091590.748, 10141234806642.572, 11413744591627.557, 10151028280892.062, 8845636567775.473, 14894649312491.242, 14320424724460.102, 12381720761269.379, 9099202307982.326, 11853534270693.537, 11454535383579.895, 11467846548329.814, 13665194995120.648, 12671464129985.414, 12422658121989.963, 12369942913413.055, 12167028151817.652, 7828729334672.51, 11445715496152.016, 11256560274305.96, 8046334230933.697, 13981923323289.56, 15321532749294.33, 13422313809820.312, 12070240370654.43, 13825378655021.516, 10429600887388.287, 10853659661575.027, 10587560207263.623, 12522032460540.018, 11176076618231.545, 9120424054637.016, 10539238222610.223, 11309711130852.387, 13751024493803.133, 12464292426125.379, 10746604301395.66, 12189569411130.0, 11120408991531.906, 10916430161711.195, 8880055229505.562, 10484174989440.943, 10084561102626.602, 8503714518842.764, 11871329889929.572, 11812118820728.96, 8114938409585.839, 11750685623087.21, 13237801306352.822, 12928746000358.676, 12459973838202.896, 10229763376704.867, 10494690435583.512, 9240126355389.46, 10826271830323.271, 11290662198093.426, 13844275013547.578, 13324288444133.77, 10259628505633.418, 10093672395561.951, 9790515856163.582, 12663620109206.936, 10957669431091.39, 9985728450516.674, 11397310568741.66, 10396368707536.969, 10523782135536.492, 10579654526519.287, 10024495369287.23, 11598928939427.363, 12596326161534.668, 10223693386493.96, 11582472564666.895, 14747898718846.807, 8951463433640.885, 8584327358478.523, 9339051660196.48, 11970132812897.742, 11058111869342.465, 11329007156291.398, 12944295328923.41, 7886035514804.112, 11741231963855.613, 13772137029736.52, 9162189572654.908, 10921362473598.043, 9818372280567.932, 10017374732680.834, 11176128305143.68, 15243352849561.129, 14346726927882.158, 11523351127586.555, 14781422116023.502, 11418146834992.775, 14201585405395.031, 11092702807449.498, 11208541811244.723, 12596883826279.02, 14094790406476.42, 11635983847158.562, 9704052990052.152, 12404279624724.258, 10216943255168.604, 10271774255865.361, 12366566510314.879, 11092026275129.074, 11249707731251.258, 11480048103422.148, 13069322901567.297, 12039292428830.297, 8334800064598.506, 10895005678588.35, 10760757559509.672, 9262048075744.7, 10938675845280.707, 9994220738467.701, 9983055676411.234, 12730791162631.227, 8915745584397.936, 9704031010701.902, 9419468806189.166, 12349174057320.623, 11697893884011.36, 9284466786937.13, 12456964302929.742, 11233241892966.344, 7942415671214.975, 9148967198130.078, 10996623834165.586, 10866746541006.186, 12186867973150.82, 10286861192274.54, 11004321798854.082, 13114950872690.29, 10079875382613.291, 9051992241434.162, 9168068586243.805, 12140702915896.32, 14886490993504.412, 10503622257024.117, 8196075271900.647, 8284348285538.119, 9758887674206.246, 10869716726908.855, 11707404542659.82, 10997608439306.086, 10693339611161.09, 14515868126772.842, 10282289002909.506, 9944520823764.67, 13268802736760.215, 9059367588209.355, 11148683687853.523, 12315560304887.11, 9960689723907.283, 14972630341827.354, 10157913873422.21, 14451610482016.406, 10562425690711.2, 9200135035615.443, 10961051083446.98, 9804796579090.543, 9715135435235.994, 10645820421099.398, 12116162045562.904, 10859766381501.844, 11616310248347.41, 13212461246931.129, 13319437706768.512, 12856257898981.363, 13355178655483.348, 9107955879230.467, 11105593124654.426, 10260007461520.629, 12655554201794.184, 10093311795490.404, 10917419497455.14, 14924352062267.547, 10933325784450.527, 11671088328164.969, 10200593202808.848, 11284786173994.184, 10241867261521.244, 10672151926010.41, 12397267220650.307, 14716149590223.129, 11854972676675.656, 12735792606082.727, 9036186612954.04, 11824378354332.057, 11855494595813.33, 11914599635764.217, 12343861060420.053, 12862513211007.953, 12554986648115.89, 13494268662767.002, 11248061984472.146, 9853605573634.787, 10593055965884.598, 9587500000000.0, 10772469265700.215, 9500829016856.338, 8862845877016.309, 12138003219551.344, 12131179905235.514, 9769711042809.47, 9558062451808.873, 12106320876129.05, 10006378088284.176, 15170025549988.336, 10457802160312.65, 12753285574520.84, 13914016796851.531, 10620205386696.691, 9699410031786.73, 11289951246307.406, 11473354586643.982, 7914770294044.288, 9209146297405.477, 10719850945181.623, 11785879794543.934, 12026250548213.451, 11560453117958.059, 10230788076200.988, 10852384838583.299, 12841609654365.406, 9367015005465.393, 10474445877510.064, 14619506576351.254, 9787307395727.652, 8695390648004.789, 11988063850687.764, 10629397646092.545, 8137648639265.487, 10927770155448.566, 13866302653840.758, 11981430913985.867, 11779560757899.617, 8599634156429.375, 10920861620815.66, 10278563212004.406, 9973455698977.748, 12517791964882.178, 14224178922671.973, 14278316183246.83, 14226019042833.57, 10759176390921.871, 13100603503072.943, 13167024902644.984, 11515346668037.998, 11744051385703.664, 12191016368295.191]  # Truncate for embedding
baseline = 11355100000000.0
mean = 11300945615503.97
std = 1684177443585.8596
p5 = 8739708948119.352
p50 = 11170655644616.531
p95 = 14326765961262.895
display_name = "Total Annual Cost of War Worldwide"
units = "USD/year"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from
output_path = get_figure_output_path('mc-distribution-global_annual_war_total_cost.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 1.136e+13 |
| Mean (expected value) | 1.13e+13 |
| Median (50th percentile) | 1.117e+13 |
| Standard Deviation | 1.684e+12 |
| 90% Confidence Interval | [8.74e+12, 1.433e+13] |

*The histogram shows the distribution of Total Annual Cost of War Worldwide across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
