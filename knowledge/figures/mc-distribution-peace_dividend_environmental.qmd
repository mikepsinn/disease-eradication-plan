```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Annual Savings from 1% Reduction in Environmental Damage (10,000 simulations)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [1039034969.204601, 818770911.8606713, 1124416176.4620864, 1162934704.7668, 700000000.0, 781605908.1575766, 1006979024.6983346, 930787513.6441926, 981501593.1957065, 846343141.6418929, 1150399988.3287518, 1129876075.043009, 996011812.5321043, 1202040542.03213, 1069439403.5773592, 845406703.1068391, 1050889915.5587298, 830620688.650783, 1150206851.0468328, 975758249.0326512, 952707476.9450333, 872548920.2013283, 1222508718.056936, 957841238.4174312, 912485923.4253107, 924887534.657749, 1081788081.71605, 1050274423.6589463, 1059110801.5240024, 1062510437.193751, 1400000000.0, 916035384.4945035, 899020009.7509842, 852252323.0183023, 1097943979.8497796, 1202409264.1942558, 964752930.8723767, 848277800.2584559, 850636925.7181908, 1104697827.9687688, 1122983334.940469, 1083868675.5594854, 874935950.2607312, 1025763818.5442746, 1004990916.2857803, 1023318251.4460117, 1148776863.907805, 1024208284.781353, 1110254741.0604703, 996285084.001624, 1036167589.5374722, 1100925964.931537, 760436952.4945031, 930222272.907398, 905713919.8578104, 879074018.8304776, 937590085.0082005, 1282955891.1324, 844427895.4124694, 1168658847.6224825, 730626968.576805, 927718271.3851835, 1013227041.6180472, 1092170717.7075176, 1116629134.0881152, 1132994266.1456194, 925446230.6219287, 907001919.1615257, 1146042042.51516, 951620739.0366105, 785283271.8157145, 805347317.8497356, 836443675.2943883, 1075072375.8674011, 1009584536.0361912, 1112533316.6021698, 912659760.3272412, 1012470958.3267876, 1099815145.426062, 931925432.7610718, 1067407495.5292073, 875491660.9621112, 923099819.9192857, 920049144.8783739, 796471302.6552111, 1073133540.6629165, 905869636.7238324, 986609125.199918, 1071950483.0261319, 1065471950.3379332, 1107596799.7689102, 967399425.1516552, 913299391.1280165, 970621415.0604286, 730049261.7412502, 761791278.1065263, 778769471.1211666, 824994050.2086399, 1056682018.2106373, 838516994.4828908, 920632134.5640057, 1239232022.5285242, 924210954.5151643, 1121842156.2413282, 834347075.9720528, 949240849.8596593, 831925654.3576344, 927036725.6055212, 1142460277.8885891, 724895581.0718248, 1063188840.0836705, 1026777369.3325081, 886067940.2662923, 761933631.1338506, 997088622.8393958, 896276607.9590656, 1025857396.8422476, 988246259.965642, 1307471771.4509695, 943553653.3607764, 821166009.6087769, 1016197442.9422585, 1023555439.4387527, 1252466682.2823648, 1141408849.2933147, 1048680376.9664246, 1275784476.7392077, 797470523.464374, 878937955.4020615, 835388655.731708, 918734308.4551871, 771356130.0521599, 1101679658.852469, 946422137.8473421, 758600072.2302212, 822318848.5717582, 1040655609.7782264, 1142018787.5636978, 1400000000.0, 1400000000.0, 1059425494.9959807, 826121569.3851918, 700000000.0, 1032244968.0993198, 852377904.8501891, 914585245.2193304, 883255004.8328823, 960175553.5209653, 1189064470.023316, 1012203513.7441641, 957144802.348551, 819399327.9566327, 731687494.4185239, 903160442.1304425, 975091752.5045165, 1346532306.7855544, 1007413385.5738221, 1171656920.5507464, 901084610.2610675, 798010330.9786652, 829703759.2288556, 865727869.7785954, 1400000000.0, 851103428.0717716, 1142092163.3671734, 838896191.3817682, 1161083534.4986012, 1053910531.2284697, 957483501.6488649, 977343673.9760854, 876599592.9466017, 1065385312.4394821, 908186745.4538583, 792281991.6094534, 784970117.3592083, 1014994088.1933414, 1302226790.2734914, 1012731439.7839289, 963951467.1894748, 1035563189.9592829, 1240720073.2228727, 1023444066.3666917, 915303363.8303058, 1197586605.7395144, 1062121860.1078465, 1292266846.7697666, 1016910442.3428056, 792441570.9129721, 772522326.199544, 1318906729.2326632, 1336013597.9648547, 953609790.5065458, 919812908.597968, 1275364440.803202, 809100307.0179769, 840115857.5135341, 1103276632.165193, 917954086.8532846, 983534660.852408, 956329802.2957006, 1045101269.9012405, 1263229257.4385257, 1000354218.1552511, 1103396265.808346, 700000000.0, 975967021.88653, 847815962.4774032, 793236058.3007456, 842586536.7628183, 927843458.9464263, 1157864410.5040035, 778260077.517478, 989784627.6460503, 903502694.4919426, 928904423.4926594, 1175819794.7690992, 1082901494.9400866, 1247640877.7777107, 957845277.8259993, 870231116.2520646, 946147833.9454858, 1027643871.8614533, 1015711037.005477, 812354800.3564934, 1000337358.7980789, 1025049298.8854924, 1400000000.0, 1372768157.9870045, 846313239.0410696, 935558860.6233293, 759590498.6469744, 886608600.0974228, 1041041238.0701135, 1218899592.4539347, 865136356.3271418, 876699191.2379851, 700000000.0, 956461458.4716244, 815523556.0417377, 896285068.8697276, 842779370.6729326, 968123489.4825395, 721000751.5311378, 759105735.6437709, 1400000000.0, 783652100.8165178, 810572429.161662, 1363090553.0281324, 1400000000.0, 799903901.1482692, 922250564.1168717, 1045838662.7095368, 1337205206.1199453, 826514074.7600021, 942564148.0119325, 1129785123.9836755, 1063253344.8045685, 920959470.5201076, 961361641.6580956, 771600841.3816352, 943751250.9690268, 939045507.609922, 1025765375.4025736, 892183589.593371, 1070203103.6775124, 1177896097.4761903, 1011913170.5481329, 1047730521.9724671, 993742348.9186597, 984442294.8660872, 866290665.0814972, 1041205268.6840316, 967604931.2985702, 1400000000.0, 1300903982.2026155, 1054077771.4206151, 859944630.1488695, 808331487.2211678, 1215726889.3635519, 1031337848.9344077, 1071835919.1340324, 722681532.8197788, 1160233325.6125524, 1066962242.4366997, 808615212.8383069, 905529056.0583973, 1031514737.259589, 993621128.0915239, 934765592.3701919, 966542347.7839133, 941446017.1844782, 1011399330.8461697, 1277636824.635228, 700000000.0, 943972570.9423722, 1015700071.101987, 1037430394.6192847, 921651806.7999479, 721129348.3259982, 1043329089.3530415, 1336886017.4591954, 750172461.0497065, 1147230913.7096126, 928764194.3060019, 973789710.3900269, 816899648.2205384, 927788763.5249764, 1239411259.307207, 1091480696.8238251, 1338061682.7343736, 1212772913.1028445, 1064067566.0785323, 1340819932.5182858, 1064049935.5254194, 1139969290.7729697, 934037212.1342784, 996102717.2089996, 870002772.2123739, 1173078580.1823843, 798949700.3515381, 1130788956.190583, 951730886.6128309, 1211449010.7488415, 1124499410.158658, 1359167616.155806, 1120503146.2703419, 745115251.9875759, 972819062.9926628, 799841466.655459, 898058925.6654065, 1286663362.234157, 1102144860.477425, 869770574.9457461, 822590129.9345312, 990161833.2077534, 793552743.7523813, 874063567.7070264, 1040378277.4711652, 1208033616.8488607, 1096540806.417271, 700000000.0, 1038970475.8973665, 997071675.5695355, 1059328055.1710603, 1310818902.269625, 700000000.0, 886546333.1495202, 1093077455.6324537, 743855042.7720798, 1278646132.8260248, 1050816528.0587876, 1143731290.8075652, 889718511.8379183, 1137099980.1392035, 1189589430.5123558, 1025894076.8791494, 1026170910.9999018, 1032726392.44566, 844799882.8220688, 959030029.7336919, 958181883.5271547, 1053619824.0359825, 1175208823.8320608, 816084120.3170706, 962864059.2986847, 1279894185.142484, 862916008.0191888, 850973253.8593277, 1020352374.0035542, 1143285820.0838783, 986422446.0049765, 1245777183.6836774, 1145802087.254771, 1142766351.3977027, 1085975810.9893115, 1400000000.0, 949287246.3232572, 700000000.0, 1308045333.2353027, 907749839.9793018, 1003424288.902804, 1241500450.0025575, 741136558.3703097, 788634969.4339316, 741265462.6207585, 855222494.5588688, 1064171244.9874307, 1080232644.2171688, 1033812147.7275854, 766441103.1514484, 700000000.0, 993953336.970231, 905488751.6475159, 1067901299.9904801, 1114796122.2084873, 1008836366.718916, 1126346609.278927, 1025227845.024477, 1081357984.6117387, 868886060.3222401, 953594213.0838856, 1019353145.0960628, 1138463645.8050268, 918094606.8302345, 1079654698.037706, 939136800.3293068, 964138693.0140806, 1140278522.4325557, 700000000.0, 782396630.1936778, 757072231.2963837, 700000000.0, 872961019.1127739, 1124213534.089558, 935973222.4761422, 1019536288.0750278, 1193969929.2884767, 1245495921.1589913, 972442578.5241771, 1251224273.91373, 1000627507.3468819, 848692442.2542452, 886028632.298584, 757293431.7602671, 841097790.3068417, 923924001.7408938, 1135051210.5657191, 1335328304.7710764, 770605483.9357544, 1055382284.9640906, 818689704.7158796, 1070802166.8438056, 961827820.8826336, 711713321.1646607, 1160409815.0308704, 884366155.542441, 895576987.2488852, 814463992.8885019, 876677937.1427529, 1061958910.7151798, 951968116.7340012, 1043452301.678738, 1049619218.1632118, 1243946815.6042647, 926420507.0946529, 757787167.4669286, 1189326188.6852236, 928276766.1715517, 1199349778.3581185, 1053616697.0682138, 961819150.5993192, 1047177399.7666856, 1390926030.0680616, 1400000000.0, 996603224.1726434, 1012767142.8701079, 1191227882.781679, 847450918.2024733, 1044267597.5211023, 979927078.942834, 1040728323.1722043, 849298539.9286747, 742805008.6231173, 700000000.0, 807619650.7240648, 907592909.0956215, 934596614.7402588, 1387533980.8279233, 1197523942.4764888, 830148649.0903019, 1046979375.5702292, 915927753.0250493, 936059494.9777312, 1017287281.6609157, 1098565019.3513505, 926999704.2339375, 1188616104.1855671, 804113894.1224085, 985533811.1324286, 1400000000.0, 1024114690.3738956, 1269001597.7244747, 1000519994.4116625, 1091117561.706523, 974573502.3965492, 955150470.3998847, 857445758.25331, 1062412620.244095, 846569104.5965097, 1107636072.4688416, 1193138770.3656616, 1050476774.9961078, 935746949.5406024, 1066876280.1991507, 932036639.0665761, 1161901342.733212, 711650243.5657121, 927599551.4076179, 700000000.0, 755347192.6002307, 1253504426.9428575, 1153622178.1548731, 866609629.555336, 754351829.7137754, 700000000.0, 894055788.5410717, 1400000000.0, 1063275610.8295004, 891512824.5227689, 1068979243.514863, 746579650.047052, 933912707.8628201, 1001931531.6431183, 969524466.9340638, 1132484291.0578628, 1046411315.4575652, 1108174059.6700819, 871399096.8051044, 1154159934.9461756, 1313778021.737312, 828964272.4887497, 841163092.6408517, 1247284209.574064, 951614052.0587848, 1262410277.8797517, 910191866.4617113, 1273919413.9105937, 1007629607.2881775, 1030512193.1232648, 1298914844.3893304, 923309735.4495276, 833238488.6529018, 909220227.3899187, 1066567913.4386203, 745944914.6586896, 1102132576.5064075, 894804421.10003, 1206429593.933255, 700000000.0, 856370359.4348246, 730161319.0250636, 850373489.4164064, 1028585441.0183382, 953659225.3500148, 941212497.3900168, 957051532.5082529, 1020548003.165953, 823345602.3002372, 1115763556.5034897, 1107063337.9137096, 1053926770.974939, 1086440940.8374279, 1037508332.2989446, 1400000000.0, 969353822.6395087, 932299207.0402712, 861397772.3660935, 819891774.779332, 789638186.1949946, 840998928.0942506, 972176867.3622203, 1044494220.2156192, 993387945.8989044, 859567159.4270409, 1154644492.8418558, 1122219285.9876268, 956972954.2780104, 876890309.542423, 1084881854.1997514, 1017764644.1159979, 761654326.607514, 972642054.9175882, 1031207499.3904037, 839376755.675395, 1018101862.0315235, 760751383.1989872, 1247372995.9870727, 1228024490.4347312, 941355957.9935064, 1049904242.2745905, 700000000.0, 802063651.830168, 934499366.5952332, 814120542.8839868, 1117256429.0627084, 1400000000.0, 799188802.9207464, 848682641.514796, 1026361368.8432295, 1309636512.0461917, 792735720.7379502, 1028835175.6172844, 1359324797.9125178, 734665252.0926154, 784534707.371714, 913249507.054541, 897691682.177565, 1136865824.1322093, 1027491477.8482059, 718802661.1882485, 1078554062.6089904, 888679492.7361598, 1233803085.8478832, 880834213.7443738, 879426477.7689363, 1083480331.9672618, 1126904189.203466, 1065768021.0157008, 730273982.3516934, 1082885954.9720998, 819594712.8328596, 1026330045.7393248, 764953109.4549922, 1065432492.3987356, 853336224.6609746, 784317144.7650065, 1117142349.1900876, 1027488711.1413608, 882960856.0116657, 1273046981.713943, 910495617.3978256, 990043527.7133031, 1032464816.408976, 882071319.8572476, 1070126839.74234, 895648057.4654026, 915188056.196499, 1253233602.5649977, 818683596.2452179, 700000000.0, 1309594943.5711296, 1400000000.0, 916221353.8963201, 700000000.0, 931737648.36602, 935751224.1835786, 951853517.7622833, 808191641.165863, 1090882524.5926614, 1080293800.28236, 755434882.0930027, 1114251739.2972615, 1400000000.0, 1014881236.7640992, 927317284.1810597, 959969339.0776938, 1097803414.36339, 724465312.5946645, 1013521065.4910628, 918627836.652914, 1365728240.6133757, 954513521.6667264, 1322875712.7508066, 809574214.8235145, 1092371365.8745685, 1041741483.7751439, 843946870.3807405, 1015859107.2943143, 1220339828.0871742, 929543426.0559794, 729450874.1093853, 981369152.054553, 838971116.0561903, 926493585.2016438, 970299966.1102105, 727683802.5580554, 739379267.5270782, 1072201239.6974089, 897352933.5412169, 700000000.0, 1131288663.4251812, 1033097250.9324886, 867470705.4883494, 779579729.4326836, 1141549738.5478907, 1047284034.8370289, 1400000000.0, 1060510802.6066015, 1054424551.9711583, 955739498.9006199, 1137706981.979796, 1099716709.804859, 1228846102.6240869, 897574869.7349547, 911342095.7247951, 904314042.1796753, 1132483408.1201231, 1283736491.7422934, 907566344.0046698, 913060683.7927034, 1040759487.4753232, 942483383.2159779, 1165304289.2364762, 700000000.0, 850301840.3647128, 857000164.0342631, 700000000.0, 829921100.7496479, 837080585.8011212, 949969832.3084875, 1199004200.0902526, 942600419.3470687, 820102278.9523962, 974543916.8905523, 1185529106.9540722, 828111504.6393895, 837760291.2543036, 1086828970.5420053, 946537270.4340097, 1104089674.128911, 982050273.4822257, 1114738849.9269931, 819482900.3310094, 982322110.7509108, 948357908.6893717, 793646839.2458047, 746246450.1364927, 1111600133.8778033, 925081106.0103105, 821343117.7792932, 967794839.0485812, 1202206167.976151, 700000000.0, 755136062.9454759, 835934907.5874449, 1275304466.9826715, 1034969063.5029877, 1127781170.6069598, 804367140.5594693, 807311819.031446, 1065714085.2770836, 994644022.6413497, 1084941613.75075, 952233518.143614, 1034154635.3804656, 1012395512.1951032, 1129871161.309171, 1135739834.8251095, 738827496.2437603, 700000000.0, 1175608902.4515636, 1214990930.1838646, 821584316.2409781, 708074760.1493765, 1001852957.727315, 1160932390.35524, 1353627955.649248, 1078723604.6669827, 921684120.1310147, 840353506.818312, 986426856.4384139, 933591542.7145755, 822393326.0334733, 1400000000.0, 1350651140.6908293, 1203917715.6639307, 836236508.6837463, 1145441881.1940525, 1102553556.1726606, 1064719856.378888, 1228397743.5921762, 1101722639.0357878, 1122338898.7874036, 1102022330.526091, 1045697081.7530026, 717702031.2363411, 999120747.0161003, 892046910.6950876, 784705449.5631285, 1326144375.9423013, 1337275736.8135736, 1252474010.628054, 1029961793.7443067, 1250568097.4173656, 986532052.4669265, 1020441155.1489683, 811048524.6247905, 1056161143.5048916, 995016204.3265545, 781540464.5132575, 975538512.4138914, 970619462.7309296, 1353619956.1242127, 1153423599.5023494, 986425833.6002972, 1028789822.8929362, 992169067.2679144, 949665356.3541898, 812637071.1937491, 958431578.7523717, 862532348.9716724, 788821058.3533007, 1077753964.1976929, 1055090105.0639706, 717308413.6585556, 963260664.9274461, 1174350699.7809274, 1187641939.1752312, 1180637511.2244465, 991237992.1491747, 847543367.9487926, 812454007.0002481, 1046403840.0935547, 1052852167.4909375, 1236622661.3561518, 1196248705.2596548, 961633232.6070786, 789675388.1641397, 930315332.073083, 1023054053.8073163, 949805141.9143906, 888623565.3234932, 1029536957.3450506, 900340620.8703287, 880759535.2475352, 1040275679.9027048, 916753408.4398509, 1027936608.3154358, 1033249963.0896169, 804471453.9043214, 903971566.2033085, 1270027791.0393865, 801249550.8403124, 700000000.0, 707822680.3391085, 989517842.1573095, 989834744.8390797, 964126959.899888, 1220701166.7335954, 700000000.0, 1055963293.4828032, 1298160274.5553663, 806133388.6308147, 920364027.3623914, 861494789.8851281, 840172565.3191063, 929136683.6811388, 1267714141.6084535, 1363204823.520267, 927545014.113552, 1379647825.4581451, 990652170.2908424, 1343139648.86809, 968288836.6796929, 1007553203.6938765, 1050280082.0211048, 1400000000.0, 1144684404.0463092, 868487246.4441557, 1168807835.4000201, 923299583.5052878, 902609795.6852796, 1156367606.3258927, 989864261.9167374, 1034233825.2842543, 986869803.6456512, 1044917711.6914254, 1061408802.415948, 700000000.0, 1107829865.14112, 827222781.4668165, 762441201.8304678, 974292432.3890706, 999184461.7497439, 870606850.0624634, 1140584190.5184634, 776086940.8808466, 915949577.4850882, 887525314.9687127, 976335593.8918408, 1034286666.7744315, 823439417.9255986, 1119215081.4743965, 995477560.7020373, 704057860.1535711, 700000000.0, 982281274.5014255, 946632662.5679107, 966554018.9146254, 979559150.9540291, 1024564788.9145489, 1164395388.5223794, 808518627.7032999, 799846511.4849713, 811069721.727303, 1036130372.7890397, 1227371382.6403418, 911999174.6531824, 700000000.0, 727897766.3978615, 849348510.5720695, 891804038.8265275, 915715131.7986319, 991179673.4330838, 931529284.9836794, 1185563972.2315621, 873308639.5588518, 844953658.5619106, 1071595179.5851825, 749935831.0622793, 1054796109.9105926, 1002477662.61672, 959044674.7199881, 1304347626.2565405, 881674226.2527436, 1400000000.0, 945884248.9735643, 785098233.5820378, 996698302.1623068, 813527621.0264158, 861668208.6843212, 1056169001.8242303, 1086257833.1150532, 881680434.7652626, 1172625835.3406885, 1208503657.887234, 1269695898.5550337, 1081233211.9500506, 1253408152.5032918, 705449806.2085259, 930513152.0045911, 844252251.7596475, 1005443290.0508434, 889638822.7551517, 955869906.995771, 1374065177.008209, 955266868.4583939, 1059309668.3478856, 944739022.4099661, 997721920.6096617, 985477521.9741117, 1065810451.0401876, 1210174845.6185772, 1318081201.6528769, 1039937944.4312578, 1092814215.2037573, 802843203.5930742, 969219431.3518517, 1162877993.494421, 1147666093.4594293, 1022035634.6710914, 1151826784.1981745, 1073855176.5820882, 1217702201.3457828, 1036211605.2526014, 924303581.9899148, 1044780378.3109802, 700000000.0, 1053524975.1077216, 700000000.0, 725391111.3648734, 1066461086.9692634, 1071339624.8721766, 801199970.7442871, 867743209.7746946, 1254988562.42454, 903524993.5419289, 1400000000.0, 984092785.204863, 1058229906.899915, 1310973285.4197822, 1007547721.6881652, 824249357.0701437, 965474514.1800736, 978236154.2246065, 772990225.0436034, 940803282.2803371, 863129481.7990175, 1159600222.2711527, 990482881.7559074, 936319588.42109, 966081183.7897427, 1024122361.1057967, 1098106376.7650542, 824633771.5865463, 818538332.1811583, 1197245153.8714116, 915074796.3673395, 765887787.021662, 1064958904.2368946, 1068655353.9302515, 750590730.5596671, 1025276951.4375756, 1121458125.0744581, 1051939734.4298725, 1101061195.4057484, 767595766.3746, 1043892044.5225296, 933036760.5364887, 903723509.3038535, 1148599160.7663686, 1279399705.8235629, 1352854868.8454494, 1242657354.4560673, 965473362.9916164, 1047909437.5248892, 1127682394.5445704, 1005791088.0323185, 1007500787.6678833, 1139114257.147042]  # Truncate for embedding
baseline = 1000000000.0
mean = 997289096.3440859
std = 169962760.99941155
p5 = 731763912.6266211
p50 = 982133669.2957271
p95 = 1316994814.3990946
display_name = "Annual Savings from 1% Reduction in Environmental Damage"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---

# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-peace_dividend_environmental.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 1e+09 |
| Mean (expected value) | 9.973e+08 |
| Median (50th percentile) | 9.821e+08 |
| Standard Deviation | 1.7e+08 |
| 90% Confidence Interval | [7.318e+08, 1.317e+09] |

*The histogram shows the distribution of Annual Savings from 1% Reduction in Environmental Damage across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
