```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Annual Savings from 1% Reduction in Refugee Support Costs (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [1558552453.8069003, 1228156367.791006, 1686624264.6931283, 1744402057.1501987, 1050000000.0, 1172408862.2363641, 1510468537.0475006, 1396181270.4662879, 1472252389.793559, 1269514712.4628384, 1725599982.4931262, 1694814112.5645123, 1494017718.7981555, 1803060813.0481937, 1604159105.3660376, 1268110054.6602576, 1576334873.3380933, 1245931032.9761734, 1725310276.5702481, 1463637373.548976, 1429061215.417549, 1308823380.3019917, 1833763077.0854025, 1436761857.626146, 1368728885.1379652, 1387331301.9866226, 1622682122.5740738, 1575411635.4884183, 1588666202.2860026, 1593765655.7906253, 2100000000.0, 1374053076.7417543, 1348530014.6264756, 1278378484.5274527, 1646915969.7746687, 1803613896.2913828, 1447129396.3085642, 1272416700.387683, 1275955388.5772853, 1657046741.9531522, 1684475002.4107022, 1625803013.3392267, 1312403925.391096, 1538645727.8164108, 1507486374.4286695, 1534977377.1690164, 1723165295.8617063, 1536312427.1720285, 1665382111.5906985, 1494427626.002435, 1554251384.3062074, 1651388947.3973045, 1140655428.7417538, 1395333409.361096, 1358570879.7867146, 1318611028.2457156, 1406385127.5122998, 1924433836.6985986, 1266641843.1187031, 1752988271.4337225, 1095940452.8652067, 1391577407.0777743, 1519840562.4270701, 1638256076.5612755, 1674943701.1321719, 1699491399.2184281, 1388169345.932892, 1360502878.7422879, 1719063063.772739, 1427431108.554915, 1177924907.7235708, 1208020976.7746027, 1254665512.9415815, 1612608563.8011007, 1514376804.054286, 1668799974.9032536, 1368989640.490861, 1518706437.4901805, 1649722718.1390922, 1397888149.1416068, 1601111243.29381, 1313237491.443166, 1384649729.8789277, 1380073717.31756, 1194706953.9828157, 1609700310.9943738, 1358804455.085748, 1479913687.7998762, 1607925724.5391967, 1598207925.5068989, 1661395199.653364, 1451099137.7274816, 1369949086.692024, 1455932122.5906417, 1095073892.6118746, 1142686917.1597886, 1168154206.681749, 1237491075.312959, 1585023027.315955, 1257775491.7243354, 1380948201.8460078, 1858848033.7927847, 1386316431.7727454, 1682763234.3619914, 1251520613.9580784, 1423861274.7894878, 1247888481.536451, 1390555088.408281, 1713690416.8328824, 1087343371.6077366, 1594783260.1255047, 1540166053.998761, 1329101910.3994377, 1142900446.7007751, 1495632934.2590928, 1344414911.9385974, 1538786095.2633703, 1482369389.948462, 1961207657.1764529, 1415330480.0411637, 1231749014.4131644, 1524296164.4133866, 1535333159.158128, 1878700023.4235458, 1712113273.9399707, 1573020565.4496357, 1913676715.1088104, 1196205785.1965601, 1318406933.1030912, 1253082983.5975611, 1378101462.6827796, 1157034195.0782392, 1652519488.2787025, 1419633206.7710123, 1137900108.3453307, 1233478272.8576365, 1560983414.6673384, 1713028181.3455458, 2100000000.0, 2100000000.0, 1589138242.4939702, 1239182354.077787, 1050000000.0, 1548367452.1489787, 1278566857.2752829, 1371877867.828995, 1324882507.2493224, 1440263330.281447, 1783596705.0349727, 1518305270.616245, 1435717203.5228257, 1229098991.9349482, 1097531241.627785, 1354740663.195663, 1462637628.7567737, 2019798460.1783302, 1511120078.3607326, 1757485380.8261185, 1351626915.3916006, 1197015496.467997, 1244555638.8432825, 1298591804.6678922, 2100000000.0, 1276655142.1076565, 1713138245.050759, 1258344287.0726514, 1741625301.7479005, 1580865796.8427036, 1436225252.4732966, 1466015510.9641268, 1314899389.4199016, 1598077968.6592221, 1362280118.1807864, 1188422987.4141793, 1177455176.0388117, 1522491132.290011, 1953340185.410236, 1519097159.6758924, 1445927200.7842112, 1553344784.9389231, 1861080109.834308, 1535166099.5500367, 1372955045.745458, 1796379908.6092703, 1593182790.161769, 1938400270.1546485, 1525365663.5142076, 1188662356.3694575, 1158783489.299315, 1978360093.8489935, 2004020396.947281, 1430414685.7598176, 1379719362.896951, 1913046661.2048016, 1213650460.5269644, 1260173786.2703004, 1654914948.2477884, 1376931130.2799258, 1475301991.278611, 1434494703.4435499, 1567651904.8518596, 1894843886.1577873, 1500531327.2328756, 1655094398.712518, 1050000000.0, 1463950532.829794, 1271723943.7161038, 1189854087.4511175, 1263879805.1442268, 1391765188.4196384, 1736796615.756004, 1167390116.2762163, 1484676941.4690745, 1355254041.737918, 1393356635.2389884, 1763729692.153648, 1624352242.4101288, 1871461316.6665647, 1436767916.7389982, 1305346674.378096, 1419221750.918228, 1541465807.7921789, 1523566555.5082145, 1218532200.5347393, 1500506038.1971173, 1537573948.3282375, 2100000000.0, 2059152236.9805057, 1269469858.5616038, 1403338290.934993, 1139385747.970461, 1329912900.1461332, 1561561857.105169, 1828349388.6809008, 1297704534.4907072, 1315048786.8569767, 1050000000.0, 1434692187.7074356, 1223285334.0626059, 1344427603.3045905, 1264169056.009398, 1452185234.2238083, 1081501127.2967062, 1138658603.4656556, 2100000000.0, 1175478151.224776, 1215858643.7424922, 2044635829.5421977, 2100000000.0, 1199855851.722403, 1383375846.1753063, 1568757994.064304, 2005807809.1799166, 1239771112.1400025, 1413846222.017898, 1694677685.975512, 1594880017.2068517, 1381439205.7801607, 1442042462.4871423, 1157401262.0724518, 1415626876.4535394, 1408568261.4148822, 1538648063.1038597, 1338275384.3900557, 1605304655.5162675, 1766844146.2142842, 1517869755.8221986, 1571595782.9586995, 1490613523.3779883, 1476663442.2991297, 1299435997.6222448, 1561807903.0260463, 1451407396.9478543, 2100000000.0, 1951355973.303922, 1581116657.1309216, 1289916945.2233033, 1212497230.8317509, 1823590334.0453265, 1547006773.4016104, 1607753878.7010474, 1084022299.2296674, 1740349988.4188273, 1600443363.6550486, 1212922819.2574596, 1358293584.087595, 1547272105.8893824, 1490431692.137285, 1402148388.5552871, 1449813521.6758692, 1412169025.7767162, 1517098996.2692535, 1916455236.9528406, 1050000000.0, 1415958856.4135575, 1523550106.6529799, 1556145591.9289258, 1382477710.1999207, 1081694022.4889967, 1564993634.0295613, 2005329026.1887915, 1125258691.574559, 1720846370.5644178, 1393146291.459002, 1460684565.5850394, 1225349472.3308067, 1391683145.2874634, 1859116888.9608095, 1637221045.2357368, 2007092524.101559, 1819159369.6542654, 1596101349.1177974, 2011229898.7774274, 1596074903.2881281, 1709953936.1594534, 1401055818.2014167, 1494154075.8134985, 1305004158.31856, 1759617870.2735755, 1198424550.5273063, 1696183434.2858732, 1427596329.9192452, 1817173516.1232607, 1686749115.2379858, 2038751424.233715, 1680754719.4055116, 1117672877.981363, 1459228594.4889932, 1199762199.9831877, 1347088388.498109, 1929995043.3512342, 1653217290.7161365, 1304655862.4186182, 1233885194.901796, 1485242749.811629, 1190329115.6285713, 1311095351.5605388, 1560567416.2067468, 1812050425.27329, 1644811209.6259053, 1050000000.0, 1558455713.8460486, 1495607513.3543024, 1588992082.7565894, 1966228353.4044363, 1050000000.0, 1329819499.7242792, 1639616183.4486794, 1115782564.158119, 1917969199.239036, 1576224792.0881803, 1715596936.2113469, 1334577767.7568765, 1705649970.2088044, 1784384145.7685328, 1538841115.3187232, 1539256366.4998517, 1549089588.6684887, 1267199824.2331026, 1438545044.6005368, 1437272825.290731, 1580429736.0539727, 1762813235.74809, 1224126180.475605, 1444296088.9480262, 1919841277.7137246, 1294374012.0287821, 1276459880.7889907, 1530528561.0053303, 1714928730.1258163, 1479633669.0074637, 1868665775.5255148, 1718703130.8821554, 1714149527.096553, 1628963716.483966, 2100000000.0, 1423930869.4848847, 1050000000.0, 1962067999.852953, 1361624759.968952, 1505136433.3542051, 1862250675.0038352, 1111704837.5554638, 1182952454.1508965, 1111898193.9311368, 1282833741.8383021, 1596256867.4811451, 1620348966.325752, 1550718221.5913773, 1149661654.727172, 1050000000.0, 1490930005.4553454, 1358233127.4712727, 1601851949.985719, 1672194183.3127298, 1513254550.0783732, 1689519913.9183893, 1537841767.5367143, 1622036976.9176068, 1303329090.4833593, 1430391319.6258273, 1529029717.644093, 1707695468.707539, 1377141910.245351, 1619482047.056558, 1408705200.4939594, 1446208039.52112, 1710417783.6488323, 1050000000.0, 1173594945.290516, 1135608346.9445748, 1050000000.0, 1309441528.6691601, 1686320301.1343353, 1403959833.7142124, 1529304432.1125407, 1790954893.9327137, 1868243881.7384858, 1458663867.7862647, 1876836410.8705935, 1500941261.020322, 1273038663.381367, 1329042948.447875, 1135940147.6404002, 1261646685.4602618, 1385886002.6113398, 1702576815.8485773, 2002992457.1566136, 1155908225.903631, 1583073427.4461346, 1228034557.0738184, 1606203250.265707, 1442741731.3239493, 1067569981.7469902, 1740614722.5463045, 1326549233.3136604, 1343365480.873327, 1221695989.332752, 1315016905.7141283, 1592938366.0727687, 1427952175.1010008, 1565178452.5181062, 1574428827.2448165, 1865920223.406396, 1389630760.6419785, 1136680751.2003922, 1783989283.0278342, 1392415149.2573266, 1799024667.5371768, 1580425045.6023197, 1442728725.8989778, 1570766099.6500275, 2086389045.1020908, 2100000000.0, 1494904836.2589643, 1519150714.3051608, 1786841824.172517, 1271176377.303709, 1566401396.2816522, 1469890618.4142501, 1561092484.7583053, 1273947809.893011, 1114207512.9346755, 1050000000.0, 1211429476.0860965, 1361389363.6434314, 1401894922.1103873, 2081300971.241884, 1796285913.7147322, 1245222973.6354518, 1570469063.3553426, 1373891629.537573, 1404089242.466596, 1525930922.4913723, 1647847529.027025, 1390499556.3509054, 1782924156.2783494, 1206170841.1836119, 1478300716.6986418, 2100000000.0, 1536172035.5608425, 1903502396.586711, 1500779991.6174927, 1636676342.559783, 1461860253.5948226, 1432725705.599826, 1286168637.379964, 1593618930.3661413, 1269853656.8947637, 1661454108.7032611, 1789708155.5484912, 1575715162.4941604, 1403620424.3109028, 1600314420.298725, 1398054958.599863, 1742852014.0998166, 1067475365.3485677, 1391399327.111426, 1050000000.0, 1133020788.9003453, 1880256640.414285, 1730433267.2323086, 1299914444.3330033, 1131527744.5706623, 1050000000.0, 1341083682.8116066, 2100000000.0, 1594913416.2442496, 1337269236.7841525, 1603468865.2722933, 1119869475.0705771, 1400869061.7942295, 1502897297.4646766, 1454286700.4010947, 1698726436.5867932, 1569616973.1863468, 1662261089.5051215, 1307098645.2076557, 1731239902.4192622, 1970667032.605967, 1243446408.7331235, 1261744638.9612768, 1870926314.3610945, 1427421078.0881763, 1893615416.819626, 1365287799.6925662, 1910879120.8658893, 1511444410.9322653, 1545768289.684896, 1948372266.5839942, 1384964603.1742904, 1249857732.9793518, 1363830341.0848773, 1599851870.1579294, 1118917371.9880335, 1653198864.7596104, 1342206631.6500442, 1809644390.8998811, 1050000000.0, 1284555539.152236, 1095241978.5375948, 1275560234.1246088, 1542878161.527506, 1430488838.025021, 1411818746.0850244, 1435577298.7623782, 1530822004.7489288, 1235018403.450355, 1673645334.7552335, 1660595006.8705635, 1580890156.4624076, 1629661411.2561407, 1556262498.4484158, 2100000000.0, 1454030733.9592621, 1398448810.560406, 1292096658.5491395, 1229837662.1689973, 1184457279.2924912, 1261498392.1413748, 1458265301.0433295, 1566741330.3234277, 1490081918.8483558, 1289350739.1405606, 1731966739.2627823, 1683328928.9814389, 1435459431.4170148, 1315335464.3136337, 1627322781.2996259, 1526646966.173996, 1142481489.9112701, 1458963082.3763812, 1546811249.0856047, 1259065133.5130916, 1527152793.0472844, 1141127074.7984803, 1871059493.9806077, 1842036735.6520894, 1412033936.990259, 1574856363.4118845, 1050000000.0, 1203095477.7452512, 1401749049.8928487, 1221180814.3259795, 1675884643.5940616, 2100000000.0, 1198783204.381119, 1273023962.2721932, 1539542053.2648432, 1964454768.0692859, 1189103581.1069243, 1543252763.4259257, 2038987196.8687751, 1101997878.1389225, 1176802061.0575702, 1369874260.5818107, 1346537523.2663467, 1705298736.1983128, 1541237216.7723079, 1078203991.782372, 1617831093.9134846, 1333019239.104239, 1850704628.7718234, 1321251320.61656, 1319139716.6534038, 1625220497.9508917, 1690356283.8051982, 1598652031.52355, 1095410973.5275395, 1624328932.4581485, 1229392069.2492886, 1539495068.6089861, 1147429664.1824875, 1598148738.5981023, 1280004336.991461, 1176475717.147509, 1675713523.78513, 1541233066.7120402, 1324441284.0174975, 1909570472.5709133, 1365743426.0967376, 1485065291.5699537, 1548697224.613463, 1323106979.7858706, 1605190259.613509, 1343472086.198103, 1372782084.2947476, 1879850403.847495, 1228025394.367826, 1050000000.0, 1964392415.3566933, 2100000000.0, 1374332030.8444743, 1050000000.0, 1397606472.5490289, 1403626836.2753668, 1427780276.643424, 1212287461.7487938, 1636323786.8889909, 1620440700.4235392, 1133152323.1395032, 1671377608.9458911, 2100000000.0, 1522321855.1461477, 1390975926.2715886, 1439954008.6165397, 1646705121.545084, 1086697968.891996, 1520281598.236593, 1377941754.97937, 2048592360.9200623, 1431770282.500089, 1984313569.1262085, 1214361322.2352707, 1638557048.8118513, 1562612225.662715, 1265920305.57111, 1523788660.9414704, 1830509742.13076, 1394315139.083968, 1094176311.1640773, 1472053728.0818286, 1258456674.0842843, 1389740377.802465, 1455449949.165315, 1091525703.8370824, 1109068901.2906165, 1608301859.5461123, 1346029400.3118246, 1050000000.0, 1696932995.1377707, 1549645876.3987317, 1301206058.2325234, 1169369594.1490247, 1712324607.8218348, 1570926052.2555423, 2100000000.0, 1590766203.9099011, 1581636827.9567366, 1433609248.3509288, 1706560472.9696927, 1649575064.7072873, 1843269153.9361289, 1346362304.6024313, 1367013143.5871916, 1356471063.269512, 1698725112.1801834, 1925604737.6134384, 1361349516.0070038, 1369591025.6890543, 1561139231.2129838, 1413725074.8239658, 1747956433.8547132, 1050000000.0, 1275452760.5470684, 1285500246.051394, 1050000000.0, 1244881651.124471, 1255620878.7016811, 1424954748.4627304, 1798506300.135378, 1413900629.0206017, 1230153418.4285934, 1461815875.3358274, 1778293660.4311073, 1242167256.9590833, 1256640436.8814547, 1630243455.8130069, 1419805905.6510136, 1656134511.1933656, 1473075410.2233377, 1672108274.8904886, 1229224350.4965134, 1473483166.1263654, 1422536863.0340564, 1190470258.868706, 1119369675.2047384, 1667400200.8167038, 1387621659.0154648, 1232014676.6689389, 1451692258.5728707, 1803309251.9642253, 1050000000.0, 1132704094.4182131, 1253902361.3811665, 1912956700.4740057, 1552453595.2544804, 1691671755.9104383, 1206550710.8392031, 1210967728.5471723, 1598571127.9156244, 1491966033.9620233, 1627412420.6261244, 1428350277.2154202, 1551231953.0706973, 1518593268.2926536, 1694806741.9637551, 1703609752.237663, 1108241244.36564, 1050000000.0, 1763413353.677344, 1822486395.275796, 1232376474.3614664, 1062112140.2240642, 1502779436.5909715, 1741398585.5328593, 2030441933.4738703, 1618085407.000473, 1382526180.1965213, 1260530260.2274673, 1479640284.65762, 1400387314.0718622, 1233589989.050209, 2100000000.0, 2025976711.0362427, 1805876573.495895, 1254354763.0256188, 1718162821.7910774, 1653830334.2589898, 1597079784.5683308, 1842596615.388263, 1652583958.5536807, 1683508348.1811044, 1653033495.7891357, 1568545622.629503, 1076553046.854511, 1498681120.5241494, 1338070366.0426304, 1177058174.344692, 1989216563.9134502, 2005913605.2203588, 1878711015.9420795, 1544942690.6164587, 1875852146.1260471, 1479798078.700389, 1530661732.7234516, 1216572786.937185, 1584241715.2573364, 1492524306.4898307, 1172310696.7698855, 1463307768.6208363, 1455929194.0963933, 2030429934.1863177, 1730135399.2535226, 1479638750.400445, 1543184734.3394034, 1488253600.9018707, 1424498034.5312839, 1218955606.7906227, 1437647368.1285565, 1293798523.4575076, 1183231587.5299501, 1616630946.296538, 1582635157.5959547, 1075962620.4878325, 1444890997.3911684, 1761526049.6713898, 1781462908.7628455, 1770956266.8366685, 1486856988.223761, 1271315051.923188, 1218681010.5003715, 1569605760.1403308, 1579278251.2364054, 1854933992.0342267, 1794373057.8894813, 1442449848.910617, 1184513082.246209, 1395472998.1096237, 1534581080.7109733, 1424707712.871585, 1332935347.985239, 1544305436.0175748, 1350510931.3054922, 1321139302.8713021, 1560413519.8540561, 1375130112.6597755, 1541904912.4731529, 1549874944.6344244, 1206707180.8564813, 1355957349.3049617, 1905041686.5590785, 1201874326.2604678, 1050000000.0, 1061734020.508662, 1484276763.235963, 1484752117.2586186, 1446190439.8498309, 1831051750.1003916, 1050000000.0, 1583944940.2242038, 1947240411.833048, 1209200082.946221, 1380546041.0435863, 1292242184.8276916, 1260258847.9786587, 1393705025.5217073, 1901571212.4126792, 2044807235.2803988, 1391317521.170327, 2069471738.1872165, 1485978255.4362628, 2014709473.3021336, 1452433255.0195384, 1511329805.5408137, 1575420123.0316563, 2100000000.0, 1717026606.069463, 1302730869.6662328, 1753211753.1000288, 1384949375.2579305, 1353914693.5279183, 1734551409.488844, 1484796392.8751054, 1551350737.9263806, 1480304705.468476, 1567376567.5371373, 1592113203.623921, 1050000000.0, 1661744797.7116792, 1240834172.200224, 1143661802.745701, 1461438648.583605, 1498776692.624615, 1305910275.0936942, 1710876285.7776937, 1164130411.321269, 1373924366.2276313, 1331287972.453068, 1464503390.8377604, 1551430000.1616461, 1235159126.888397, 1678822622.2115936, 1493216341.053055, 1056086790.2303562, 1050000000.0, 1473421911.7521372, 1419948993.851865, 1449831028.3719373, 1469338726.431043, 1536847183.371822, 1746593082.783568, 1212777941.554949, 1199769767.227456, 1216604582.5909536, 1554195559.1835587, 1841057073.9605112, 1367998761.9797728, 1050000000.0, 1091846649.5967915, 1274022765.8581035, 1337706058.2397904, 1373572697.697947, 1486769510.149625, 1397293927.4755182, 1778345958.3473423, 1309962959.3382766, 1267430487.8428648, 1607392769.3777728, 1124903746.5934184, 1582194164.8658879, 1503716493.925079, 1438567012.0799813, 1956521439.3848095, 1322511339.3791146, 2100000000.0, 1418826373.4603455, 1177647350.373056, 1495047453.2434592, 1220291431.539623, 1292502313.026481, 1584253502.7363443, 1629386749.6725788, 1322520652.147893, 1758938753.0110312, 1812755486.8308496, 1904543847.832549, 1621849817.9250748, 1880112228.7549365, 1058174709.3127881, 1395769728.0068858, 1266378377.6394703, 1508164935.0762641, 1334458234.1327267, 1433804860.4936557, 2061097765.512312, 1432900302.6875896, 1588964502.5218275, 1417108533.6149485, 1496582880.9144917, 1478216282.9611664, 1598715676.56028, 1815262268.4278643, 1977121802.479314, 1559906916.6468856, 1639221322.8056347, 1204264805.3896105, 1453829147.0277765, 1744316990.2416306, 1721499140.1891427, 1533053452.0066361, 1727740176.2972605, 1610782764.8731315, 1826553302.018673, 1554317407.8789008, 1386455372.9848711, 1567170567.4664695, 1050000000.0, 1580287462.661581, 1050000000.0, 1088086667.0473094, 1599691630.4538941, 1607009437.3082638, 1201799956.11643, 1301614814.662041, 1882482843.6368084, 1355287490.3128924, 2100000000.0, 1476139177.8072934, 1587344860.3498716, 1966459928.1296716, 1511321582.5322468, 1236374035.6052148, 1448211771.2701097, 1467354231.3369086, 1159485337.5654042, 1411204923.4205046, 1294694222.6985254, 1739400333.406728, 1485724322.63386, 1404479382.631634, 1449121775.684613, 1536183541.6586938, 1647159565.1475804, 1236950657.3798187, 1227807498.2717366, 1795867730.807116, 1372612194.5510082, 1148831680.5324922, 1597438356.355341, 1602983030.8953762, 1125886095.8395, 1537915427.1563623, 1682187187.6116862, 1577909601.6448076, 1651591793.1086216, 1151393649.5618994, 1565838066.7837934, 1399555140.804732, 1355585263.9557793, 1722898741.1495516, 1919099558.735343, 2029282303.268173, 1863986031.6840994, 1448210044.4874237, 1571864156.2873328, 1691523591.8168542, 1508686632.0484767, 1511251181.5018241, 1708671385.720562]  # Truncate for embedding
baseline = 1500000000.0
mean = 1495933644.516128
std = 254944141.4991172
p5 = 1097645868.939931
p50 = 1473200503.9435897
p95 = 1975492221.5986402
display_name = "Annual Savings from 1% Reduction in Refugee Support Costs"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-peace_dividend_refugee_support.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 1.5e+09 |
| Mean (expected value) | 1.496e+09 |
| Median (50th percentile) | 1.473e+09 |
| Standard Deviation | 2.549e+08 |
| 90% Confidence Interval | [1.098e+09, 1.975e+09] |

*The histogram shows the distribution of Annual Savings from 1% Reduction in Refugee Support Costs across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
