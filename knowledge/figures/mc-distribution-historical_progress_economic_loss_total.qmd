```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Total Economic Loss from Historical Progress Delays (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [271155476944710.16, 184140605419522.25, 301086066617831.06, 313930512965586.3, 142109222438976.88, 168059483516275.94, 259382140079255.3, 230188597712028.5, 249811108241803.44, 195817568051607.75, 309794475344819.5, 302931128462189.3, 255285471685270.47, 326567606073598.06, 282049048490384.9, 195424598575725.84, 275434367493006.38, 189185944830302.6, 309730417892797.8, 247627146325431.66, 238763671770462.53, 206710261902959.66, 333023893238634.7, 240751340864996.62, 222919353507219.53, 227856082770596.3, 286398509346497.06, 275213204699692.6, 278377983323503.8, 279589649137347.22, 368783626659230.2, 224336978236405.8, 217507026286061.97, 198291399171736.78, 292024346794049.94, 326684863010625.1, 243415027818115.9, 196628621925306.53, 197616141102814.78, 294354637182076.7, 300600519552814.2, 287127113842336.06, 207692390912576.44, 266317448097199.38, 258642118025379.1, 265420354965100.78, 309255825620073.94, 265747041315537.0, 296262478780321.44, 255387976938628.4, 270114470036259.47, 293054785531615.2, 158731256808131.5, 229965583258955.22, 220204251721946.1, 209390974843427.88, 232865068561894.3, 351476530485785.94, 195013575635035.25, 315805380333746.3, 146110434409875.2, 228976489626456.38, 261700292726877.4, 290022340157302.56, 298440500368542.3, 303981217088952.8, 228077404123386.34, 220721702642523.16, 308346648157377.94, 238341908864507.56, 169667703487115.75, 178376811337928.25, 191650406523630.22, 284038430145434.5, 260350226719036.8, 297042313431227.06, 222988869990493.16, 261420374463323.38, 292671225289010.06, 230637272288317.34, 281329243587744.28, 207920792590255.9, 227147273546028.84, 225935513661479.03, 174537799864897.8, 283354708176303.94, 220266836912757.9, 251745124541651.62, 282936986740684.44, 280642487809833.9, 295350998419638.56, 244431207026879.28, 223244577479810.22, 245665560852871.62, 146045231386978.6, 159331583466949.5, 166816522653434.12, 186795287896792.03, 277510325520251.88, 192525525858579.75, 226167297744928.88, 338219912832200.25, 227587938273565.84, 300213406802077.75, 190764193441502.84, 237417047905574.94, 189739097669793.12, 228706951868713.34, 307152865229526.06, 145459133317835.94, 279831045934447.2, 266688735227500.16, 212250274316652.47, 159394656085553.97, 255689260768566.03, 216397751285768.3, 266351740459252.1, 252363415541777.12, 358706237375264.6, 235200094961361.8, 185163624269045.16, 262798387429971.03, 265507437159915.94, 342282288915004.9, 306801773250492.2, 274639917116961.34, 349334357557883.56, 174971075133105.84, 209335204578797.4, 191204618730274.66, 225412391070269.16, 163557702471462.44, 293314837207202.8, 236319475133642.22, 157916271172932.94, 185655452026084.34, 271742806655135.34, 307005479546904.1, 367162314223323.1, 371874030897406.5, 278490281422587.62, 187275080152717.9, 139310845663661.1, 268686518144255.97, 198343862055329.62, 223758258799686.9, 211102017923358.03, 241652543788300.94, 322418692390689.8, 261321320859691.47, 240482156392220.72, 184409179533724.7, 146229872545581.6, 219176935741478.94, 247373073895629.6, 364397296944413.8, 259543666009464.28, 316783897759526.7, 218340354539046.47, 175205027359410.62, 188796979999008.78, 203894494302821.28, 368640360584488.4, 197811223943182.5, 307029978727374.44, 192685444631712.8, 313322325341345.25, 276518186602613.0, 240613087458804.4, 248230992403635.9, 208375888748050.7, 280611722763612.4, 221197267330913.34, 172718248689608.75, 169530895024843.56, 262353842043952.2, 357171565399065.2, 261516829095282.6, 243106878971272.0, 269894739598680.8, 338678850235810.4, 265466549214268.25, 224044922895931.8, 325148441237567.4, 279451322475061.78, 354239270509485.1, 263061586144888.56, 172787647912996.2, 164071321646852.1, 362029541098995.3, 363833363582134.94, 239113592941815.97, 225841562370912.97, 349208501720770.2, 179993394880666.72, 193199531317469.75, 293865330412880.25, 225101727311939.2, 250581869807498.8, 240166962058975.97, 273350065823563.44, 345553835117280.5, 256911735598679.8, 293906540913725.9, 140586335840497.25, 247706704782903.2, 196435108184638.88, 173133056880044.8, 194239591377251.3, 229025983754221.6, 312262535029757.2, 166593070336688.88, 252943686898678.94, 219314743595027.47, 229445258881468.12, 318138651799477.6, 286788567335337.1, 340806062028338.06, 240752901745656.47, 205755002069113.1, 236212538290234.9, 267005919386138.9, 262618749245905.97, 181392036203734.78, 256905432326221.97, 266055524207941.53, 372518630401538.9, 365744848522516.0, 195805023604659.53, 232067327471812.75, 158355811145211.78, 212470705443244.7, 271882449400468.47, 331893236917284.25, 203649666713273.34, 208416782105685.53, 139071607633276.53, 240217892320182.38, 182750948125046.0, 216401175840067.44, 194320692202214.9, 244708865907853.2, 145010857269936.6, 158140710482874.84, 368648835172243.4, 168954797616841.9, 180626420636880.75, 365257410572874.4, 372106226732053.1, 176025058328344.16, 226810219063519.75, 273616110303898.8, 363897944939990.0, 187442016906518.72, 234813388288170.62, 302900459912954.8, 279853991911650.06, 226297395005676.06, 242109834305027.44, 163665508838955.06, 235277282792188.2, 233435914027318.84, 266318018638563.9, 214738603240494.8, 282319287736331.0, 318812652377171.94, 261213762685764.12, 274297962724171.0, 254433339871752.72, 250925571979210.4, 204127339583897.5, 271941834796324.4, 244510028794865.72, 368252466117786.75, 356783482091812.44, 276578117489095.3, 201496383566502.94, 179662552277819.1, 330896563256012.8, 268355667464322.5, 282896514808451.56, 145204875658416.38, 313042690339604.1, 281171356205355.62, 179784665997668.3, 220129942511800.7, 268420202029283.2, 254387781682741.94, 231755446307576.03, 244102340627920.12, 234376062988394.62, 261023349598079.34, 349888867126102.9, 140879940774705.28, 235363723526886.12, 262614698553331.53, 270573225203418.38, 226572453688363.1, 145025732271784.44, 272710041681840.53, 363880663493452.06, 154166025023741.9, 308742129300381.06, 229389861939887.12, 246876349018476.44, 183340192856508.0, 229004359958695.9, 338275221540513.06, 289782438667895.44, 363944252710487.06, 329966291187044.1, 280143529666693.06, 364092758876919.56, 280137262220603.62, 306320593388079.2, 231468911379798.6, 255319572835446.72, 205660806374264.56, 317247072346602.8, 175611956192891.8, 303238825861134.94, 238384673115383.8, 329548641158648.25, 301114254787347.75, 365056641014250.6, 299758731050992.25, 151906966903697.34, 246505724131414.4, 175998036323256.88, 217118673831608.97, 352579110194747.6, 293475269979842.0, 205565005352514.12, 185771131628403.28, 253085862359897.6, 173270689530431.88, 207333650010734.66, 271642353353172.3, 328469116982615.2, 291538618842072.2, 138897284461906.36, 271132088559972.84, 255682908408973.12, 278455513115515.06, 359682194871249.94, 140383861172695.33, 212445323160665.75, 290337386308399.3, 151343037784385.94, 350190657894561.06, 275408003078193.12, 307576882580117.6, 213736952920672.75, 305359840907102.44, 322587389588482.94, 266365181400066.62, 266466611235061.66, 268862010010943.38, 195169814281891.3, 241210496472032.38, 240882953603651.03, 276413992048898.12, 317940105039786.8, 182991047623957.44, 242688485148058.72, 350563493299301.1, 202729743119856.44, 197756793854897.16, 264330072452665.9, 307428320501922.94, 251674571954207.78, 340234403243350.2, 308266780304526.7, 307255012952841.2, 287863775624400.94, 370716907985987.56, 237435094367485.75, 141305882706008.66, 358873664855488.75, 221021951247179.9, 258058167509666.34, 338919308785753.3, 150125210418045.56, 171130289858300.6, 150182998074643.53, 199530974773121.47, 280180384466690.8, 285853015713709.2, 269257550902977.7, 161389056642768.75, 139032744743755.03, 254512624813078.72, 220113740102349.2, 281504281685797.0, 297815336276684.6, 260072444658730.72, 301739345991231.3, 266120988330340.7, 286247741804393.06, 205199922239635.6, 239107554000768.3, 263962172143829.56, 305816724786182.4, 225157692081489.47, 285650156112642.3, 233471699805825.62, 243178881086059.7, 306424002860385.4, 141466534910468.28, 168405599561154.94, 157237736942686.97, 139202036062907.86, 206879937955012.47, 301017431242668.5, 232230163338237.8, 264029624201378.97, 323992276934756.3, 340148055268757.94, 246361895085440.88, 341902785334330.0, 257013899664772.78, 196802307120648.84, 212234244772133.1, 157336012149220.03, 193613099620974.56, 227474170971066.34, 304672472705478.25, 363796141685782.94, 163226909895729.53, 277045318844696.4, 184105890674988.28, 282531153920290.75, 242289453210053.8, 143922975107303.16, 313100753803280.3, 211555876844193.7, 216114506000851.7, 182296874669340.3, 208408055783854.8, 279393302568843.66, 238476764288745.84, 272754569043773.78, 274977652689134.7, 339672124323364.44, 228463130527186.56, 157555324269187.9, 322502805226773.2, 229197259933310.38, 325710856785871.44, 276412871157698.16, 242286113137159.97, 274098715857980.4, 366629905246418.0, 368072593290251.3, 255507285031106.47, 261530048181187.16, 323113448340848.25, 196282107582524.44, 273049096753236.0, 249213352591735.0, 271769140716179.97, 197056098774210.28, 150872859237176.84, 140232582524858.88, 179356082442655.75, 220958966050940.0, 231688986877830.62, 366467447166460.25, 325128438153221.7, 188985734202768.0, 274027361853440.1, 224294046374549.72, 232264060260662.34, 263200634009602.22, 292239153488815.1, 228692306689232.22, 322274552200121.75, 177844654801320.88, 251338585133022.1, 373227888010072.6, 265712698332584.16, 347296738910140.56, 256973710569342.53, 289656133098699.25, 247175423170067.56, 239710516294568.75, 200457140041331.16, 279554832049679.4, 195912353380103.56, 295364480291582.2, 323726096004293.8, 275285926929957.53, 232141248969685.44, 281140867405049.6, 230681099555902.62, 313591122242737.25, 143915493856328.03, 228929548204692.47, 141501026451575.06, 156470904059855.5, 342598983112841.3, 310861698148286.8, 204259263235526.22, 156028088132444.34, 143744607632459.94, 215498137517078.5, 371618983863034.9, 279861912231302.03, 214466226118953.97, 281886138807589.75, 152561772297618.66, 231419917263447.47, 257501083702374.4, 245245661774072.72, 303809657507886.1, 273822610564362.5, 295549122303821.94, 206236572251635.7, 311039538160930.5, 360542812371261.4, 188483110399416.22, 193640593567448.94, 340696726583200.2, 238339312562387.7, 345305889804320.75, 222001127833703.88, 348775198860946.7, 259624051913888.38, 268054322049502.56, 356199127564675.75, 227230552125722.75, 190295089433704.12, 221611743795309.1, 281031479682252.88, 152278016040888.88, 293471034412614.1, 215801559059603.56, 327961090651287.7, 139638674195283.39, 200009332651756.5, 146057886532815.5, 197505948654595.84, 267350335469351.78, 239132757002202.3, 234284681330970.0, 240446095068187.94, 264402066083121.44, 186093168497813.84, 298145402890871.56, 295167824820924.4, 276524006501012.44, 288026219011582.2, 270601523562591.25, 367601092119706.94, 245180309102001.4, 230784565006039.03, 202099878752894.56, 184619563952084.12, 171567467354935.28, 193571473749264.53, 246260359737460.8, 273130930904499.94, 254300133137210.6, 201339516912146.22, 311199718682179.3, 300341376855427.6, 240415712020791.7, 208495243785139.12, 287481479892684.1, 263376714073529.03, 159270899143521.1, 246438106635032.9, 268308105964004.6, 192888053076372.56, 263501060452352.03, 158870675688676.7, 340723946720377.25, 334745473241427.25, 234340822682412.66, 275080136398742.44, 139751438153759.1, 176959140976316.97, 231650735021403.2, 182149621485450.34, 298654232662298.0, 367168838493226.56, 175715494684209.53, 196798202368126.94, 266536380599112.1, 359337735733587.4, 172915551919618.38, 267441642729026.1, 365064720919637.3, 147218922672501.1, 169340632131403.62, 223224639532007.5, 216970206359913.1, 305281338422226.44, 266950151144755.56, 144755812274376.28, 285263572379895.5, 213314220453905.1, 336540838352613.44, 210111956108356.5, 209535416700207.53, 286991211747346.5, 301927847834394.0, 280747606199133.06, 146070606348766.56, 286783125669403.6, 184492660658789.3, 266524906902023.16, 160731258256136.78, 280628476592140.22, 198744056083503.28, 169245543565210.25, 298615371339682.25, 266949138612589.97, 210981808972890.97, 348513346969383.56, 222122798167648.16, 253041275425228.7, 268766666949293.7, 210618128501741.62, 282292308760444.94, 216143285817697.25, 223998903874398.84, 342516359884086.56, 184103279326223.3, 139772018382692.3, 359325619810817.56, 372804031135195.75, 224411149261104.4, 142325380376338.7, 230563256634703.38, 232142928839911.75, 238432279809702.0, 179602355064771.4, 289574362921704.1, 285874476051240.1, 156509903129621.6, 297629492078625.9, 367800269294442.06, 262312130661574.1, 228817923958231.72, 241572996226489.88, 291975712775157.6, 145409838798513.03, 261809101704271.9, 225370007490512.16, 365391366805217.06, 239463821406737.1, 363109348546861.75, 180197246302038.0, 290092075134469.75, 272135911349351.53, 194811480197256.3, 262673441470103.2, 332344826810637.75, 229697619897367.66, 145977589297344.62, 249760855858414.2, 192717037685531.28, 228492051515452.34, 245542550788004.0, 145777213220477.78, 149337012397951.6, 283025558493829.2, 216833223043291.0, 140866159261108.12, 303407162125960.44, 268997152092262.06, 204615254092085.03, 167171809242862.97, 306848836154610.56, 274137134990301.62, 371256255480404.3, 278877356386984.03, 276702361618189.06, 239938544088882.28, 305563273535722.06, 292637219457096.4, 335001255594561.7, 216922973555123.97, 222461717976901.97, 219641293133203.4, 303809360419529.44, 351708952194858.25, 220948303258167.5, 223149162865352.6, 271780426791328.84, 234781811889472.84, 314707692993697.9, 138612796492457.12, 197475975145737.6, 200271631152773.38, 139106563289180.28, 188889198999741.66, 191919370366885.22, 237700520411456.28, 325600687827168.0, 234827568564331.6, 184709474962109.28, 247164137426452.2, 321280724290672.1, 188120963856243.66, 192206276470235.8, 288161689358676.44, 236364352679573.16, 294145322948354.4, 250019239902829.78, 297795788209907.56, 184444888420894.66, 250122323432750.8, 237073495329777.6, 173311578435935.22, 152412828958725.22, 296723107800864.3, 227932774501808.3, 185239207434952.5, 244582856688522.72, 326620280939373.1, 138821312486677.86, 156376998083615.0, 191435472176542.5, 349190528197339.44, 269678641356395.28, 302224158705345.6, 177953951957045.06, 179223506205751.56, 280728458440658.16, 254772078771942.84, 287502372211018.25, 238579771548392.84, 269382248669891.72, 261392433546747.38, 302929471616647.4, 304903635040694.8, 149089370598591.06, 138580333598454.19, 318070129388506.5, 330665002032983.4, 185342127515999.97, 143489352819549.25, 257471742547242.62, 313272627861485.3, 364769965752806.8, 285323144002010.3, 226585287978959.2, 193299649654900.28, 251676238929362.44, 231293513103500.72, 185687212750282.66, 367755960025566.44, 364614373714747.1, 327164199028393.6, 191562895835300.47, 308146858520843.8, 293616166207739.44, 280375348896802.72, 334861694668481.94, 293329662177580.3, 300381956501799.44, 293433019241408.5, 273565041302253.84, 144627544075769.9, 256450353234995.78, 214683112990817.5, 169415248202272.97, 363291549861338.0, 363901761866375.3, 342284526281640.44, 267853329498299.56, 341702196471700.0, 251715997307562.0, 264362746243696.94, 180831014904300.3, 277324029557167.0, 254911829625893.0, 168030829835122.0, 247543395924972.03, 245664813839961.88, 364769549084745.5, 310796007212158.75, 251675852336184.0, 267425062334179.03, 253841721016136.2, 237582140943620.56, 181513202822356.8, 240979404777357.88, 202570640151961.56, 171211403743816.6, 284982334396637.1, 276940719080559.5, 144581580202538.16, 242841124746272.3, 317661075147989.4, 321961198013686.94, 319700823569710.4, 253491255837012.7, 196320859625016.34, 181434623882868.88, 273819915531642.88, 276138734511641.84, 337413806819453.4, 324721141782862.9, 242214486163252.03, 171583673758605.44, 230002306091029.5, 265323337131542.1, 237636492632162.22, 213291456876065.66, 267698129641087.44, 218040206770226.12, 210081386236710.78, 271605185600926.0, 224623294036613.22, 267113026772019.1, 269052789379648.28, 177998966715074.22, 219503478038870.75, 347605734335198.75, 176607198869843.72, 139551857751255.12, 143459154332175.94, 252843105460634.44, 252962579366912.12, 243174369144897.6, 332458042758283.3, 141644407918341.2, 277253246283538.78, 355977208686399.44, 178715736037322.28, 226060716711464.9, 202140148334491.28, 193223423016916.56, 229536999381948.7, 346908710893767.6, 365263231077674.56, 228907982960174.94, 366084661114934.1, 253270616564180.47, 364216917162810.3, 244772250267249.53, 259595648500250.94, 275215238394770.88, 355434788594091.25, 307894561135311.2, 205035236320204.34, 315854063393270.3, 227226524905708.16, 218955144788158.84, 311768820772815.75, 252973705950400.66, 269411076438580.44, 251843626865955.94, 273283815487225.1, 279197374786477.9, 142323420112557.7, 295431000877946.2, 187743325279957.12, 159619503483045.0, 247068195223335.06, 256474196776724.16, 205909964929240.72, 306526195262855.25, 165639011247915.25, 224302751958176.78, 212844258557165.66, 247847127534660.03, 269430311499013.12, 186133148073942.12, 299320890997592.75, 255085008340090.72, 143005694814521.06, 141993977872931.56, 250106839291194.72, 236401532604722.72, 244106820381083.97, 249073565346374.66, 265877831599332.12, 314409766525819.25, 179743098912054.34, 176000219794646.25, 180840122523059.03, 270100942868880.97, 334542027567215.4, 222724657235439.84, 140412238877949.55, 145801525359841.84, 197077018217045.7, 214584495757119.12, 224209226219420.12, 253469295661742.06, 230481117424810.16, 321291962707567.25, 207023026806105.88, 195234389926411.9, 282811456779259.6, 154060465387392.22, 276835444882242.78, 257704970586655.94, 241216150297500.5, 357792904502274.44, 210455703803512.4, 367885908837952.8, 236109759110709.44, 169586868665202.66, 255542935167690.34, 181895329177688.9, 202212123297947.62, 277326840736942.12, 287962277134675.94, 210458243654999.34, 317099626621540.94, 328617863244466.75, 347505826877584.3, 286203993895158.56, 342569613742202.7, 143173885328590.3, 230080360842450.75, 194939789415043.8, 258810603991536.9, 213704542204623.1, 239989014421698.88, 365809335998698.8, 239755585088952.2, 278448952058583.16, 235662963104812.4, 255926579937195.16, 251317294752907.38, 280762668727626.2, 329146257836917.94, 361790651384183.94, 271482813676731.2, 290245947026293.0, 177295973466587.62, 245128834395548.12, 313911894443527.75, 308886798002729.7, 264949167013402.56, 310267388052732.94, 283609313914497.7, 331517389616328.44, 270130467908204.06, 227624656767506.72, 273234242424223.16, 143500279506139.94, 276379991310869.03, 148668572341546.44, 145515835077800.2, 280993578573840.0, 282721146343233.6, 176585759030365.06, 204727868736041.78, 343051441505930.3, 219323721092335.8, 369856817331255.2, 250793248658656.28, 278063486943200.56, 359727146078287.5, 259593610472005.53, 186478199103735.72, 243692301211972.88, 248570587805330.5, 164277293204831.44, 234124506908203.9, 202818251666817.4, 312834336680259.25, 253206838293174.25, 232366238931529.16, 243925298845903.16, 265715513081474.25, 292080527394833.8, 186641901881651.16, 184041176336000.53, 325039432189951.44, 223953698267115.94, 161144519620845.56, 280460274543054.4, 281771436800766.06, 154352578737696.6, 266138991627104.0, 300083054928999.56, 275811345757148.4, 293101456537722.75, 161899098764403.22, 272913450967969.88, 231075089558822.16, 219403636114206.34, 309196810152696.75, 350415820782972.94, 364729662210327.8, 339275507155867.2, 243691858982687.38, 274362393312245.0, 302190795130036.94, 258940100187165.7, 259576161597807.5, 306034529007130.2]  # Truncate for embedding
baseline = 250919999999999.97
mean = 251453474280569.97
std = 60673986724715.17
p5 = 146318990948680.72
p50 = 250050866768403.75
p95 = 360635956621368.4
display_name = "Total Economic Loss from Historical Progress Delays"
units = "USD"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-historical_progress_economic_loss_total.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 2.509e+14 |
| Mean (expected value) | 2.515e+14 |
| Median (50th percentile) | 2.501e+14 |
| Standard Deviation | 6.067e+13 |
| 90% Confidence Interval | [1.463e+14, 3.606e+14] |

*The histogram shows the distribution of Total Economic Loss from Historical Progress Delays across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
