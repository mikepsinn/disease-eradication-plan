```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Annual Savings from 1% Reduction in Indirect War Costs (10,000 simulations)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [38444648023.48405, 30300483511.003464, 41601197003.04876, 43025167085.141174, 25870000000.0, 28926165634.77501, 37259485862.95837, 34442436873.93413, 36317521299.23978, 31320040155.377224, 42561782239.03709, 41803043261.31727, 36854002835.57716, 44470811186.839035, 39568724528.61391, 31285413278.95907, 38882937999.90642, 30738663826.82321, 42554642286.77647, 36105172821.12335, 35252907434.73456, 32289044423.636425, 45227453195.858925, 35442721432.530785, 33765740873.339157, 34224288010.24445, 40025257930.35885, 38860182705.626656, 39186870616.01345, 39312557276.73178, 51750000000.0, 33896981995.592155, 33267835817.301403, 31538544453.086647, 40622538937.98168, 44484441736.90677, 35698270800.89885, 31391578321.62162, 31478811889.54896, 40872225587.17609, 41548226349.71281, 40102177547.53971, 32377307867.712856, 37953994806.73581, 37185981186.38441, 37863578188.93746, 42501778098.866554, 37896484197.5048, 41077661201.501274, 36864106351.993164, 38338637359.188416, 40732781699.012924, 28143339892.732285, 34421537418.77653, 33515345310.84992, 32530317719.108295, 34693957305.78205, 47461931483.48714, 31249219677.391342, 43236776553.10139, 27040940689.090733, 34328953264.843246, 37490487848.1498, 40409103144.22472, 41313317545.71389, 41918318906.12579, 34244945569.49839, 33562969336.970284, 42400676268.02822, 35212726644.057785, 29062152442.894386, 29804100656.21003, 30953984064.09917, 39776977288.74191, 37355817091.18302, 41161898485.81561, 33772168492.280308, 37462533959.59236, 40691715186.56528, 34484510756.6574, 39493604036.8158, 32397855943.92217, 34158187908.72846, 34045390077.60364, 29475876367.471416, 39705298037.364204, 33521102975.246567, 36506361094.99381, 39661560033.03231, 39422046015.787155, 40979398869.16659, 35796120540.42291, 33795818830.993645, 35915247993.268486, 27019576241.926582, 28193423218.356915, 28821275469.633457, 30530602953.93958, 39097076781.23969, 31030650206.24306, 34066945976.020004, 45845652073.215256, 34199271717.64048, 41506038128.09684, 30876456929.19475, 35124733057.95871, 30786918466.83304, 34303753430.15818, 42268264057.84191, 26828984973.26526, 39337638218.79219, 37991467388.415375, 32788924734.63253, 28198687467.553623, 36893815140.867516, 33166397230.197495, 37957454546.18785, 36566890400.27535, 48368156903.144424, 34914454994.71592, 30389049687.333378, 37600309277.51642, 37872347424.6117, 46334883977.792274, 42229394332.95948, 38801249303.63256, 47196838790.57122, 29512826485.412663, 32525286626.14172, 30914972030.16692, 33996774288.95985, 28547132032.82291, 40760645415.892265, 35020514292.626686, 28075411454.17927, 30431679415.319263, 38504565060.03126, 42251942831.706535, 51750000000.0, 51750000000.0, 39198505044.12989, 30572296254.059917, 25870000000.0, 38193612694.51386, 31543188090.122158, 33843363226.26841, 32684913917.404358, 35529029362.17793, 43991122709.12316, 37452646002.65507, 35416971682.72655, 30323721167.13782, 27080160457.597355, 33420929815.20886, 36080530403.07414, 49811995611.50501, 37275545110.68013, 43347608650.26562, 33344175243.519375, 29532787975.417046, 30704757843.377655, 32036826442.622124, 51750000000.0, 31496061761.29534, 42254655423.95464, 31044671940.132072, 42956733056.5085, 38994612751.74605, 35429494617.58204, 36163790784.15498, 32438823040.305386, 39418842969.3255, 33606778473.90952, 29320959723.942448, 29050572189.442078, 37555818976.78498, 48174278180.364944, 37472164473.99122, 35668637968.05468, 38316291910.57286, 45900659499.670364, 37868229776.588135, 33869915605.686016, 44306162289.68833, 39298191354.409584, 47806110989.78375, 37626670194.18561, 29326860822.980606, 28590257801.66575, 48790843630.23895, 49423183965.156456, 35286269335.8263, 34036655296.922955, 47181312046.351524, 29942880792.235104, 31089772048.242382, 40819684733.77667, 33967925740.359093, 36392689609.84745, 35386838176.719246, 38668926100.53661, 46732729907.92456, 37014551963.89461, 40824107528.01842, 25870000000.0, 36112891790.25967, 31374500887.327446, 29356240237.727016, 31181131237.600517, 34333582014.4658, 42837728335.451385, 28802438291.646477, 36623767947.2065, 33433584696.44683, 34372810646.52427, 43501500494.91525, 40066420865.28673, 46156493953.303604, 35442870783.97128, 32203340520.70739, 35010372195.63042, 38023503339.47357, 37582325935.17591, 30063226860.669224, 37013928634.17129, 37927577863.15972, 51750000000.0, 50781762512.376785, 31318934441.34614, 34618854321.49952, 28112037766.060307, 32808916088.34317, 38518822192.26528, 45094036267.82629, 32014954323.264153, 32442505803.0123, 25870000000.0, 35391705984.11027, 30180402120.955284, 33166710076.771225, 31188261717.131435, 35822891582.29982, 26684947305.895866, 28094111067.01754, 51750000000.0, 29001832732.70905, 29997317611.374054, 50424046801.799164, 51750000000.0, 29602810040.246525, 34126786949.44774, 38696188286.48995, 49467230473.34524, 30586810271.11623, 34877868981.62546, 41799680910.087074, 39340022994.48759, 34079049136.76426, 35572883194.890724, 28556181427.473846, 34921760973.52421, 34747770376.32918, 37954052366.28101, 33015055474.267292, 39596958812.276474, 43578256450.28703, 37441911436.21723, 38766132239.77141, 36770095115.84815, 36426247388.95162, 32057636653.383095, 38524886596.038185, 35803718780.783646, 51750000000.0, 48125380989.37346, 39000795757.72808, 31822981760.268974, 29914450984.33475, 44976752119.04998, 38160075200.20651, 39657324568.72891, 26747105637.85727, 42925302521.255226, 39477142828.458244, 29924942736.40185, 33508509931.353165, 38166615016.668076, 36765613275.85311, 34589523793.472, 35764431548.36547, 34836527128.28302, 37422913752.73169, 47265311293.574104, 25870000000.0, 34929944062.21425, 37581920505.02077, 38385324893.60195, 34104648077.19461, 26689703051.972897, 38603406664.12616, 49455432012.33385, 27763753949.081528, 42444626896.13462, 34367625744.687004, 36032389879.92138, 30231287585.787857, 34331559677.731075, 45852277760.124954, 40383593217.0777, 49498889187.13735, 44867553348.59065, 39370125201.703865, 49600844741.410736, 39369473390.67406, 42176175986.19593, 34562592436.39756, 36857363804.6639, 32194897184.55322, 43400164171.35651, 29567524799.561142, 41836791367.18756, 35216799216.15834, 44818612972.44228, 41604274064.17929, 50279041746.97588, 41456536241.60407, 27576734372.620705, 35996502011.314865, 29600501286.000874, 33232299303.47262, 47598978399.29509, 40777843698.08477, 32186311368.22748, 30441710862.21161, 36637714230.01066, 29367950968.75936, 32345050445.557854, 38494311755.36794, 44692356743.297295, 40570664112.45518, 25870000000.0, 38442263626.617294, 36893188559.19828, 39194902628.927925, 48491881994.1831, 25870000000.0, 32806613715.863388, 40442625035.63085, 27530130687.745155, 47302620590.33711, 38880224797.9618, 42315251445.55708, 32923907514.729103, 42070101663.553696, 44010529084.85875, 37958810665.79234, 37969045664.582634, 38211411632.48203, 31262974746.918224, 35486675295.169174, 35455316303.775185, 38983865068.466194, 43478914337.38174, 30201130808.57837, 35628432776.29643, 47348755083.66084, 31932853425.773254, 31491248306.22164, 37753924618.5095, 42298783084.48589, 36499459054.664085, 46087600749.313286, 42391805509.26086, 42279579127.258965, 40180078289.80648, 51750000000.0, 35126448513.95202, 25870000000.0, 48389358358.01639, 33590623831.077885, 37128059496.46035, 45929506962.777084, 27429598446.548008, 29186095870.93746, 27434365459.72496, 31648372286.465385, 39373958266.550354, 39967753283.215866, 38251553514.68313, 28365374468.261997, 25870000000.0, 36777895875.7194, 33507019666.78252, 39511860204.946014, 41245552633.006165, 37328155719.65641, 41672563002.660995, 37934179003.085594, 40009357212.9521, 32153605195.430187, 35285693380.56376, 37716981357.507866, 42120514464.874115, 33973121441.790077, 39946386550.76761, 34751145848.41798, 35675560344.041084, 42187607827.18033, 25870000000.0, 28955406126.47163, 28018911293.64265, 25870000000.0, 32304282313.65866, 41593705529.57327, 34634175047.78321, 37723752479.668045, 44172464067.555374, 46077203608.68862, 35982582196.02496, 46288957332.854095, 37024656101.02547, 31406910585.146442, 32787471288.966953, 28027091379.61316, 31126081353.217365, 34188661743.963284, 41994361445.29653, 49397852828.5899, 28519373218.34753, 39049024658.44576, 30297480621.101772, 39619106394.696945, 35590119461.982635, 26341479273.19678, 42931826986.28888, 32725999745.15517, 33140528382.42325, 30141221295.97238, 32441719908.139435, 39292167018.75123, 35225570508.88739, 38607961960.22908, 38835959152.14579, 46019939394.03323, 34280969027.988712, 28045349926.446606, 44000797744.17299, 34349603336.079468, 44371341641.98443, 38983749461.89099, 35589798891.517044, 38745682761.81347, 51452931108.81606, 51750000000.0, 36875868771.60059, 37473484487.51472, 44071098210.224525, 31361002593.63349, 38638104339.58302, 36259306931.99092, 38507253360.1827, 31429322316.15967, 27491299420.927174, 25870000000.0, 29888128314.816376, 33584821287.56675, 34583275963.567955, 51327551472.68207, 44303845810.12367, 30721208871.434692, 38738361608.298904, 33893002333.977665, 34637364909.72639, 37640602640.235405, 40645498532.08414, 34302384581.937756, 43974547826.07624, 29758490311.79269, 36466603779.298416, 51750000000.0, 37893023858.087585, 46946107305.378136, 37020681097.97602, 40370168182.97429, 36061369100.09932, 35343233966.20551, 31730581562.48782, 39308940927.23365, 31328395628.576504, 40980850756.26571, 44141738445.79788, 38867663819.41142, 34625808772.23523, 39473964765.00734, 34488622541.513374, 42986965786.928925, 26339146523.52082, 34324563650.550537, 25870000000.0, 27955118574.35791, 46373245033.38863, 42680900901.76464, 32069430844.33967, 27918309547.8938, 25870000000.0, 33084281196.52515, 51750000000.0, 39340846181.886055, 32990253490.219845, 39551712228.145546, 27630889069.174953, 34557988975.14373, 37072868882.804115, 35874690285.95564, 41899465778.79664, 38717359849.1215, 41000739801.79895, 32246528187.14084, 42700780794.41254, 48601264224.535515, 30677413268.94351, 31128496061.451168, 46143309384.155, 35212479401.20798, 46702455863.85172, 33680918033.6438, 47127896198.064896, 37283539286.46592, 38129549502.58782, 48051853052.17514, 34165949464.231358, 30835464009.199814, 33644991593.013577, 39462564302.41689, 27607416020.228603, 40777389565.60842, 33111962319.82303, 44633061030.75676, 25870000000.0, 31690816728.483418, 27023720285.880764, 31469070794.105953, 38058314596.89393, 35288097125.83409, 34827892944.96612, 35413523159.685905, 37761157371.5133, 30469646718.633007, 41281317878.85423, 40959677114.76709, 38995213148.42048, 40197274112.24609, 38388206348.7898, 51750000000.0, 35868381013.220726, 34498330829.5731, 31876714160.897217, 30341930923.14936, 29223194042.847538, 31122425688.82669, 35972758015.84341, 38646482825.27737, 36756991940.32791, 31809024127.793793, 42718694014.20631, 41519980236.882065, 35410617838.35443, 32449572623.76562, 40139634750.45754, 37658251606.623474, 28188358718.24715, 35989957466.40618, 38155255989.0319, 31062441974.5107, 37670719168.164444, 28154967631.049835, 46146591456.08758, 45431351683.33635, 34833197271.302505, 38846496758.75325, 25870000000.0, 29682674997.82199, 34579680280.891975, 30128521096.291637, 41336508095.041985, 51750000000.0, 29576366538.843735, 31406548182.17381, 37976087193.43105, 48448175533.02525, 29337738216.355385, 38067547664.26099, 50284851724.23175, 27190281973.759403, 29034470997.85725, 33793974368.636017, 33218720303.404175, 42061445240.60225, 38017869096.46286, 26603657777.617435, 39905695915.686424, 32885489003.487915, 45644965032.61291, 32595402781.686035, 32543350268.11809, 40087820482.02274, 41693176107.56252, 39432991895.36212, 27027886741.69008, 40065846352.228615, 30330946132.89451, 37974929128.62007, 28310348320.461525, 39420587236.05467, 31578623846.04709, 29026425664.819042, 41332290662.18602, 38017766807.01397, 32674037485.209072, 47095646459.7646, 33692149245.194233, 36633340164.82985, 38201740797.80771, 32641146023.247673, 39594139306.24884, 33143156242.193825, 33865652116.056705, 46363233797.56556, 30297254741.1539, 25870000000.0, 48446638974.64473, 51750000000.0, 33903858192.679077, 25870000000.0, 34477567543.091, 34625966824.033455, 35221333352.69678, 29909279683.778168, 40361478905.07774, 39970014229.00185, 27958361374.632027, 41225427236.252914, 51750000000.0, 37551646643.90893, 34314126953.308918, 35521404887.60249, 40617342284.012146, 26813072915.874073, 37501358485.45837, 33992837515.00985, 50521544498.73706, 35319683625.98222, 48937554180.57432, 29960405184.55662, 40416521062.443886, 38544711090.291794, 31231432689.954937, 37587800372.96842, 45147276849.89031, 34396437428.88127, 26997446974.537468, 36312624568.22236, 31047442462.85045, 34283671058.734894, 35903362993.3918, 26932097948.885704, 27364611939.44127, 39670830587.379715, 33206194909.95503, 25870000000.0, 41855264926.89598, 38225122790.03643, 32101270404.493702, 28851238487.935234, 42234602797.23674, 38749625167.05901, 51750000000.0, 39238629571.50286, 39013616514.39229, 35365012507.992805, 42092541673.5553, 40688076063.0282, 45461723702.24258, 33214401107.680992, 33723447823.459614, 33463584499.62749, 41899433137.710915, 47490786462.74352, 33583839039.17344, 33786992632.57879, 38508405541.27256, 34874882779.274284, 43112765715.71506, 25870000000.0, 31466421423.634846, 31714104907.74888, 25870000000.0, 30712794645.632446, 30977535432.65574, 35151686339.75807, 44358566626.66642, 34879210080.05457, 30349714968.37638, 36060275232.562256, 43860429680.687904, 30645879787.325016, 31002669236.5087, 40211619542.605156, 35024771197.70457, 40849742469.490234, 36337807586.58333, 41243435323.35794, 30326811516.74469, 36347858188.49001, 35092087308.96445, 29371430531.161224, 27618567057.969585, 41127399414.05951, 34231445234.498013, 30395598803.816895, 35810740295.81407, 44476933880.574524, 25870000000.0, 27947310895.38639, 30935171087.871655, 47179095097.207436, 38294326262.82556, 41725597110.97068, 29767855027.65504, 29876745144.71607, 39430997864.57374, 36803432256.13474, 40141844059.526825, 35235383398.4155, 38264215752.46999, 37459744566.5962, 41802861606.494965, 42019818957.40207, 27344206818.379063, 25870000000.0, 43493704303.34312, 44949546152.30241, 30404517853.122158, 26206916941.17182, 37069963825.554146, 42951145558.799255, 50074276542.47081, 39911963909.76502, 34105842853.20982, 31098559700.66055, 36499622120.460884, 34546114108.71719, 30434433444.436733, 51750000000.0, 49964242790.941925, 44540204619.63753, 30946323554.36983, 42378489269.71249, 40792952978.30321, 39394240718.93395, 45445149499.05243, 40762234373.00884, 41524402201.45307, 40773313824.77876, 38690953891.1209, 26562954331.9492, 36968947639.640076, 33010001682.401516, 29040784939.15121, 49058377646.75348, 49469837563.276794, 46335154875.998665, 38109200425.41442, 46264701215.726494, 36503511505.41644, 37757207013.192924, 30014922874.803364, 39077819654.33311, 36817192740.10915, 28923745561.63403, 36097048486.76035, 35915175809.38719, 50073980851.605255, 42673559807.52438, 36499584303.33586, 38065870905.30052, 36711926888.156906, 35140428695.9426, 30073664776.435566, 35464548429.41355, 31918667007.666466, 29192977296.565388, 39876116152.799736, 39038222539.78965, 26548397573.09872, 35643096648.04314, 43447191495.363556, 43938535540.256256, 43679599810.69177, 36677502636.69128, 31364421121.38778, 30066895361.08077, 38717083477.263885, 38955484165.33952, 45749194049.536995, 44256703958.486755, 35582924857.54315, 29224569741.884525, 34424978229.25123, 37853810359.726326, 35145597104.587685, 32883421044.42159, 38093493591.03401, 33316665955.306602, 32592641467.61448, 38490518600.906075, 33923530841.732056, 38034326258.3283, 38230768771.19776, 29771712395.505665, 33450921359.092957, 46984040966.07616, 29652570551.666367, 25870000000.0, 26197594431.503506, 36613904182.71746, 36625620912.03258, 35675126530.904945, 45160634295.20202, 25870000000.0, 39070504989.290535, 48023960560.77902, 29833168463.92574, 34057032780.35186, 31880301545.843063, 31091868955.394634, 34381398345.82584, 46898515923.0258, 50428270621.921585, 34322547160.083057, 51036056161.76953, 36655843276.80081, 49686590280.499374, 35829005010.283, 37280714483.54531, 38860391900.45997, 51750000000.0, 42350486545.39483, 32138858482.567314, 43242284305.58748, 34165574099.569706, 33400569493.828228, 42782394322.64507, 36626712236.21958, 38267143511.24654, 36515999088.26778, 38662139758.5436, 39271829183.411, 25870000000.0, 40988015149.29238, 30613016729.697506, 28217457547.733173, 36050977072.73241, 36971303324.0301, 32217233793.354763, 42198907925.67963, 28722076432.392002, 33893809290.99035, 32842812372.770187, 36126519018.22451, 38269097133.12847, 30473115831.3325, 41408917704.4827, 36834250228.89883, 26058362134.658207, 25870000000.0, 36346348355.599815, 35028298220.20527, 35764863068.91347, 36245703554.512985, 37909664740.28747, 43079165555.1429, 29921371161.83639, 29600687837.878838, 30015706710.21584, 38337261407.26698, 45407208648.59912, 33747743333.793747, 25870000000.0, 26940010667.620953, 31431170084.804443, 33001021334.342873, 33885140686.69465, 36675346442.31548, 34469863432.72455, 43861718559.33739, 32317136024.670868, 31268660948.712597, 39648424348.252754, 27755003207.814556, 39027353307.434845, 37093060588.152336, 35487216772.373795, 48252674144.83363, 32626463093.718586, 51750000000.0, 35000626417.56924, 29055309846.653248, 36879384036.66179, 30106595839.95234, 31886713995.04832, 39078110182.3237, 40190504631.48055, 32626692659.6613, 43383427230.369736, 44709732679.28558, 46971772425.632, 40004744358.75402, 46369686173.3143, 26109839786.38952, 34432292509.40651, 31242724857.37978, 37202706434.875305, 32920960952.32245, 35369834171.64138, 50829704397.20078, 35347537629.73022, 39194222855.80419, 34958282840.971245, 36917229689.3878, 36464522613.51275, 39434560554.18363, 44771511180.4919, 48760328568.22413, 38478032115.6743, 40432893100.10519, 29711501833.861675, 35863412131.05557, 43023070585.13128, 42460714772.43423, 37816157679.95543, 42614528392.77251, 39731977120.42849, 45049772779.11129, 38340264677.76118, 34202696584.024353, 38657062396.98033, 25870000000.0, 38980358425.31055, 25870000000.0, 26847310514.001038, 39458614877.54512, 39638976404.55628, 29650737140.355473, 32111346649.608067, 46428107236.9182, 33434409210.21586, 51750000000.0, 36413325037.852875, 39154303338.20875, 48497588687.558044, 37280511802.161156, 30503065735.20328, 35724950168.58605, 36196788449.75574, 28607560620.460518, 34812762582.12562, 31940746964.299, 42901897935.39079, 36649584236.8748, 34646981671.044266, 35747380777.30995, 37893307457.690895, 40628542691.140816, 30517280594.845474, 30291883144.33047, 44293539800.70779, 33861464343.41369, 28344912795.198082, 39403078441.70934, 39539737897.97724, 27779221840.729923, 37935994546.55059, 41491840876.927704, 38921750732.45525, 40737781108.41908, 28408073965.74653, 38624219736.608315, 34525601401.39435, 33441749386.747463, 42495208712.91648, 47330476564.99392, 50045700501.275314, 45972273148.25519, 35724907605.28013, 38772746923.83854, 41721945473.461655, 37215565283.67737, 37278776551.80128, 42144566634.22801]  # Truncate for embedding
baseline = 37001000000.0
mean = 36898848791.89981
std = 6283521201.307825
p5 = 27082986510.934593
p50 = 36340890968.74429
p95 = 48720170984.02497
display_name = "Annual Savings from 1% Reduction in Indirect War Costs"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---

# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-peace_dividend_indirect_costs.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 3.7e+10 |
| Mean (expected value) | 3.69e+10 |
| Median (50th percentile) | 3.634e+10 |
| Standard Deviation | 6.284e+09 |
| 90% Confidence Interval | [2.708e+10, 4.872e+10] |

*The histogram shows the distribution of Annual Savings from 1% Reduction in Indirect War Costs across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
