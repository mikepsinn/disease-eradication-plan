```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Global Military Spending After 1% Treaty Reduction (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata
)

setup_chart_style()

# Simulation results
samples = [2760099564120.9873, 2421540000000.0, 2885589842907.8003, 2940834574899.735, 2421540000000.0, 2421540000000.0, 2711828326470.066, 2594321947268.661, 2672982463123.2437, 2459058456026.1997, 2922945805766.725, 2893470382862.3135, 2695159713097.217, 2960100000000.0, 2805286015802.6216, 2457526202953.1733, 2777785982353.846, 2433233387966.815, 2922669507755.577, 2664164866724.0923, 2628545220435.0107, 2501641650239.1333, 2960100000000.0, 2636510574399.133, 2565477286795.388, 2585050436854.958, 2823477755415.5547, 2776869881466.337, 2789999586513.7095, 2795038242562.9556, 2960100000000.0, 2571091121978.5, 2544092266748.6914, 2468710353470.2065, 2847141733225.9614, 2960100000000.0, 2647205094937.252, 2462221708154.7295, 2466074719491.0337, 2856989134594.963, 2883518984215.74, 2826533879159.3296, 2505492509916.7397, 2740195364332.626, 2708812591805.594, 2736515227387.1094, 2920623168046.046, 2737855011230.003, 2865071641419.7812, 2695576018545.9814, 2755808492811.892, 2851492849929.656, 2421540000000.0, 2593434815302.3296, 2554740133486.4297, 2512157359405.722, 2604980018644.107, 2960100000000.0, 2455923830127.123, 2948975679509.78, 2421540000000.0, 2589502007809.907, 2721288963269.261, 2838703064789.2314, 2874321431220.593, 2897963556164.9287, 2585929504184.262, 2556784977878.443, 2916706482305.584, 2626856674819.705, 2421540000000.0, 2421540000000.0, 2442822693180.185, 2813595681777.968, 2715776654863.5527, 2868380707998.7944, 2565752449592.504, 2720145473789.5767, 2849872617709.0674, 2596107170704.2417, 2802283887515.6416, 2506388347277.404, 2582236037808.2656, 2577427854543.4146, 2421540000000.0, 2810737696800.003, 2554987419097.776, 2680804992075.335, 2808992674739.737, 2799421811305.723, 2861207887879.6494, 2651291168923.119, 2566764710699.022, 2656259195926.426, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2423939482619.5156, 2786395517352.0215, 2446229992131.972, 2578347245161.974, 2960100000000.0, 2583985576662.564, 2881868834152.2373, 2439373380469.489, 2623155917927.7183, 2435384955332.495, 2588430763023.7515, 2911570660575.432, 2421540000000.0, 2796042871040.9014, 2741719451334.376, 2523390811443.8887, 2421540000000.0, 2696799851482.9907, 2539718389196.362, 2740336106571.103, 2683308626913.5986, 2960100000000.0, 2614295799838.889, 2421540000000.0, 2725777749853.309, 2736872320664.666, 2960100000000.0, 2910061702460.692, 2774496204068.9414, 2960100000000.0, 2421540000000.0, 2511938431405.451, 2441087454119.9385, 2575353386675.252, 2421540000000.0, 2852591774940.269, 2618767537326.906, 2421540000000.0, 2421540000000.0, 2762522585192.2236, 2910937129521.8984, 2960100000000.0, 2960100000000.0, 2790466295434.061, 2425804097266.83, 2421540000000.0, 2749929824313.9834, 2468915157545.725, 2568798729080.3213, 2518877423476.9365, 2640126239871.8594, 2960100000000.0, 2719740905121.142, 2635431105658.02, 2421540000000.0, 2421540000000.0, 2550682438677.597, 2663140146270.2085, 2960100000000.0, 2712486856162.8784, 2953232705018.599, 2547380068478.5044, 2421540000000.0, 2431720713276.838, 2490612188255.9473, 2960100000000.0, 2466836075234.7246, 2911042429957.493, 2446852767042.634, 2938198021434.4014, 2782278485521.3833, 2635956128943.9385, 2666601186469.712, 2508173655646.4585, 2799293647391.167, 2558664903235.0723, 2421540000000.0, 2421540000000.0, 2723959965954.3164, 2960100000000.0, 2720539464313.0996, 2645966703326.2837, 2754903339048.574, 2960100000000.0, 2736704649836.7812, 2569934135649.907, 2960100000000.0, 2794462683017.29, 2960100000000.0, 2726854360738.2207, 2421540000000.0, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2629946572775.0215, 2577055231017.052, 2960100000000.0, 2421540000000.0, 2448855054893.388, 2854919160285.244, 2574121787775.0117, 2676098369127.5557, 2634167428023.33, 2769160843644.7476, 2960100000000.0, 2701769100247.768, 2855093451803.261, 2421540000000.0, 2664485786448.0073, 2461466869726.429, 2421540000000.0, 2452907203174.3286, 2589698738599.3535, 2933608763475.2793, 2421540000000.0, 2685659568220.6523, 2551226597659.809, 2591365566519.7637, 2959135770716.8394, 2825113534853.844, 2960100000000.0, 2636516834440.2544, 2497898061461.0264, 2618340175855.5137, 2743021899129.35, 2725043099899.231, 2421540000000.0, 2701743463622.7646, 2739120538081.845, 2960100000000.0, 2960100000000.0, 2459009539173.49, 2601801104162.597, 2421540000000.0, 2524257588745.3125, 2763098895458.724, 2960100000000.0, 2489653940076.3203, 2508334098826.8257, 2421540000000.0, 2634371596024.3525, 2421540000000.0, 2539731887634.8823, 2453223250495.565, 2652408241961.7173, 2421540000000.0, 2421540000000.0, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2421540000000.0, 2580898220101.2563, 2770260724362.016, 2960100000000.0, 2426452935023.2466, 2612751862618.7266, 2893339245197.344, 2796138379750.5664, 2578863351358.286, 2641961922793.8286, 2421540000000.0, 2614604029022.2324, 2607255939265.575, 2740197705901.3633, 2533181892067.187, 2806413732177.4087, 2960100000000.0, 2719301644385.822, 2773081035751.897, 2691700451142.953, 2677488512032.814, 2491523647640.8296, 2763344006160.5835, 2651608257121.5464, 2960100000000.0, 2960100000000.0, 2782527054124.6353, 2481231058024.3267, 2421540000000.0, 2960100000000.0, 2748568973834.865, 2808823647149.1055, 2421540000000.0, 2936986484789.6963, 2801625696073.6636, 2421540000000.0, 2554446537070.734, 2748834380849.7344, 2691515581515.8125, 2600558801685.353, 2649968413531.963, 2611006376894.95, 2718524120384.491, 2960100000000.0, 2421540000000.0, 2614949228843.2544, 2725026535622.9688, 2757698935767.9014, 2579954684656.0635, 2421540000000.0, 2766516106019.166, 2960100000000.0, 2421540000000.0, 2918409630354.673, 2591145307242.111, 2661137408189.784, 2421540000000.0, 2589612786810.6426, 2960100000000.0, 2837693171574.1685, 2960100000000.0, 2960100000000.0, 2797343736272.535, 2960100000000.0, 2797317640632.2646, 2907994734071.0557, 2599417711709.1724, 2695298204049.6436, 2497529017161.6377, 2955249684926.3184, 2421540000000.0, 2894786363931.8857, 2627027857672.316, 2960100000000.0, 2885710103542.655, 2960100000000.0, 2879931683528.0483, 2421540000000.0, 2659643643984.7476, 2421540000000.0, 2542560649731.649, 2960100000000.0, 2853269899187.167, 2497153701960.8, 2421540000000.0, 2686235771870.0547, 2421540000000.0, 2504085677770.794, 2762108062433.5747, 2960100000000.0, 2845092528250.2563, 2421540000000.0, 2760003105968.3833, 2696774044327.9956, 2790321792920.5747, 2960100000000.0, 2421540000000.0, 2524157775128.838, 2840029714547.394, 2421540000000.0, 2960100000000.0, 2777676764385.2515, 2913393945264.0405, 2529238871629.767, 2903871472297.8086, 2960100000000.0, 2740391272003.59, 2740807592588.593, 2750651839706.44, 2456532893644.28, 2638352396643.584, 2637038445906.3555, 2781846367255.898, 2958269970263.0376, 2421540000000.0, 2644285761862.5054, 2960100000000.0, 2486054432364.412, 2466623642597.145, 2732046956657.656, 2912755012500.2393, 2680519392348.4355, 2960100000000.0, 2916362634593.802, 2912009808026.7397, 2829626377370.545, 2960100000000.0, 2623228103722.8755, 2421540000000.0, 2960100000000.0, 2557971804328.7427, 2706434359048.1836, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2473550706341.9756, 2797497191476.276, 2821191340376.2627, 2752279659755.322, 2421540000000.0, 2421540000000.0, 2692022198111.2563, 2554382523058.8853, 2803013709292.7974, 2871663943076.576, 2714643353502.4116, 2888378038394.414, 2739389149299.11, 2822845678039.863, 2495723603523.725, 2629922384928.9663, 2730540281091.0522, 2905831655741.3916, 2574343635762.5415, 2820341421965.5425, 2607398647082.546, 2646256037909.674, 2908438835831.667, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2502306794411.9897, 2885297037767.508, 2602449834998.195, 2730816479367.8887, 2960100000000.0, 2960100000000.0, 2659064083204.705, 2960100000000.0, 2702184642104.331, 2462899255712.663, 2523327784519.9443, 2421540000000.0, 2450466140511.991, 2583533842762.032, 2900924563117.4087, 2960100000000.0, 2421540000000.0, 2784465357583.0894, 2421540000000.0, 2807298091627.599, 2642683147328.096, 2421540000000.0, 2937238011822.9023, 2520661027304.5522, 2538602029711.7773, 2421540000000.0, 2508299861210.8594, 2794221295343.6807, 2627396512998.2734, 2766700047066.0225, 2775894412855.8965, 2960100000000.0, 2587461902500.479, 2421540000000.0, 2960100000000.0, 2590379586302.936, 2960100000000.0, 2781841718928.4683, 2642669734952.0283, 2772256692702.196, 2960100000000.0, 2960100000000.0, 2696060614725.9907, 2720593463468.609, 2960100000000.0, 2460870105710.821, 2767916945694.3228, 2670567403680.8696, 2762631260383.0312, 2463889392052.707, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2557722816444.3286, 2600294113750.1465, 2960100000000.0, 2960100000000.0, 2432454747135.1323, 2771961522031.5117, 2570921031714.3677, 2602584888672.838, 2727423245242.7393, 2848048338593.27, 2588372563460.6206, 2960100000000.0, 2421540000000.0, 2679159549605.634, 2960100000000.0, 2737714145759.9023, 2960100000000.0, 2702021172385.4385, 2837161586208.754, 2662343139153.3394, 2632338011419.81, 2477169052030.0957, 2794893364971.1157, 2459428078274.2646, 2861265006661.0854, 2960100000000.0, 2777171087977.644, 2602095594416.0137, 2801498609334.9155, 2596281585514.733, 2939363021834.988, 2421540000000.0, 2589315430035.278, 2421540000000.0, 2421540000000.0, 2960100000000.0, 2927552414551.1943, 2492040102749.3076, 2421540000000.0, 2421540000000.0, 2536173391971.289, 2960100000000.0, 2796171347281.6587, 2532109440321.8794, 2804606351373.3794, 2421540000000.0, 2599222622785.5044, 2704166755442.2676, 2654568607958.685, 2897229074930.515, 2771114648268.4673, 2862047373931.286, 2499785062937.995, 2928320671645.526, 2960100000000.0, 2430500236714.0366, 2450573254790.887, 2960100000000.0, 2626846282156.6597, 2960100000000.0, 2561843923742.1855, 2960100000000.0, 2712814621244.879, 2747329879045.8345, 2960100000000.0, 2582566631135.2827, 2437548008421.526, 2560303820482.4697, 2801042682497.6567, 2421540000000.0, 2853251994454.817, 2537368830973.5513, 2960100000000.0, 2421540000000.0, 2475419360756.894, 2421540000000.0, 2465644697339.2163, 2744436636310.84, 2630023331594.445, 2610641720725.1797, 2635286512308.034, 2732341858307.0444, 2421540000000.0, 2873066760471.797, 2860431925582.248, 2782302623364.1187, 2830308663174.975, 2757815576985.5435, 2960100000000.0, 2654305540291.889, 2596693358308.707, 2483590821165.108, 2421540000000.0, 2421540000000.0, 2450303971634.315, 2658654988004.684, 2768255125661.4634, 2691159935825.59, 2480617796854.841, 2929012793080.2856, 2882414246751.5127, 2635164690127.7227, 2508641949560.8877, 2828021179589.104, 2728143749381.0327, 2421540000000.0, 2659371169686.99, 2748373381869.4287, 2447641846224.4355, 2728652638202.734, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2610865748362.0024, 2776318788862.878, 2421540000000.0, 2421540000000.0, 2600141773983.2583, 2421540000000.0, 2875230441320.521, 2960100000000.0, 2421540000000.0, 2462883242441.064, 2741093986590.8696, 2960100000000.0, 2421540000000.0, 2744811775410.085, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2566685776755.214, 2541975208619.22, 2903534784481.67, 2742792869097.2163, 2421540000000.0, 2818722295087.782, 2527575476482.1274, 2960100000000.0, 2514988204570.2524, 2512724402025.0195, 2825963647279.188, 2889182982935.9575, 2799859755901.56, 2421540000000.0, 2825090709251.2563, 2421540000000.0, 2741046887216.97, 2421540000000.0, 2799363441526.3315, 2470477591353.6865, 2421540000000.0, 2875065145326.048, 2742788710929.507, 2518405095727.543, 2960100000000.0, 2562325238853.6255, 2686055063604.92, 2750259559715.508, 2516976309708.7256, 2806301132983.6084, 2538715451273.6924, 2569751850719.5483, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2571384989282.002, 2421540000000.0, 2595812630969.571, 2602102286911.0703, 2627218431345.582, 2421540000000.0, 2836817479428.64, 2821281263881.0366, 2421540000000.0, 2870874332763.412, 2960100000000.0, 2723789444652.52, 2588871783002.947, 2639806985151.5435, 2846936501937.6064, 2421540000000.0, 2721733540040.35, 2575185345265.518, 2960100000000.0, 2631349546070.2793, 2960100000000.0, 2421540000000.0, 2838996674909.573, 2764145153856.621, 2455136062952.346, 2725266756187.2646, 2960100000000.0, 2592369069835.7197, 2421540000000.0, 2672779384300.644, 2446975805201.0664, 2587576815569.998, 2655763873672.872, 2421540000000.0, 2421540000000.0, 2809362613639.684, 2541435099768.076, 2421540000000.0, 2895506529724.45, 2751207933843.448, 2493433909412.0796, 2421540000000.0, 2910263934955.239, 2772415630574.5054, 2960100000000.0, 2792075405889.7773, 2783042418122.1143, 2633251854198.3657, 2904744125969.757, 2849729005835.0654, 2960100000000.0, 2541788970155.552, 2563666174290.8867, 2552516227934.459, 2897227803172.1035, 2960100000000.0, 2557680666181.6426, 2566386975655.6675, 2762677836571.3145, 2612625813069.1875, 2944206811808.57, 2421540000000.0, 2465527730422.685, 2476444179443.71, 2421540000000.0, 2432079331456.289, 2443869786145.6143, 2624289924900.632, 2960100000000.0, 2612808469725.386, 2421540000000.0, 2662297634571.3306, 2960100000000.0, 2429092205958.619, 2444986850871.2075, 2830877755308.562, 2618946896087.833, 2856103499928.5435, 2673823655330.45, 2871580879363.2466, 2421540000000.0, 2674240338148.3203, 2621781902645.6777, 2421540000000.0, 2421540000000.0, 2867025849650.0815, 2585355033516.4424, 2421540000000.0, 2651901251422.801, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2441986019073.9517, 2960100000000.0, 2754013345370.7466, 2890448676095.7896, 2421540000000.0, 2421540000000.0, 2799779978691.6387, 2693075252940.44, 2828108884947.7593, 2627808898897.481, 2752792979813.3306, 2720031349674.8306, 2893463298119.542, 2901915325615.707, 2421540000000.0, 2421540000000.0, 2958836939666.2275, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2704047355234.871, 2937982671328.6616, 2960100000000.0, 2818971752679.0107, 2580005611577.074, 2449245048443.6377, 2680526140124.675, 2598719328432.5996, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2960100000000.0, 2442482032251.302, 2915846412505.6123, 2853865551557.031, 2798309082742.0815, 2960100000000.0, 2852654432384.1743, 2882587216449.7314, 2853091299455.0728, 2770049571263.9526, 2421540000000.0, 2699892964376.373, 2532963391801.963, 2421540000000.0, 2960100000000.0, 2960100000000.0, 2960100000000.0, 2746503631623.191, 2960100000000.0, 2680687081682.8115, 2732180793069.711, 2421540000000.0, 2785622120653.3735, 2693642567757.1455, 2421540000000.0, 2663827061399.642, 2656256187788.765, 2960100000000.0, 2927268678974.3125, 2680524575226.8804, 2744743651723.1143, 2689300327917.582, 2623816327583.3755, 2421540000000.0, 2637425327293.446, 2485432055321.7627, 2421540000000.0, 2817544830085.6445, 2784031314894.298, 2421540000000.0, 2644898940508.8965, 2957053599539.387, 2960100000000.0, 2960100000000.0, 2687879140881.0283, 2461021250551.113, 2421540000000.0, 2771103502528.4824, 2780705042765.204, 2960100000000.0, 2960100000000.0, 2642382118945.2104, 2421540000000.0, 2593580885656.582, 2736117427735.2153, 2624033765359.3394, 2527485916604.3745, 2745865744632.641, 2546195672009.3823, 2514868152623.369, 2761954699773.322, 2572225593525.137, 2743461805484.281, 2751436897004.7983, 2421540000000.0, 2551971926964.883, 2960100000000.0, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2685251979782.4688, 2685736130703.4326, 2646237906539.73, 2960100000000.0, 2421540000000.0, 2785328308528.423, 2960100000000.0, 2421540000000.0, 2577924464406.406, 2483748306310.973, 2448948119415.682, 2591730347781.073, 2960100000000.0, 2960100000000.0, 2589229716893.95, 2960100000000.0, 2686984647195.8594, 2960100000000.0, 2652663285345.0293, 2712698806461.283, 2776878304466.085, 2960100000000.0, 2914760617839.3853, 2495078586320.858, 2949187342926.49, 2582550643721.886, 2549806757514.4683, 2931472985922.399, 2685781222235.68, 2752911658965.756, 2681203763442.3774, 2768886999093.203, 2793406264090.7285, 2421540000000.0, 2861546848562.7764, 2427624133881.2217, 2421540000000.0, 2661910809403.154, 2699989900624.862, 2498505221575.4614, 2908877768061.9653, 2421540000000.0, 2570955521665.787, 2525726723901.3784, 2665052271687.4033, 2752990848458.9526, 2421540000000.0, 2878067280675.305, 2694345682440.72, 2421540000000.0, 2421540000000.0, 2674177745961.3, 2619095495055.3877, 2649986429409.2515, 2670002815137.5317, 2738391520861.8423, 2942913678608.382, 2421540000000.0, 2421540000000.0, 2421540000000.0, 2755752763371.3945, 2960100000000.0, 2564706700449.555, 2421540000000.0, 2421540000000.0, 2463971011567.0063, 2532575091177.8853, 2570585000219.441, 2687790104161.1475, 2595485782741.4883, 2960100000000.0, 2502867761076.1343, 2456784639952.429, 2808468434240.493, 2421540000000.0, 2783594522570.723, 2704996538071.306, 2638375080241.173, 2960100000000.0, 2516338288874.0176, 2960100000000.0, 2617929463308.1147, 2421540000000.0, 2696205425915.1113, 2421540000000.0, 2484029791676.7417, 2785633789953.2817, 2830040082878.2734, 2516348265222.0464, 2954607469060.6216, 2960100000000.0, 2960100000000.0, 2822662289644.123, 2960100000000.0, 2421540000000.0, 2593891372575.4473, 2455636203996.9854, 2709499020367.813, 2529111325182.6113, 2633454141343.719, 2960100000000.0, 2632518615622.4575, 2790294524751.335, 2616144414416.488, 2697764094443.2515, 2679073394495.669, 2799922513586.6416, 2960100000000.0, 2960100000000.0, 2761449806703.8003, 2839644616596.9087, 2421540000000.0, 2654098346530.376, 2940753830371.642, 2919032865469.847, 2734583584362.314, 2924986321380.144, 2811801704365.3447, 2960100000000.0, 2755874402093.706, 2584131381893.582, 2768682102120.886, 2421540000000.0, 2781705368917.0776, 2421540000000.0, 2421540000000.0, 2800884723849.1396, 2808091323293.9526, 2421540000000.0, 2493874880782.6743, 2960100000000.0, 2551262048572.321, 2960100000000.0, 2676953265272.0273, 2788692845672.0957, 2960100000000.0, 2712690496530.5215, 2422707349000.1543, 2648319673861.7554, 2667971899597.6094, 2421540000000.0, 2610002609670.5854, 2486400680140.652, 2936084068712.646, 2686726116824.601, 2602992014177.104, 2649256472043.6934, 2737725690905.5156, 2847378824987.951, 2423343443572.034, 2421540000000.0, 2960100000000.0, 2569572793305.921, 2421540000000.0, 2798662793036.849, 2804127884148.082, 2421540000000.0, 2739463023164.4746, 2881313358240.27, 2779347996608.338, 2851690047203.082, 2421540000000.0, 2767356452384.5557, 2597849757155.3306, 2551577631037.164, 2920368793619.5396, 2960100000000.0, 2960100000000.0, 2960100000000.0, 2648317895991.9785, 2773347640987.313, 2890306140196.2466, 2710026674657.797, 2712619350509.7295, 2906766506995.902]  # Truncate for embedding
baseline = 2690820000000.0
mean = 2682501624633.4497
std = 192326661755.52023
p5 = 2421540000000.0
p50 = 2673951493027.714
p95 = 2960100000000.0
display_name = "Global Military Spending After 1% Treaty Reduction"
units = "USD/year"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Mark key statistics
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {p50:,.2g}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {p5:,.2g}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {p95:,.2g}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {baseline:,.2g}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG
project_root = Path.cwd()
while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
    project_root = project_root.parent

output_path = project_root / 'knowledge' / 'figures' / 'mc-distribution-global_military_spending_post_treaty_annual_2024.png'
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 2.691e+12 |
| Mean (expected value) | 2.683e+12 |
| Median (50th percentile) | 2.674e+12 |
| Standard Deviation | 1.923e+11 |
| 90% Confidence Interval | [2.422e+12, 2.96e+12] |

*The histogram shows the distribution of Global Military Spending After 1% Treaty Reduction across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
