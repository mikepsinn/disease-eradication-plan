```{python}
#| echo: false
from dih_models.parameters import *
```

```{python}
#| fig-height: 6
from pathlib import Path

import matplotlib.pyplot as plt
import numpy as np
from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_BLACK, COLOR_WHITE, PATTERN_DIAGONAL, PATTERN_HORIZONTAL,
    add_png_metadata, get_figure_output_path)

# Setup neobrutalist styling

setup_chart_style(style='light', dpi=150)

# All cost categories - what they admit vs all the hidden costs

categories = [
    'Admitted\nMilitary\n$2.7T',
    'Infrastructure\nDestroyed\n$2.4T',
    'Veterans\n$500B',
    'Refugees\n$800B',
    'Trade\nDisruption\n$1.5T',
    'Lost Human\nCapital\n$2.0T'
]
values = [2700, 2400, 500, 800, 1500, 2000]

# WHITE slices with black borders

colors_pie = [COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE]

# Create minimalist pie chart

fig, ax = plt.subplots(figsize=(14, 14))

# Create pie with autopct to show labels inside wedges

wedges, texts, autotexts = ax.pie(values, labels=categories, colors=colors_pie,
                                    startangle=90, counterclock=False,
                                    autopct='%1.0f%%',
                                    pctdistance=0.85,
                                    labeldistance=1.15,
                                    textprops={'fontsize': 28, 'fontweight': 'bold'},
                                    wedgeprops={'edgecolor': COLOR_BLACK, 'linewidth': 4})

# Make percentage text black and bold (visible on white slices)

for autotext in autotexts:
    autotext.set_color(COLOR_BLACK)
    autotext.set_fontsize(36)
    autotext.set_fontweight('bold')

# Make label text black (outside the pie)

for text in texts:
    text.set_color(COLOR_BLACK)
    text.set_fontsize(28)  # Even larger font for maximum readability
    text.set_fontweight('bold')

# Add total in center

total = sum(values)
ax.text(0, 0, f'${total/1000:.1f}T\nTOTAL',
        ha='center', va='center', fontsize=64,
        color=COLOR_BLACK, fontweight='bold',
        bbox=dict(boxstyle='circle,pad=0.5', facecolor=COLOR_WHITE,
                  edgecolor=COLOR_BLACK, linewidth=6))

# Equal aspect ratio ensures pie is circular

ax.axis('equal')

# Add watermark

add_watermark(fig)

# Save in brain/figures directory

output_path = get_figure_output_path('war-real-hidden-costs-breakdown.png')

# Save the figure

plt.savefig(output_path, dpi=300, bbox_inches=None, facecolor=COLOR_WHITE)

# Add metadata for attribution

add_png_metadata(output_path, title="War Real Hidden Costs Breakdown")
plt.show()
```
