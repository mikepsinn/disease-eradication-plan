```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Total Annual Cost of War and Disease with All Externalities (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata
)

setup_chart_style()

# Simulation results
samples = [133693084959425.61, 106641467686358.22, 142755160203519.34, 148876144287177.38, 91680284447678.17, 102150294552475.58, 129538967767852.44, 120383442512149.72, 126608134901477.03, 110171880056067.53, 147077278208882.97, 145786561685196.8, 127836110353889.61, 154027865312914.78, 137547871630998.89, 110587531264876.22, 134559732713481.19, 108016526333632.92, 147108877320015.56, 125084320359137.98, 123325063498244.81, 112138595851235.69, 155530565528727.97, 123485047701623.0, 118418915646010.03, 119811518742727.0, 138975653403346.22, 133907550426284.67, 135603104554510.62, 136159896358718.53, 176984143573831.12, 117259455532663.03, 116215078672073.28, 110784420905674.88, 140481968092492.56, 154384079274286.34, 123470948183411.12, 109264860884033.88, 110185832006995.45, 141258775890783.34, 144364752850443.12, 139372320365985.22, 112884086860101.86, 131035726439085.47, 128918938034166.11, 131885575720302.31, 147595784821791.03, 131324550945807.44, 141155195349811.16, 127332991267066.08, 133413676731768.39, 140828680869888.66, 98768516907515.4, 119395350279185.22, 116356490271584.86, 114228034543097.48, 121204176858260.34, 162931083101834.0, 109367497249045.02, 149671735374366.75, 96329836247414.11, 119035967603888.05, 130428826955909.5, 140733590818287.1, 144385348007581.22, 144596861562163.1, 119128487435572.4, 117551010964846.02, 145671160786254.66, 122856828561685.16, 103107253689142.16, 104755057002958.33, 107249705301033.16, 137343977127272.1, 129393615094039.44, 143478054587277.62, 117692151841367.48, 129142101247286.88, 140933331438784.47, 120278967799567.39, 136607313573269.34, 112609820221578.06, 120316656821756.22, 119335109620559.0, 104022822403249.39, 137558759238319.86, 116543232096368.16, 126656016986552.66, 136675361710325.98, 138093016014102.88, 141844839936844.7, 125637741437836.84, 117610523952148.75, 125303574315516.22, 95340145903621.34, 98437281609544.2, 102300068230440.78, 106673058163887.6, 134896015547971.25, 109021307854208.62, 118783611996679.14, 158391412463977.34, 119293580415373.78, 142389607963078.56, 107578995642716.34, 121777112722890.28, 108398994225115.44, 119602805919102.28, 146654537471846.25, 94419810970186.97, 136877987147372.89, 131829224271640.69, 114351372759493.78, 99260933108960.52, 128331687209214.55, 116960190317053.12, 131250465124127.03, 126267786819552.75, 166695741503830.8, 121161567119628.69, 105362119220340.95, 129933718872012.94, 132865806345640.81, 159017476266627.9, 144941462806042.22, 135999624520470.9, 161693272113175.1, 104617107528872.55, 113377320895989.4, 109331375433378.72, 118389024163546.88, 100583624806610.11, 141102463837478.22, 121824791634952.38, 98884796949680.31, 106882069826424.19, 133777134601960.75, 146231456205655.94, 177022272905940.0, 177635675933394.47, 137339301294688.97, 106601780380184.11, 91742301266809.53, 133613778304565.22, 110633213090685.42, 118725765367640.69, 113493688031959.12, 123881930699657.19, 151743166355519.03, 129957864953056.17, 124509135516441.27, 106070570820349.06, 95609487710833.7, 115637781244858.94, 126815617838350.81, 172017103203314.12, 129499923477578.1, 149583294539195.4, 116774522473783.08, 104396846568535.03, 108618374459013.75, 112553432368667.16, 177788650650573.12, 110851788671237.16, 146875884250639.53, 108678230378830.38, 149199474837012.25, 135892077965349.56, 123311260666020.6, 125469481918174.9, 113765654977403.52, 136024326609633.44, 116520022705298.64, 103080130870426.38, 102376638132030.22, 130712992100759.17, 166149804147090.56, 128987498775650.97, 124601614087268.23, 134300065988158.25, 159061468904074.3, 132180136203833.5, 118287365152023.69, 153247653260033.38, 136204581510483.34, 164905578451364.3, 130023886698310.66, 103946552600100.1, 100006113550260.8, 168620333775729.7, 171250641681888.3, 123517774570688.64, 119905490781627.25, 161080542044287.0, 104680520735642.08, 109732119660621.81, 140544496580547.25, 117957768037253.83, 126982004006573.83, 123253138561354.62, 134569796617230.38, 161138929974600.97, 128840151588748.77, 140905776117728.1, 91730116110857.55, 125379843328034.3, 109577003011702.34, 103549837860009.97, 108370837971300.69, 118432830999712.6, 148799361618702.97, 101282610765453.1, 128449984127797.81, 116183988320743.1, 119746959023078.1, 150437400410801.0, 138453849912084.36, 158423451725531.47, 124013566646494.17, 111747706913518.75, 121303010253682.06, 131953230040179.23, 131318569199107.97, 105036775106677.48, 128224611722044.84, 131590706813330.12, 178077495046320.8, 174048751868773.9, 110313698709386.1, 121497100465083.6, 98790650979297.48, 115749779239021.38, 133759125365971.66, 156624350992354.75, 112119177045307.5, 113544781633335.03, 90847614341758.34, 122533811632626.08, 105562118931725.05, 116588465771341.1, 109345439006864.38, 124481514751576.03, 94494171282402.31, 99503100058238.1, 177731841155304.5, 101961716930451.42, 105188002874809.5, 173124638825808.75, 177052073925984.84, 103343343730342.77, 119431844681564.77, 135207081821326.48, 169774821261055.9, 106905374265970.34, 120460324575432.89, 143393533127394.22, 137640100305755.34, 118372804210590.36, 125100223073472.38, 100028535929025.92, 120735081904784.62, 121140917556518.9, 132448759380907.56, 115730597446990.75, 138063513269524.97, 149895200883912.25, 131216630954733.03, 135745790540364.62, 129063181659310.5, 126888851585354.5, 111812334426636.86, 133407110528824.12, 123672544905580.56, 177248119858276.75, 163960854040178.75, 134253320359999.56, 111414396595610.03, 104703412422927.98, 155403012750510.84, 133068973269225.64, 137821883048253.84, 94500957230475.62, 148367422343087.56, 136382679316387.72, 104215634228716.64, 116584943240721.28, 132475951566075.58, 127873228404617.16, 121218776576849.14, 124369924656049.3, 121770399192912.55, 129127490293993.22, 163007630993402.22, 91700963212287.78, 122740836507938.31, 130389935980459.44, 131868020975849.38, 118719417941246.1, 94571508332799.92, 133210542388539.6, 170205136538958.7, 97080822104530.16, 148274874018677.47, 119517977871575.84, 124582494277466.4, 105600885691116.11, 119844624986747.8, 158578405968284.8, 141065007101586.62, 169591081250896.94, 155559329198311.75, 135481754089724.34, 169624241448620.06, 135620661839462.19, 145341373950266.28, 120977903953672.33, 127727037810710.38, 112225554814059.88, 150248939012644.9, 104005600142366.73, 144487807349459.97, 121992398672470.27, 156210682942255.94, 143716894444791.75, 172423772988988.34, 143384063589771.4, 97443140966900.66, 124351064215333.5, 104910781795428.08, 115767453604083.45, 164446621302876.56, 140393952678158.39, 112580366539144.9, 107727595470491.7, 128697735755335.67, 103419562769669.61, 112484801930353.1, 134646323136122.17, 153104488762070.56, 139931327871959.08, 91548923916068.23, 132432404521302.72, 127905332784335.67, 136611992626081.64, 166223276587194.06, 92113102944822.27, 115741982474225.7, 140454800107943.72, 97445296604823.83, 164133893194280.8, 134603054244352.78, 147086935342457.22, 114659073757664.7, 145840186415682.7, 152907215576157.3, 131271394544394.45, 130524201625667.25, 132059622962073.22, 110160483850964.84, 122899074117074.67, 124261693127920.8, 134638196333514.34, 150108382906482.7, 105799182322137.47, 123369987970955.77, 162867450748836.94, 110758631640443.16, 109917871760179.34, 131076265185735.47, 144906532324177.16, 126342618170911.77, 159140135882599.28, 145841628946212.78, 146656602692938.06, 139711726769220.94, 177993843320562.8, 122927344951729.28, 90894141368379.33, 167460028440605.06, 116569730517948.19, 129123011432204.22, 159901993433463.0, 96390628098987.45, 102443385667842.52, 96085079612653.44, 111817948304636.98, 135932145181534.7, 139078420833053.02, 133863813662704.56, 100181291260666.2, 91789156000358.78, 127938136908770.78, 116154295284739.95, 138395815257300.16, 143032244296206.56, 129729341177145.67, 143478542921102.78, 131794732012544.73, 138654347325881.12, 113530075262830.02, 122883693162024.6, 131055293993398.28, 144975747591718.16, 118002873237597.23, 138896276158974.4, 120058706377674.6, 124958055793283.3, 146883468239942.97, 91230359313947.64, 101884703817189.98, 99416069920114.89, 91521474652580.28, 112665877455855.53, 143832792328126.7, 120869211154393.7, 130612305553709.81, 152255898461124.97, 159097325320869.8, 124887124955016.94, 158669646835150.06, 127593282702058.86, 109871285091515.98, 115396987797237.56, 98826359523620.66, 108269124951586.1, 118720029878982.66, 145076425434690.72, 171417168469320.12, 101288189012123.22, 136835241580442.19, 106210259988932.78, 138757363833351.94, 123433728160404.53, 92783292556609.14, 149266457179217.1, 114473849434845.52, 115909067361489.61, 104627892309770.94, 112747612126270.94, 136250624041774.84, 122223224920991.55, 133131474627000.53, 134354178939840.34, 158913438361631.88, 120037948655471.61, 97733392747279.3, 151999292154855.06, 119665542396004.34, 153423752326902.88, 134516066033275.64, 123208396108222.56, 135523431482097.84, 174699707685391.56, 177009295504740.47, 127922443381406.6, 129986314394190.5, 151719415779204.88, 110018333674607.95, 134409644652294.55, 126035963304874.78, 133232226003986.94, 109785720646548.67, 96843366380727.08, 91217279109873.16, 105130484488539.03, 117902481726072.28, 121659636525838.11, 177541654022780.6, 152753412745579.28, 107621130103099.4, 134319079132044.55, 118090193881582.47, 120544772240116.81, 130771306784905.88, 141838861007570.4, 119795753877059.25, 151078765673611.75, 104972439462129.0, 126989221470596.86, 178208850517177.44, 131831909377249.0, 162022554688748.7, 128979136657578.1, 138785577950405.53, 125832260279917.19, 122605435055682.55, 110642542376350.05, 136349322138088.86, 110733258601242.31, 141233740095855.3, 152445001791631.34, 134686865072690.0, 121360933189524.05, 136693712950084.56, 120358866783642.2, 147911130171332.47, 93663074357876.67, 118814595716725.23, 91930069408889.17, 98482732015483.73, 160167240117909.8, 146641151748889.2, 111887817837771.7, 98778782689807.0, 92587500000000.0, 115415828464619.47, 178501498279570.25, 136558105976378.12, 115133134240635.0, 136860078098418.12, 97268620265889.03, 120927933330451.47, 129457478715698.16, 124081442406148.33, 144632296710849.38, 133667827635911.77, 142049043251854.75, 112461263971586.36, 147971882315610.88, 167554980301876.56, 106335945003328.81, 107813386317652.31, 159070816473557.0, 123562963385713.52, 160506620481579.4, 117153909545232.75, 163267735766349.66, 130207633912411.7, 131762522352509.4, 166026655124060.88, 118638568479236.25, 107608376659110.75, 116786962764986.25, 136033931703084.89, 97253184388500.78, 140330176145611.33, 115682368779321.98, 154195104456400.62, 91509930385415.44, 110525249091042.72, 94902696812058.44, 109445436419515.64, 133399892992595.1, 122748849074712.2, 121185234123992.45, 122721961960253.97, 132276992290798.72, 106353621077031.61, 143142417475271.84, 142224418855206.66, 135385322245521.61, 138388929277849.58, 133789512020338.81, 177198930762068.06, 125438536490999.38, 119813220403626.47, 111387740815286.11, 106599223764434.34, 103411304025973.81, 109309926700712.12, 125567569683796.66, 134697202960286.55, 127279358284185.75, 111793900406349.69, 147533946357368.88, 143557669234398.75, 123350395789605.98, 113127593205381.75, 138441037017089.4, 130828269423005.75, 98984765208681.67, 125050367192374.44, 132417696453021.1, 107625186546791.58, 130679611005840.4, 99943273008432.23, 160340779081333.7, 156759206847781.3, 121360684472828.34, 133437954283049.11, 91309124915225.94, 104539535892052.6, 120253272854076.27, 106274648430950.2, 143965513119130.0, 177154587610172.3, 103801304680056.03, 110940900410762.11, 130986004374608.03, 166358467556624.0, 102157064811868.11, 131613080839813.97, 174359876449077.2, 95600224198736.14, 100990434336070.39, 117261944145507.97, 115035222884496.56, 145672793831431.28, 132352122589298.5, 94376821753895.44, 138864379037375.08, 114029844811764.92, 157754108059382.44, 113754467722111.73, 114403521609114.16, 139578654129586.42, 145745126514358.47, 136125353075061.75, 94719084780370.58, 138526337922577.56, 106175481488560.75, 131421357595642.31, 99050767662140.5, 136957372105634.97, 110129829386192.17, 101506103619252.8, 142174794290659.6, 130716795484710.27, 115106655596665.83, 163490814084866.84, 118100338555115.4, 127790177798769.25, 132242075221763.88, 114394562017243.98, 136542233969468.66, 115743959282579.56, 117616549006234.34, 160319501033690.22, 107243993354922.12, 91093520517781.28, 166217455794459.38, 177790018648131.75, 117225079206469.66, 90966296067214.64, 121375438929691.1, 120877397433770.5, 122248555473365.9, 104814875129121.31, 139515642623962.84, 138637530263196.05, 98105481356284.08, 142669111150173.78, 178386837240397.0, 130930687156705.84, 120761580072064.47, 123938193687509.27, 140744573479926.56, 95566218016367.17, 130144500481061.6, 117364632967032.31, 174289024314092.47, 123169345567291.47, 168260962784333.1, 105561119842785.08, 139729706618412.17, 132521375768627.62, 109847750798109.66, 130136888734352.9, 155054233984511.06, 118744826118279.58, 95624142128146.11, 124955049792518.9, 109526781925938.95, 119285012569805.95, 125564231134373.97, 95182531442965.66, 97415727342562.4, 137859724474895.03, 116792064451052.73, 91300445032221.73, 143806730881585.94, 133515334582221.45, 111309569010453.33, 101803597020694.05, 145360120158369.3, 134687653606816.58, 179406000000000.0, 136648034333303.25, 135204911175201.66, 123454400474798.78, 145257329794698.3, 142359854615546.3, 156252128847771.03, 115852968894316.92, 118036007569543.67, 117007095683225.62, 145400152643265.9, 163093908147616.47, 116998854790448.61, 118526677262094.78, 134373894687879.52, 121769160613070.0, 150297169396567.47, 92178839442566.52, 110628918161506.88, 110008817145121.89, 91803268494184.56, 107630434370202.62, 109487383163622.34, 120953273682195.56, 153054970826906.94, 121578282000127.77, 105695347390963.3, 124880398892995.1, 152956535692263.0, 107595961217632.27, 109628788684272.36, 139231592660443.98, 121154287236049.83, 141258391436994.53, 126068529351676.5, 143405176682460.53, 106658617113455.58, 126822694158433.69, 123475016938261.78, 103921688021887.88, 96772589555064.02, 143294619664848.03, 119358338371025.19, 106325304920259.16, 125774124525079.16, 152888581718454.88, 92153283095229.0, 98789853603398.08, 107730857589443.55, 161286577876205.25, 132893976014893.06, 142717575789577.1, 105139093992290.25, 104960968301076.0, 138020781260457.44, 128178400975133.02, 140494731370112.11, 122317211759294.67, 133253700881494.94, 129883595093337.53, 144598657345041.62, 145486316495654.25, 96526862928100.27, 91221127116051.83, 150729685855991.94, 155172742020625.16, 105745356937091.78, 91725141570719.75, 129768914191577.61, 147078106640027.06, 171878823516620.78, 137406750915248.22, 120139568773850.53, 109193185789006.4, 127189563551873.22, 119882674102936.84, 105838213873916.95, 177894649312491.25, 171642010181540.88, 152988378516602.53, 107679150109323.47, 145791120384810.84, 140497630904177.22, 136190948627757.31, 157062362202450.9, 141619706481753.44, 143724033924904.38, 141352396606004.1, 134717171016929.84, 92801227077110.36, 128672905305757.25, 116231840292181.39, 100715014032745.56, 168513691281360.5, 171120566849260.56, 159563194463883.3, 132822498245972.66, 159749090220222.72, 126217448745975.97, 130517903587901.75, 106278917850524.03, 136267551654079.66, 127934000208408.88, 101425829522057.7, 125069894196102.94, 125277766195976.72, 171410528656292.2, 147312465974884.28, 126522306302605.4, 132807903366380.64, 127552806042500.19, 122487420485044.44, 104753633438294.17, 123058085832205.95, 111678604394824.66, 101644743020538.39, 138082970795291.66, 135435294754985.66, 93042188160498.34, 124877017727362.7, 150472990923226.34, 151679658740366.38, 150412137501201.22, 126555703096566.94, 110370848383914.1, 105092705762525.78, 133457157889807.72, 134658195507217.56, 158178832591358.88, 153056579803710.3, 123199796058620.9, 103332747109441.1, 119147199766338.0, 132626480247395.89, 122544653397037.4, 114568919058876.69, 132101021639158.5, 116321459534414.53, 114206180838206.34, 132510404868884.47, 117828793631660.45, 132119762551006.17, 133724318609242.4, 105160537686605.58, 117923341269339.47, 162888725422430.3, 103518657022727.38, 91584327358478.53, 93193431323421.58, 128099389817737.2, 127223604066680.19, 124554434092902.1, 155464206196306.12, 90886035514804.11, 135464151160836.11, 165117363283999.56, 104289698757160.27, 119138991234904.06, 111293517002109.11, 109048582049830.8, 120397910905742.69, 163120602019644.88, 173097138101129.9, 120562956059716.89, 175378253978442.78, 127677104018963.9, 170668146918714.8, 124794184237546.22, 129399708324587.47, 135670594176604.53, 177094790406476.44, 145487149027356.38, 111980449451625.0, 149007291920948.9, 118770604645062.31, 116456710411072.81, 147550581282820.56, 127260893496231.7, 132490121201885.8, 127306516815469.81, 135530426127359.64, 136384217459733.92, 91440649336998.97, 140540392380893.78, 108307169361623.61, 99374716333796.05, 125326819523714.83, 127228694722487.11, 112502312368044.14, 146114146455115.66, 100595141004921.86, 117416306085818.4, 113876867225368.78, 126970989545769.03, 132944345241814.88, 106397012908375.5, 143401829977323.34, 128043913160887.98, 91401394643393.94, 92239326435535.56, 126298390116130.14, 122090740342977.36, 125689916927193.08, 125277332158559.47, 131139831591341.12, 149214681669313.88, 105481018684439.08, 103458206488593.56, 104861857767212.9, 133597820801492.84, 158166678039507.06, 117763633309108.44, 91196075271900.66, 94428736302961.17, 109841959211887.81, 115817180466117.56, 119392839850894.98, 127316880058123.6, 120188962734619.88, 153029827270376.38, 113111097659424.45, 109523821848679.12, 138777123728263.16, 97735813773196.28, 134738276628306.92, 129926519056123.31, 122604737842230.95, 167022489696790.1, 113945093330636.28, 177451610482016.4, 121700784366824.4, 101913896508664.1, 127911290020608.0, 105780526229318.33, 111210153162222.08, 134392237252791.52, 139298827427316.62, 114647657037452.28, 148654779475196.8, 154341937566887.56, 161422454686898.75, 139465194705670.16, 159602498310027.53, 92713129185058.25, 120484918098200.58, 109758904027100.52, 130605532560608.34, 114792786443346.66, 123198271213837.52, 174910714387186.72, 123145187180609.45, 135776248357871.22, 121207910464992.84, 128352053616184.28, 125909131336605.67, 135519814041912.53, 153717259586004.12, 168329862300419.2, 133747135283380.25, 140667028671414.06, 103786223998568.38, 125632301061155.25, 147782145673596.44, 146105942373764.4, 132190332136053.06, 147528522849419.0, 138321401454932.95, 155672335961972.03, 132714461565901.33, 118522190580043.19, 133038469345796.8, 92587500000000.0, 134216859159936.92, 92500829016856.34, 94719147849492.86, 137059975470948.19, 137610315789754.5, 104331216083769.06, 111749206276218.67, 158533714757163.53, 116296111419171.42, 178170025549988.34, 125966720869611.62, 136735111475153.62, 166718373603023.75, 128810745251872.22, 106904840540249.62, 124669521127031.88, 126312526047055.12, 99238660092775.38, 119766101186351.34, 112382321312012.03, 147338644885424.47, 128265851263439.73, 121604307454265.67, 123679752084237.19, 130937333551763.52, 141377025954847.6, 106616529904078.66, 107024899318699.53, 154465410504678.12, 117399435381856.48, 99203821765822.58, 136738468456352.53, 135801975486467.38, 96889319258473.17, 131144665869653.48, 145067160378640.06, 135244733403879.53, 140652295392683.77, 99304176918832.12, 133264785295936.33, 119946715756890.47, 116285920381426.62, 146815584635928.3, 163432612213123.9, 171850736984104.75, 159248291790109.75, 124138614591879.22, 135903492902317.38, 145078200913082.1, 129505082998584.03, 129929226220057.58, 145406655042952.56]  # Truncate for embedding
baseline = 128655100000000.0
mean = 128296812860967.94
std = 20977708073946.816
p5 = 95544561621148.02
p50 = 126452380834965.12
p95 = 167788191065331.25
display_name = "Total Annual Cost of War and Disease with All Externalities"
units = "USD/year"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Mark key statistics
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {p50:,.2g}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {p5:,.2g}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {p95:,.2g}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {baseline:,.2g}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG (same directory as the QMD file)
output_path = Path('mc-distribution-global_total_health_and_war_cost_annual.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 1.287e+14 |
| Mean (expected value) | 1.283e+14 |
| Median (50th percentile) | 1.265e+14 |
| Standard Deviation | 2.098e+13 |
| 90% Confidence Interval | [9.554e+13, 1.678e+14] |

*The histogram shows the distribution of Total Annual Cost of War and Disease with All Externalities across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
