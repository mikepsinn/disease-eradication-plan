```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: dFDA Total NPV Cost (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata
)

setup_chart_style()

# Simulation results
samples = [554213369.6483984, 441209487.34636056, 598953700.9828348, 619298865.4408576, 388935574.8024732, 422509004.4248818, 537546347.1551763, 498227499.6647416, 524351817.48583126, 455154248.04502887, 612667329.9905025, 601831567.262045, 531860829.05325794, 640054115.9689648, 570088166.257752, 454679660.586906, 560395450.7182361, 447195213.471153, 612565231.2406579, 521383836.83258027, 509496013.23954064, 468462981.1925758, 650957023.1233644, 512140260.61013335, 488846405.37573236, 495200539.03270173, 576553909.2922087, 560074244.8678842, 564688194.581059, 566464769.2686026, 740581975.7217048, 490663844.8927118, 481960031.46962595, 458150601.9642036, 585028856.1406522, 640250286.72804, 515703308.9782097, 456134950.7675932, 457331216.1544608, 588577003.3005595, 598198793.1204033, 577644333.2823408, 469677881.4713512, 547304437.8859904, 536515054.2739854, 546032632.3676908, 611809369.6251055, 546495441.162391, 591498653.5723424, 532002391.483417, 552719571.6705184, 586595066.5202451, 411907477.8916446, 497937393.1087062, 485381542.9390671, 471785024.02522075, 501720738.25079143, 683311441.1871145, 454183673.6800915, 622330685.6756134, 397041473.1139048, 496652514.1752759, 540789214.7725604, 581998316.6671335, 594852675.2169347, 603476033.7458354, 495487064.7672687, 486040275.8682405, 610364176.9699197, 508936514.5590068, 424354387.0000131, 434442264.54002833, 450140667.49982464, 573036280.3815038, 538898331.657262, 592697259.7791867, 488935393.5272706, 540396642.3553957, 586011566.8547635, 498811602.027151, 569025267.829653, 469960778.16333973, 494283870.5540247, 492720157.0484444, 429975538.90730584, 572021310.9503764, 485461175.96100426, 526993229.6682433, 571402113.8062398, 568013041.8853902, 590100931.2069217, 517068525.605797, 489262843.88071656, 518731303.8658409, 396754111.9969291, 412584627.2183902, 421086370.3673456, 444351620.0522837, 563419455.9371202, 451190063.02361655, 493018931.9233495, 659885049.0721033, 494853587.83766985, 597597649.4361742, 449079832.5135232, 507711549.5221355, 447855074.8845662, 496302873.1116388, 608472174.9764122, 394191834.79793346, 566819383.3253833, 547831653.6706764, 475349370.9282394, 412655811.12234306, 532418678.52121145, 480558752.92017156, 547353111.2070141, 527840288.0224358, 696498864.647498, 504785949.26511765, 442418435.39013624, 542331894.3749783, 546155962.3878667, 666963206.0554514, 607916938.7312405, 559242484.580003, 679460906.3127809, 430478065.3924796, 471715718.419742, 449606806.66040236, 492046413.13870656, 417371265.6888559, 586991020.2009933, 506261253.9189391, 410989298.5431988, 443000504.0596597, 555057917.4898617, 608239024.7272731, 739292886.8140924, 720779061.8555443, 564852612.8669986, 444921245.71155024, 389168441.0946332, 550676965.2917902, 458214309.95585954, 489921212.34394133, 473915351.612147, 513343234.14894336, 633156079.5853394, 540257789.8951337, 511781434.1003732, 441526642.1554773, 397569069.96802866, 484075964.6617336, 521039566.7164657, 716315030.3556445, 537771700.9244281, 623919488.0934079, 483014966.3641397, 430749578.00043964, 446731644.60696006, 464993762.1119168, 740937536.8724027, 457567821.540056, 608277773.4600617, 451382027.3090477, 618318845.1746998, 561972196.653549, 511955938.5646618, 522202896.6444988, 470524865.86795455, 567967739.181542, 486646352.37139106, 427869535.1364387, 424197196.2837911, 541706856.0725003, 693674387.386759, 540531884.5630713, 515289967.68081707, 552404775.4892774, 660680333.7366642, 546098051.5287269, 490288949.23309606, 637685188.6642728, 566261666.9841561, 688315538.4387183, 542702284.0293341, 427949731.07159853, 417955392.0813557, 702662587.3268285, 711898585.4764559, 509960628.2456485, 492599096.15583014, 679235476.7655202, 436332804.97595096, 451999546.46630144, 587830118.5523661, 491646675.78496706, 525403013.95036834, 511361564.6098881, 557375580.9810563, 672727404.8480577, 534110951.09049225, 587892984.6626557, 389049379.16813564, 521491682.3487435, 455900812.85610676, 428349028.16542023, 453250813.2272059, 496716740.6334827, 616615159.8873392, 420830950.1467585, 528636419.56337774, 484250927.769524, 497261106.6273886, 626126543.3603582, 577137404.1699998, 664380985.4035823, 512142341.94821066, 467283733.15101177, 506120149.11126924, 548282437.1404797, 542079236.3767984, 437973144.37266517, 534102212.40282494, 546932811.749984, 730695906.9814208, 727085509.7252109, 455139092.33496135, 500677310.3305578, 411484336.4396972, 475625065.52142894, 555258903.0624983, 649032573.4228747, 464693084.4856268, 470575579.5223136, 389193116.2949363, 511429387.58695984, 439571082.61550176, 480563073.71984845, 453348493.3955299, 517442129.1139804, 392328601.346614, 411242030.5950649, 740916544.722697, 423535693.38519204, 437074683.48187846, 723101778.3784139, 720993655.7223175, 431702192.376698, 493848489.6835204, 557760140.5751069, 712508689.8974179, 445119564.0700486, 504277172.40605974, 601783611.3932592, 566853102.8220966, 493186698.60556114, 513954629.1080195, 417493827.87982404, 504887557.24907136, 502468567.83653545, 547305247.6569872, 478469175.42856216, 570487734.0759962, 627227772.6596787, 540107054.6286069, 558746942.2483411, 530685388.6421681, 525872401.7866734, 465279866.8190278, 555344397.3131828, 517174559.01962656, 741893077.0571438, 692962309.8305922, 562059513.6941702, 462055190.57703733, 435945425.8264568, 647341521.8187261, 550204759.5360274, 571342157.651441, 393091758.99646354, 617868815.2854149, 568792392.3442135, 436088378.9007511, 485287006.6558573, 550296835.1685227, 530622614.20465094, 500269896.04461586, 516626339.15100545, 503702346.68752, 539840303.0457802, 680455176.5244992, 388255070.9193959, 505001367.0842124, 542073540.4568328, 553377375.1362811, 493541562.1135693, 392386164.92069364, 556451521.7177734, 712370083.8896179, 406780277.9662008, 610992364.7262056, 497189152.20466125, 520367106.584136, 440265266.82523537, 496688679.4498446, 659980834.2312381, 581636257.9950671, 712857710.135084, 645767632.7960973, 567278757.3381033, 713982409.767547, 567269540.0408742, 607156858.8374499, 499895848.6075108, 531907919.6803144, 467167579.0505385, 624673090.0717853, 431222118.39822996, 602312933.7711766, 508993219.2498146, 645062434.9862791, 598997557.774878, 721490510.0557368, 596892404.7474544, 404257384.15544134, 519865880.37350774, 431670778.32363015, 481469062.7966261, 685303344.962216, 587235433.4484112, 467049469.0048996, 443137489.4110589, 528831655.8339231, 428508203.61433804, 469233823.84570134, 554913381.1171455, 643243691.6144116, 584292084.5060943, 389465188.9913995, 554179764.7116389, 532409898.2213483, 564801702.6288435, 698302216.9577861, 389066857.4269986, 475593313.0710201, 582474137.544856, 403629035.25037843, 680997025.1936835, 560357150.7085426, 609143466.924399, 477211311.6473073, 605642288.1198289, 633434934.8031223, 547372189.935715, 547516185.2981808, 550927596.7904792, 454372160.39568305, 512752846.45603, 512315784.960402, 561820421.4220909, 625802550.316251, 439853846.96988595, 514729230.3260807, 681667131.9966748, 463564679.9431733, 457501796.76039255, 544490808.0484769, 608908177.0785358, 526896653.546179, 663384143.184628, 610237398.3579869, 608633819.4497807, 578748969.2075627, 735628369.1424781, 507735426.51097023, 388991689.4621953, 696807836.6812762, 486422848.9693339, 535702594.86803764, 661097460.2094519, 402274033.3082123, 426037301.02749705, 402338270.37921125, 459657706.2885424, 567332961.3650973, 575738909.4381199, 551492905.1759865, 414910646.2917783, 389505950.5420338, 530794651.7202734, 485266395.98993504, 569283552.5518773, 593887916.8617722, 538510061.6020762, 599970987.7007611, 547025671.340183, 576328535.4976325, 466599587.5938581, 509952606.6871544, 543971494.4541981, 606362033.1229056, 491718666.1804757, 575436126.2177714, 502515481.3514462, 515386522.0355507, 607320120.0258693, 388979761.8072629, 422905713.3284613, 410225807.8927921, 389558590.0952627, 468672691.36287737, 598846928.3274877, 500890140.77102745, 544066671.2056876, 635762521.9712924, 663233722.175776, 519671488.42102885, 666298269.915724, 534252607.5363797, 456345176.00717473, 475329327.78116035, 410336333.9167646, 452496785.57645106, 494706448.3743466, 604561177.0302587, 711528251.855695, 416995339.7898367, 562740674.1445949, 441168505.2690588, 570801191.9710424, 514194959.4406551, 388929604.2059425, 617962230.1918079, 474481738.1275524, 480201490.8843874, 439036677.6183293, 470564757.25638384, 566176499.361001, 509115349.88599, 556515760.6172798, 559732342.696312, 662405340.4122276, 495986775.4561822, 410583050.76541466, 633295100.4079436, 496939054.37105715, 638622818.6581962, 561818788.8963177, 514190489.48703355, 558458405.6047871, 734593618.8364968, 742332738.3461975, 532167203.91557837, 540550422.0127215, 634305383.9751098, 455715758.1284803, 556940856.0553832, 523537920.67199254, 555095814.1815543, 456652494.20836055, 403105582.604771, 389080269.5376928, 435586800.5911013, 486342572.8984003, 500183116.91980785, 733187750.1639879, 637651868.9401501, 446956557.76177406, 558355111.3043147, 490608720.20214534, 500934454.88123095, 542898059.4368868, 585354991.2939925, 496283881.6985442, 632917925.0775731, 433821183.03804314, 526436963.90670025, 728648268.2623622, 546446770.3402514, 675821946.4179137, 534196878.75291026, 581445731.5427654, 520771893.58668065, 510754085.67975175, 460786268.19836235, 566413641.1176469, 455268776.42884916, 590121579.9320023, 635320788.1934284, 560179842.7549446, 500773917.6658813, 568747434.1011581, 498868690.20574665, 618751769.7748642, 388913420.15516615, 496591606.9347986, 388977246.71850157, 409364006.51487017, 667518681.0605856, 614371050.0747976, 465442027.63040686, 408866851.7400869, 388255070.9193959, 479424817.2243439, 733202713.4400386, 566864742.3338947, 478126856.0832627, 569847429.9513627, 404987709.864135, 499831915.463252, 534928607.5974084, 518165115.16955394, 603207039.507087, 558058812.3128462, 590404452.3063673, 467877924.51695085, 614655453.6915491, 699897093.0595849, 446357833.1797848, 452529856.5835122, 664190195.6993166, 508933072.08785236, 672288520.9261279, 487672276.3360497, 678460027.9945393, 537883885.4108016, 549775010.2128775, 691891745.7487235, 494391494.48334086, 448519050.54727924, 487175097.62141883, 568586162.5043858, 404671132.13931334, 587228979.3588686, 479807022.2808022, 642389787.1156855, 389703076.4118382, 460240331.76275337, 396809848.97252244, 457197611.35385704, 548772332.6759214, 509986084.72399294, 503582306.91788167, 511733381.1383825, 544592487.5882022, 443519001.02781767, 594397072.6788886, 589820458.9770637, 561980675.4309798, 578992847.8198886, 553417977.0448288, 742754546.3142445, 518077045.1377219, 499003484.1103909, 462793315.85164136, 441775196.6773709, 426541201.45073605, 452446719.50378215, 519534298.7438787, 557059025.4180046, 530501863.3209734, 461863480.63808155, 614911738.3567885, 597796302.0524724, 511692897.8412366, 470672895.64670587, 578175439.9700387, 543146073.0105088, 412516145.9397452, 519774483.70231676, 550136910.1293485, 451625323.94292384, 543321284.2319357, 412064676.59455454, 664237688.7607803, 653899741.4180076, 503656051.70055693, 559881071.5434561, 389742434.6273451, 432789068.813861, 500133175.71217585, 438863473.1741926, 595182887.6169091, 739351369.8441372, 431342407.9137864, 456340206.8362162, 547615255.1447301, 697665095.1022539, 428097560.2789178, 548902279.2846093, 721555029.3209002, 399050970.6159561, 423978651.5504786, 489237305.29954135, 481281475.3474914, 605518712.6501794, 548203152.8699456, 391344819.0320941, 574859571.9198806, 476681266.1624887, 656984762.4322661, 472681728.9676161, 471964559.9737243, 577440782.773566, 600264863.9393679, 568167860.2872272, 396865888.46257764, 577129259.7170631, 441625257.1868118, 547598961.7305354, 414166101.26671517, 567992409.3800831, 458700508.5081792, 423869456.4302494, 595122833.2161949, 548201713.482484, 473765430.9990762, 677991915.5605245, 487827717.4308208, 528770421.48137784, 550791417.2093085, 473312095.91925406, 570447830.987484, 480237781.27126086, 490229899.46115255, 667373709.9659008, 441165422.5834711, 389749708.4112414, 697642697.8176494, 729880068.158005, 490759093.29701924, 388921994.9163915, 498715204.27842873, 500776113.263567, 509056351.6124548, 435874967.78671896, 581322419.1827211, 575770950.1450006, 409407808.8064018, 593601438.5746739, 742889235.5970604, 541648244.8150117, 496446798.8027687, 513236946.90134835, 584955042.6564274, 393978018.2660802, 540941888.3499228, 491991860.8825061, 724186322.8224747, 510426032.99008524, 704803845.5098927, 436571612.7174734, 582103604.216403, 555623890.6236401, 453939953.4426881, 542156148.0202075, 649800432.4887455, 497589010.2239892, 396456493.66218174, 524283349.2116822, 451419958.4417996, 496024260.3871337, 518565379.25789404, 395577787.2484753, 401398458.69563216, 571533348.5825686, 481108452.07790965, 388255070.9193959, 602576455.3235805, 551120678.3401265, 465879835.85206103, 421492693.8801526, 607991334.9750235, 558514030.2167625, 734187941.8513242, 565419707.458215, 562240575.9478837, 511057484.0700451, 605962649.4057834, 585959863.8844569, 654338245.9143777, 481221809.85826933, 488260929.67178106, 484665732.77396774, 603206573.8029916, 683730761.3634169, 486328984.0349616, 489140637.2940004, 555112056.474061, 504235648.52080333, 620553666.2301109, 389383511.23092526, 457161274.63479996, 460560047.1685171, 389528671.71405864, 446841519.2140751, 450462999.2144137, 508086723.66662824, 638439029.2219565, 504295820.87015593, 441881451.11265004, 520756613.4338343, 631278587.0767688, 445926811.6415584, 450807024.0248172, 579196312.3019463, 506320480.9799088, 588257381.8858764, 524635482.94809884, 593857776.7229804, 441568822.59404904, 524776029.7469886, 507257192.0896826, 428555500.3474721, 404821520.3993948, 592206332.4155409, 495299808.95262414, 442507850.4907197, 517272546.97906667, 640142232.6317935, 389442856.445665, 409258546.52509904, 449883210.0153724, 679203290.2502506, 552095354.9264158, 600727124.9782977, 433948693.4693438, 435431726.68538857, 568139656.284276, 531152355.1500315, 578206768.0262855, 509251988.53572583, 551671241.6542764, 540357471.5547307, 601828976.3778696, 604924524.5641055, 401123590.74676895, 389374529.03128314, 626014706.0766103, 646949347.7133486, 442629626.3175268, 388860184.21309525, 534887871.8132634, 618238838.5528703, 719218757.1686858, 574948379.0261309, 493558125.4908074, 452119882.31948334, 526898935.1992552, 499667001.9445126, 443038111.3742991, 742932446.4360266, 717999725.9455458, 641052917.6087776, 450035830.1776581, 610047093.2835238, 587450171.0285921, 567619791.4256957, 654098945.8601491, 587013601.0338202, 597859309.936707, 587171055.7602696, 557686301.3904853, 390852321.8150562, 533471661.26429176, 478399419.7236353, 424064350.1047505, 706568007.4362571, 712537427.7890179, 666967128.4705863, 549488556.9637997, 665947124.0586278, 526953356.76006794, 544536952.2957891, 437314649.6974, 563147416.6165128, 531345120.76921284, 422476173.329096, 521270331.1861656, 518730296.09529686, 719215479.6726677, 614266032.547321, 526898406.0534645, 548878680.1751556, 529870743.6084927, 507930018.9812328, 438115455.24028957, 512444450.91152275, 463369738.94957817, 426130764.4770785, 574440502.3623968, 562588100.1979887, 390676207.0916256, 514933735.68054485, 625347535.1775899, 632400531.5403923, 628682194.9858683, 529388716.64534414, 455762623.4124787, 438023160.0917599, 558054913.3281951, 561419664.0541123, 658490822.8303137, 636973846.6354492, 514094641.02005124, 426559888.9996765, 497985153.558898, 545895262.8845353, 508001961.59141815, 476652737.6665846, 549267467.0480404, 482634778.0337528, 472643680.3118986, 554859912.0399973, 491031611.274958, 548434740.3345604, 551200188.2920127, 434001217.0857072, 484490634.3999399, 676372305.8057368, 432379335.24641037, 389144324.2822847, 388861543.4291042, 528498341.3321392, 528662358.9259639, 515380471.0684196, 649993100.4085554, 388255070.9193959, 563044089.6224425, 691485696.5110898, 434838148.4134419, 492881527.20526433, 462842601.83304095, 452028260.5690622, 497380287.2269149, 675131562.1740656, 723148743.8481181, 496563627.8663918, 729925076.7808781, 529085462.6536405, 714929110.8558803, 517527450.48687387, 537844243.7857172, 560077197.6690111, 714425433.655828, 609646928.925092, 466396762.7746128, 622409626.5179175, 494386289.4944718, 483794486.79144406, 615823225.7976568, 528677636.28616166, 551712477.7383509, 527128092.5621829, 557279858.9675881, 565888991.6520773, 388922115.1445428, 590223473.3987484, 445477678.0617471, 412909636.451154, 520626730.71712124, 533504681.0050663, 467474870.24821746, 607481506.0496182, 419741533.87368697, 490619897.77936214, 476092569.9183718, 521682082.7995284, 551739993.8155489, 443566380.8377397, 596214106.0472571, 531584086.778893, 388883529.7534869, 388943079.9577657, 524754916.02467334, 506369553.8005574, 516632360.2041573, 523347757.3878256, 546680835.5587602, 620072319.0604148, 436039714.4643792, 431673316.6290953, 437325334.0861696, 552700186.9162853, 653551200.5385478, 488597247.8256148, 388833942.3890108, 395684170.3410251, 456677832.80241776, 478275470.67080605, 490499826.35354173, 529358526.5288446, 498608245.5186584, 631297098.6853594, 468849599.6768213, 454450082.0112808, 571216171.3539689, 406662182.58894634, 562434584.3194447, 535211755.3755659, 512760393.6820203, 694816275.1407044, 473109744.27701193, 742786816.3424504, 505984563.4497914, 424261504.41850275, 532216460.448818, 438564480.32137775, 462930702.3309203, 563151520.6726887, 578896838.33426, 473112907.9287845, 624433081.9653815, 643493950.2302551, 676194300.7888007, 576263156.1479859, 667467145.2471988, 388875031.15066814, 498086682.16929835, 454094678.47404337, 536749689.70481205, 477170656.1296344, 511124658.45704865, 727620371.0707003, 510814038.2925473, 564792095.9781301, 505395528.9181659, 532746801.8092387, 526407847.51394725, 568190047.8788959, 644383837.0094495, 702217338.3952351, 554683905.2315729, 582335993.4167644, 433181463.8404069, 518007686.8800533, 619268838.815347, 611222332.8228452, 545365782.2424004, 613421657.9223434, 572399053.1552547, 648394287.7488321, 552742497.8668611, 494901085.31475776, 557208243.8346705, 388255070.9193959, 561770903.0429695, 388255070.9193959, 394438101.8450724, 568530295.2521152, 571082436.1954246, 432354383.51676965, 466018400.7169913, 668313214.4590938, 484262327.5915668, 737869940.1133761, 525691643.9493542, 564227988.946363, 698385411.4856489, 537841399.4902704, 443975454.31423557, 516075493.33953476, 522664048.39124906, 418189785.4482531, 503371961.4885064, 463673153.0298561, 617533733.9553595, 528997834.0757275, 501068055.93459326, 516388435.86471766, 546450759.2394118, 585114135.3741482, 444169627.56256497, 441092114.8569979, 637503632.7038398, 490171899.3525424, 414633763.072788, 567744779.1287546, 569677993.3498652, 406989035.93854475, 547051211.3588629, 597395371.3136464, 560943378.9210552, 586666107.1190162, 415488528.9770322, 556745036.8739274, 499382147.56951165, 484363815.3778719, 611715448.882288, 681401623.5156796, 718902055.1062458, 661715919.1394787, 516074899.53959775, 558840278.251317, 600675057.0771204, 536930094.0922078, 537817048.23135, 606705470.4970593]  # Truncate for embedding
baseline = 538488760.0276049
mean = 533413751.2434287
std = 87162988.20233402
p5 = 397607090.6468661
p50 = 524678600.1467714
p95 = 701631458.3847018
display_name = "dFDA Total NPV Cost"
units = "USD"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Mark key statistics
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {p50:,.2g}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {p5:,.2g}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {p95:,.2g}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {baseline:,.2g}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG
project_root = Path.cwd()
while project_root.name != 'decentralized-institutes-of-health' and project_root.parent != project_root:
    project_root = project_root.parent

output_path = project_root / 'knowledge' / 'figures' / 'mc-distribution-dfda_npv_total_cost.png'
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 5.385e+08 |
| Mean (expected value) | 5.334e+08 |
| Median (50th percentile) | 5.247e+08 |
| Standard Deviation | 8.716e+07 |
| 90% Confidence Interval | [3.976e+08, 7.016e+08] |

*The histogram shows the distribution of dFDA Total NPV Cost across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
