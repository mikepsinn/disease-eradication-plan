```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Total Annual Decentralized Framework for Drug Assessment Operational Costs (10,000 simulations)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [41722856.628074706, 31285507.56628932, 45906801.32605226, 47817601.39689085, 26265344.96799091, 29579754.705639377, 40171024.85793774, 36526184.27005749, 38945311.68851162, 32561867.80773035, 47194237.754782565, 46176789.276020125, 39642555.49416374, 49771830.53243636, 43204448.297961205, 32518369.404369786, 42299428.89296098, 31832932.073979594, 47184644.486750856, 38669951.28944808, 37568365.043926135, 33783340.17452105, 50800310.46083842, 37813208.10991143, 35660110.26254281, 36246575.7979218, 43808845.72711352, 42269458.92002762, 42700093.70850211, 42865982.51836799, 60000000.0, 35827786.62117818, 35025271.66917748, 32836594.249675762, 44601868.43416445, 49790324.0640426, 38143296.760232955, 32651767.37486656, 32761451.03797893, 44934146.69053539, 45835995.98768841, 43910828.27495152, 33895000.3312855, 41079111.09947378, 40075131.64799251, 40960681.405324176, 47113627.01479725, 41003775.25205742, 45207872.17078343, 39655708.07595197, 41583615.22021395, 44748522.108170375, 28615897.785869114, 36499379.97727997, 35340594.125424445, 34088726.63760942, 36849046.18696779, 53859686.83620213, 32472914.049572434, 48102761.45281801, 27294044.75623481, 36380680.259203784, 40472656.6652497, 44318188.402553454, 45522235.8542725, 46331110.205374524, 36273036.63118308, 35401324.60025171, 46977861.66902229, 37516572.31309351, 29747768.881408025, 30667440.92239594, 32102556.971327376, 43479961.64760114, 40296760.07021099, 45320198.50881644, 35668319.01591137, 40436134.03234435, 44693881.94218025, 36580156.284658656, 43105143.86543728, 33921004.76498562, 36161929.791771285, 36017566.47396159, 30259976.143042546, 43385095.84119867, 35347935.3383447, 39190483.7981487, 43327228.11905874, 43010587.40879582, 45076908.244650565, 38269824.63689615, 35698525.947681576, 38423968.50805978, 27274332.405500963, 28677391.45312333, 29450277.596449733, 31572786.34254714, 42581649.9912324, 32198657.087848436, 36045146.54811716, 51643445.77057971, 36214536.40939613, 45779617.65447545, 32005430.12935115, 37403194.37929859, 31893321.210572675, 36348384.29836722, 46800159.026215285, 27098644.63788716, 42899099.82231567, 41128211.67565012, 34416600.55046376, 28683856.412190445, 39694387.034996495, 34896188.20200673, 41083643.973818526, 39269128.30064187, 55109692.34368712, 37132506.919880286, 31396016.88156909, 40616199.59875042, 40972164.83030446, 52312479.02501919, 46748017.56118786, 42191858.31860284, 53495027.08079408, 30305797.9682608, 34082353.595064156, 32053675.661560804, 35955378.132085785, 29112354.759454537, 44785602.48914751, 37268990.90803869, 28532531.16388326, 31449233.455670293, 41801592.93570149, 46778263.76541876, 59663567.87470268, 60000000.0, 42715444.619998485, 31624886.202280965, 26134604.40042883, 41393267.15888077, 32842437.213696573, 35759265.0414853, 34284662.913534045, 37924632.54463663, 49121804.2030993, 40423216.53667468, 37779976.39625498, 31314495.811660457, 27330241.38684032, 35220250.47680059, 38638019.429810286, 57091164.20623424, 40191981.05909769, 48252239.44764672, 35122472.32708703, 30330557.37180816, 31790512.1213018, 33464631.00384644, 60000000.0, 32783148.09623463, 46781902.63442811, 32216238.747246567, 47725447.48960513, 42446566.51421804, 37796137.392225474, 38745928.11906345, 33972861.01464186, 43006355.799091734, 35457206.89343391, 30067999.545123797, 29733454.631866273, 40558037.11871354, 54841823.77469196, 40448715.927194566, 38104993.98726196, 41554276.01004922, 51718590.73697078, 40966772.64549927, 35793194.43715233, 49548538.9089301, 42847015.60135257, 54333813.02588834, 40650668.53149181, 30075308.32151002, 29165467.417808868, 55694515.863802746, 56571517.33351599, 37611378.08362277, 36006391.68925495, 53473682.66665869, 30840018.772828408, 32272800.839474678, 44864189.076433495, 35918484.81536045, 39042869.90885282, 37741093.8692775, 42017716.00911037, 52857697.537936, 39851648.90551292, 44870077.21789742, 26158170.943790037, 38679954.57794173, 32630302.700018864, 30111700.78306638, 32387433.12119666, 36386613.00026498, 47565271.85640542, 29427035.63953014, 39343054.13290363, 35236376.31544458, 36436899.96094251, 48459931.71639898, 43863415.5348405, 52068345.15671384, 37813400.872982524, 33674981.55311845, 37255935.48996528, 41170197.025928035, 40592688.03162374, 30989813.616547503, 39850836.71840258, 41044503.19208902, 60000000.0, 58359582.00853848, 32560478.644401908, 36752587.23402322, 28577476.180593587, 34441970.01598394, 41820332.03834899, 50618682.34077407, 33437018.46832039, 33977523.36292761, 26130270.193464555, 37747374.51535671, 31135786.663116273, 34896586.17603719, 32396383.109734464, 38304455.01858479, 26966067.911068127, 28555476.32188212, 60000000.0, 29673221.750492815, 30907760.19680485, 57891106.40422057, 60000000.0, 30417438.47012978, 36121731.086653315, 42053583.37965185, 56632699.49637676, 31643026.50475227, 37085446.65588371, 46172289.462495804, 42902248.96258073, 36060633.819593325, 37981270.98681893, 29123498.339364994, 37141905.82635664, 36918189.36741754, 41079186.51197911, 34703761.42448138, 43241782.92097487, 48563582.22959169, 40409193.88815869, 42145630.20631535, 39533356.42116545, 39086437.58248929, 33490906.73472989, 41828303.35170343, 38279652.963934734, 59954456.34975576, 54774303.76928747, 42454715.672299296, 33194838.223069772, 30804651.193111505, 50459114.965654634, 41349271.02144086, 43321625.11812308, 27023259.432343427, 47683133.69900998, 43083388.75755319, 30817702.416900966, 35331879.146915264, 41357849.608994626, 39527525.20542328, 36714928.79989638, 38228839.83352199, 37032281.972247735, 40384379.22549005, 53589173.93884791, 26017304.465885714, 37152433.61645023, 40592157.9973975, 41644927.308276236, 36093394.3181759, 26970442.521395914, 41931538.38039707, 56616309.82569964, 28150602.176449884, 47036872.32589332, 36430252.74601418, 38575652.29090224, 31199216.376621854, 36384020.91804785, 51652495.981356904, 44284304.89144537, 56676682.06567688, 50310630.719272874, 42942003.09001912, 56815669.92484897, 42941142.212608546, 46676645.43714632, 36680356.87988471, 39646930.657539584, 33664309.721260406, 48323150.02666806, 30373652.124259006, 46221958.57545754, 37521821.23931628, 50244109.4504069, 45910915.0139209, 57701401.670334056, 45713481.79742578, 27921857.184945974, 38529170.60341854, 30414573.133040074, 34980040.67971936, 54048385.28960295, 44808492.346956596, 33653458.42785819, 31461758.50477911, 39361184.46801801, 30126209.135301158, 33854184.48251485, 41788117.273354925, 50072572.37990957, 44532890.729832396, 26090132.620193414, 41719723.87600858, 39693571.19493547, 42710691.347904354, 55280759.47258701, 26154377.430149507, 34439048.08338189, 44362720.95049172, 27864907.8624567, 53640485.42965734, 42295855.25451744, 46863203.99172558, 34587961.96723745, 46534446.46818875, 49148071.48976338, 41085420.75655608, 41098831.062211536, 41416620.12786268, 32490187.623314627, 37869945.59986776, 37829464.52654232, 42432401.81957799, 48429439.278629616, 31161622.576207258, 38053036.73298986, 53703946.645491436, 33333406.50476301, 32777093.425395824, 40817137.96630737, 46841105.935432985, 39181517.92927353, 51974118.01413191, 46965952.91213409, 46815339.5200908, 44014155.51827397, 60000000.0, 37405404.11655341, 26191366.783955306, 55138999.39990717, 35436598.41840421, 39999597.05181412, 51758006.88338993, 27742129.113005012, 29901051.463850863, 27747948.816954058, 32974837.689190697, 42947065.66200926, 43732632.34750705, 41469296.761120625, 28888697.252799626, 26084994.951187186, 39543506.17618459, 35329979.13945297, 43129273.52152299, 45431797.41231685, 40260648.104131185, 46002226.976659685, 41053150.61745814, 43787769.411436245, 33612128.082202174, 37610635.437006764, 40768797.48856646, 46602017.98771878, 35925128.896798514, 43704320.2450045, 36922527.21394428, 38113941.08129476, 46691975.21845968, 26206042.15603757, 29615867.476869196, 28463223.30405651, 26078608.18157854, 33802612.55984975, 45896786.34130497, 36772260.791124694, 40777656.765302494, 49367356.62119398, 51959900.26846699, 38511144.49569274, 52249606.61729047, 39864814.82750664, 32671040.700596984, 34414756.22738089, 28473255.820572227, 32318350.93237675, 36200949.326512575, 46432960.570152774, 56536336.982523665, 29078176.841761157, 42518290.76364376, 31281761.90711448, 43271073.10445137, 38003536.28522769, 26650620.413668077, 47691916.787102245, 34336769.34792877, 34863283.11334691, 31086962.799954556, 33976528.4166058, 42839062.296606496, 37533126.55253263, 41937528.916934766, 42237559.40584457, 51881606.102973215, 36319188.39830358, 28495651.407261793, 49134899.4201689, 36407149.12737534, 49636911.16335825, 42432249.46286449, 38003122.16028903, 42118714.74558184, 59235221.225533515, 59905635.367062375, 39671021.18396411, 40450440.5291047, 49230070.63822781, 32613338.452390816, 41977172.18913956, 38869787.73738357, 41805126.23187801, 32699216.90352684, 27817472.248238813, 26151556.201784022, 30771911.451672547, 35429196.64198932, 36706907.90515373, 59075699.385572486, 49545398.68081972, 31811092.819771774, 42109079.4527156, 35822700.03906809, 36776357.176125966, 40668888.41958677, 44632403.89045134, 36346630.13871523, 49099371.48159635, 30610760.8521692, 39138843.45312483, 60000000.0, 40999243.19063752, 53150540.72989368, 39859635.213575594, 44266475.00833874, 38613193.34464342, 37684842.34178236, 33078385.11930496, 42861207.81185877, 32572365.547066536, 45078842.81492528, 49325735.66262114, 42279311.532617904, 36761517.30509886, 43079188.86344848, 36585431.61825308, 47766155.172945894, 26648481.316508777, 36375054.18293414, 26209200.597592015, 28385006.036904864, 52365004.930688605, 47354338.44339562, 33505800.157186657, 28339891.425913684, 26000000.0, 34791756.190433994, 60000000.0, 42903336.00645891, 34672244.695794985, 43181955.50235967, 27988059.86331378, 36674447.9817076, 39927648.025359176, 38371476.65938184, 46305864.880044356, 42081441.478936695, 45105345.539273426, 33729577.49082449, 47381067.50443306, 55432076.46891046, 31756308.583048295, 32321380.59775682, 52050309.841514535, 37516253.658923775, 52816172.86773344, 35551814.404828854, 53400264.506400846, 40202413.64031163, 41309233.28452293, 54672800.94404144, 36171867.17976575, 31954095.12898322, 35505963.957836464, 43064123.46528379, 27959361.244310495, 44807887.89716909, 34826953.676464915, 49992047.70798698, 26062308.34595199, 33028291.677337572, 27278155.7023175, 32749199.73332755, 41215828.41038322, 37613734.88502319, 37021180.34771257, 37775526.2557126, 40826603.281826325, 31496643.331219967, 45479525.30905088, 45050631.444095045, 42447357.82033463, 44036969.935102925, 41648711.896444745, 59779985.81594485, 38363312.04400216, 36597887.692658365, 33262591.644381158, 31337215.27585562, 29946958.7138113, 32313764.371888842, 38498423.13817433, 41988192.784422494, 39516308.628067985, 33177242.5296752, 47405154.673792936, 45798247.828401126, 37771777.16239419, 33986470.22427167, 43960505.85525054, 40691970.63930099, 28671172.04946691, 38520695.252708726, 41342949.639990725, 32238522.82571544, 40708277.7833286, 28630172.53396392, 52054799.31649839, 51078118.473937385, 37028000.45130139, 42251435.63265398, 26058139.00445991, 30516586.63764233, 36702291.95103722, 31071139.825490028, 45553193.266183235, 59667450.831711225, 30384622.99998676, 32670585.120626587, 41108057.61616849, 55220318.117327645, 30088781.296103343, 41227932.86151537, 57709000.44175164, 27450245.72658113, 29713554.141475786, 35696169.97849892, 34962760.06641761, 46522845.50455826, 41162812.394369006, 26891321.939003557, 43650412.11848371, 34539173.8442516, 51369459.28155829, 34171191.24572431, 34105236.371760726, 43891789.93689018, 46029796.098476425, 43025048.8030954, 27281999.81771439, 43862653.81648393, 31323509.710952386, 41106540.17168553, 28821047.062539857, 43008660.17590188, 32887031.228519943, 29703611.295104414, 45547563.06695421, 41162678.32890791, 34270871.44071943, 53355947.34500561, 35566150.21660408, 39355497.96804396, 41403931.28224641, 34229170.67385935, 43238054.382024765, 34866625.487027876, 35787746.036165826, 52351296.10830032, 31281480.158680867, 26057379.83749525, 55218193.44219402, 60000000.0, 35836575.70074779, 26285507.07381151, 36571248.599209845, 36761720.26080278, 37527665.20798397, 30798218.7142631, 44254935.41253245, 43735628.42064162, 28388981.15713092, 45404944.544104405, 59832660.99391022, 40552583.37356841, 36361678.31821147, 37914786.88331471, 44594957.59376321, 27083990.308080845, 40486861.107090436, 35950343.138414025, 58018723.4517428, 37654467.578297794, 55897766.65616838, 30861823.29598482, 44328042.12202446, 41854363.44294235, 32450579.65369035, 40599845.094664305, 50691147.54734273, 36467193.04458092, 27253918.308269743, 38938957.931641296, 32219712.871577457, 36322650.55533934, 38408584.992460385, 27193657.649538677, 27662813.519899134, 43339492.38720639, 34946821.63557148, 26017793.514974155, 46246687.44927518, 41434611.38216861, 33546012.339876257, 29487253.764091965, 46755003.79735431, 42123903.46919363, 60000000.0, 42768394.14523902, 42471614.243424036, 37712935.812390625, 46564522.051378466, 44689040.57018181, 51119523.47754479, 34957263.787564576, 35606106.03628634, 35274609.72321076, 46305821.174093, 53899406.90633001, 35427943.704738684, 35687252.319371805, 41806640.58719249, 37081606.00610795, 47935609.796795174, 26101001.870724946, 32745867.781906277, 33057627.124690577, 26082205.398770493, 31800566.088012427, 32132072.846190207, 37437916.544059426, 49619588.123372376, 37087171.50857988, 31346927.968488473, 38611776.17692484, 48944972.883494124, 31716873.625637926, 32163577.289119102, 44056004.2612689, 37274470.85679831, 44904208.22052844, 38971636.172938414, 45428972.19729146, 31318351.288543772, 38984679.52037198, 37361146.77441117, 30130520.184953447, 27972994.069955006, 45274189.53643567, 36255743.28797006, 31404191.381452344, 38288735.702142164, 49780137.469013356, 26093024.68762455, 28375435.56207564, 32078983.01259014, 53470635.18262339, 41525439.1331948, 46073163.847914465, 30622396.87009579, 30757755.169754643, 43022414.278836645, 39576735.4692077, 43963436.26808809, 37545775.10832245, 41485915.44248758, 40432489.9306543, 46176546.16647282, 46467067.11924488, 27637917.58029981, 26102249.02840117, 48449406.073799334, 50422113.87361393, 31415324.606853098, 26527302.809559748, 39923861.50887771, 47717924.74392282, 57433710.54233136, 43658715.35003206, 36094923.475734115, 32283823.907560337, 39181729.75026122, 36659206.46663054, 31452671.98812521, 59820892.420520656, 57289957.38225916, 49865994.57060123, 32092957.448063783, 46948077.248656586, 44828603.62632907, 42973855.787540615, 51096927.744626895, 44787717.20433985, 45804156.97657399, 44802463.15733548, 42046696.34059299, 26853915.490607034, 39792235.228074305, 34697338.98002362, 29721357.660102792, 56065255.68128382, 56636321.21708655, 52312849.9187919, 41282547.18780099, 52216406.19298436, 39186782.08737664, 40821433.50146279, 30929673.969232485, 42556256.40983643, 39594643.43549647, 29576766.20568943, 38659423.17915794, 38423875.07248283, 57433324.14926221, 47344468.83579446, 39181680.626141116, 41225734.60082692, 39457687.227272235, 37423413.34392315, 31002811.83031759, 37841381.391606495, 33315508.9995037, 29909565.952476777, 43611231.58613167, 42504049.96540766, 26840541.15998467, 38071985.40077193, 48386617.77436516, 49050638.30353114, 48700497.17111539, 39412918.18089565, 32617634.604842853, 30994381.845534973, 42081077.80001297, 42395001.90016007, 51511723.91623146, 49481500.910667285, 37994242.22192225, 29948661.319507025, 36503792.69457516, 40947890.99644089, 37430071.66845562, 34536548.07036634, 41261951.13903465, 35087439.99704799, 34167691.85450757, 41783132.22486352, 35861723.21171426, 41184382.97132923, 41442020.23359649, 30627190.02786697, 35258470.2053105, 53202632.58234392, 30479206.7504045, 26138997.863469988, 26518764.92873439, 39330232.03344755, 39345462.92233906, 38113380.371485315, 50709331.19960535, 26000000.0, 42546611.58246005, 54634305.33324814, 30703573.35293171, 36032462.4622338, 33267116.012017027, 32275431.09944963, 36447910.15571118, 53085199.76474211, 57896633.9897652, 36372469.74216807, 58693034.85660547, 39384754.706030495, 56927514.850909084, 38312363.99748469, 40198727.152225524, 42269734.42356096, 60000000.0, 46910490.555833705, 33593495.851617105, 48110187.69869907, 36171386.57606937, 35194308.5569593, 47490827.92265056, 39346881.618083715, 41489758.18080786, 39203004.33791464, 42008788.45246846, 42812214.344982795, 26285323.735125773, 45088389.24786628, 31675785.30048297, 28706909.835891534, 38599730.26094427, 39795303.839312784, 33692543.0774386, 46707129.237762734, 29327919.351959728, 35823731.43610733, 34484992.83363219, 38697615.73280841, 41492322.382081576, 31500975.86075672, 45649878.574335046, 39616844.17657793, 26391337.555043813, 26254640.40166464, 38982720.05747597, 37279011.3319725, 38229397.88519071, 38852143.32656236, 41021038.849565744, 47890339.10802838, 30813259.442412343, 30414804.65610802, 30930649.696252145, 41581808.509251304, 51045209.5797579, 35637127.30221002, 26034033.347572777, 27200952.389529176, 32701540.127459507, 34685927.12968082, 35812652.10164013, 39410114.33703982, 36561365.19161819, 48946716.203973755, 33818871.051226184, 32497328.82012345, 43309851.644546665, 28139891.648795664, 42489721.56296526, 39953968.1414203, 37870644.65720849, 54950109.14655999, 34210558.17416271, 59855489.53308915, 37243391.0120377, 29739310.659161914, 39675597.799882494, 31043826.9033287, 33275203.593134698, 42556639.49672154, 44027988.325408325, 34210849.16446379, 48300565.63477896, 50096173.704384655, 53185783.96425678, 43781655.44282198, 52360131.55296134, 26438431.7369646, 36513173.31907813, 32464758.448490433, 40096947.53331377, 34584219.65356873, 37719156.0821057, 58422420.975491986, 37690393.60017221, 42709794.419693455, 37188896.472158104, 39724876.10139335, 39136140.58892984, 43027121.34419825, 50180102.42881329, 55652257.77808825, 41766722.968610264, 44349791.609579906, 30552387.845950782, 38356882.20363764, 47814777.74912607, 47058476.21327118, 40898593.76088303, 47265118.70115477, 43420400.583498016, 50558450.187619396, 41585752.00969179, 36218922.473724715, 42002109.31583674, 26000000.0, 42427780.494885035, 26000000.0, 27115524.25863914, 43058904.63198244, 43297354.26262863, 30476930.5179006, 33558740.070695184, 52440141.79629417, 35237427.0214884, 60000000.0, 39069659.603751, 42657128.51839054, 55288652.112804875, 40198462.646743804, 31538384.35134267, 38177787.895919934, 38788709.42951509, 29186782.02171408, 37001727.54202115, 33343365.697106294, 47651629.39842583, 39376616.81024557, 36788707.411854886, 38206790.58799872, 40999614.622120194, 44609852.84873268, 31556142.002596494, 31274780.100992776, 49531428.25744197, 35782394.541098595, 28863537.96975318, 42985530.06347064, 43166124.929775156, 28169535.986500934, 41055529.01861084, 45760647.963902116, 42350556.28633171, 44755174.793766, 28941212.367084857, 41958910.308312096, 36632880.88703041, 35246781.107922204, 47104803.09807283, 53678801.62388295, 57396371.10751578, 51816451.176953845, 38177732.86551174, 42154337.07522935, 46068278.88665593, 40113721.67102294, 40196198.10420031, 46634262.947473705]  # Truncate for embedding
baseline = 40000000.0
mean = 39864567.18412439
std = 8211363.959935833
p5 = 27332850.088724613
p50 = 38975637.6035333
p95 = 55596655.430876665
display_name = "Total Annual Decentralized Framework for Drug Assessment Operational Costs"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---

# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-dfda_annual_opex.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Simulation Results Summary: Total Annual Decentralized Framework for Drug Assessment Operational Costs**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | $40M |
| Mean (expected value) | $39.9M |
| Median (50th percentile) | $39M |
| Standard Deviation | $8.21M |
| 90% Confidence Interval | [$27.3M, $55.6M] |

*The histogram shows the distribution of Total Annual Decentralized Framework for Drug Assessment Operational Costs across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
