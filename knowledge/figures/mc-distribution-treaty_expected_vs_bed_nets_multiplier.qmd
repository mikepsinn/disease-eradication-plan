```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Expected Cost-Effectiveness vs Bed Nets Multiplier (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results
samples = [161.87608009208125, 209.21944118998204, 226.66572553654575, 176.70692077451812, 316.021673045446, 351.41506506340716, 197.3643008634619, 118.49083422056113, 208.19135792538867, 343.06123793330636, 108.33872487631156, 196.2379113639572, 286.2019297001496, 131.21330573293352, 173.39008512221864, 173.90246444775752, 112.87260951267221, 122.33228443257339, 189.2282943599103, 206.83951448514816, 209.39814034035194, 130.92236576775605, 222.5356457839533, 94.16867834773613, 241.0495828930689, 198.63494449886113, 76.97051361501481, 235.63927295404534, 163.55120912418235, 355.9868041393058, 121.74500381032276, 358.02046831606, 129.06179694443023, 70.8982808632699, 298.0181078668132, 45.315728909858194, 96.85950007943734, 281.31228370349555, 181.23494423030442, 166.40324194827977, 280.6257947753358, 248.51076753810392, 152.775480411765, 51.43892445936125, 117.39770133433267, 124.28843437066465, 245.18677194765328, 338.77169909922395, 71.71841011604492, 159.7114956692375, 302.3454188850423, 134.2297886491353, 292.8226539243426, 243.53160553152006, 241.9686985783239, 161.42790777949372, 102.50077865782568, 144.37292137708337, 266.3218567176143, 49.66241469626631, 442.4815620047284, 38.8114433264699, 42.472271444074295, 87.19854477493284, 128.13123701792404, 160.452349487209, 180.55241722711654, 196.11665449494984, 111.61922139549051, 368.13929938921086, 168.63241882933877, 195.38837618195288, 95.19916198670985, 154.17709643588321, 311.45207622400955, 287.53740585597996, 286.31819347844214, 183.3940491065811, 159.0308799957667, 286.0291398573257, 134.1704395772087, 256.4193618595941, 211.02979130542383, 203.97275363757882, 330.7248666826752, 74.59660761389793, 222.98424144834613, 347.72289622853816, 151.5494393054127, 196.07084197917953, 169.18105409126156, 149.89957373232596, 66.82297589230102, 89.7384340010801, 287.50887499744516, 433.62922916036365, 112.85843433071737, 119.96775653149919, 207.6831389756758, 228.73261370174927, 243.0804434687096, 182.6662981064301, 129.0943170051631, 161.44511857643806, 252.9584703853694, 347.07255613571385, 181.43335011913487, 173.14703302128157, 303.28905107530966, 120.76672797496676, 273.46843337151716, 128.18232091059434, 239.59876306887736, 242.88520622073204, 100.09795635442578, 146.85310008586916, 183.8314846023443, 93.05791705501962, 94.41808461728465, 226.02088530907398, 198.5533291847508, 163.29457715673365, 181.68010243534923, 126.86222361104267, 160.4898666145407, 159.6330186284528, 88.22688636147718, 383.8775922625349, 400.94439119839376, 71.12972811250685, 217.9875399914178, 361.4167109211003, 201.23974045187177, 292.1057421857295, 193.21464128327486, 87.39611107781246, 52.115519903870066, 190.20583650496576, 127.81732214680353, 126.21400885585147, 196.79603247716943, 110.27785277392786, 208.23223550213774, 254.06550520618669, 342.6677160749816, 197.60067926853765, 326.91842661747495, 127.95829166484938, 73.35368525375881, 50.76944118040299, 207.7553366731091, 140.65747875021566, 191.98283808024829, 107.75820250449354, 84.40722437509915, 77.73934081079247, 268.8178317469872, 116.75267283381068, 251.71988505114274, 70.66156873529333, 173.36368425517887, 149.1003470286791, 30.262779464791155, 137.91221157539724, 71.86294657172733, 266.4911134234891, 248.9526516082599, 357.884739430408, 111.65591807292056, 75.30924414356424, 306.909870153076, 138.09158775416765, 179.88408233592756, 352.3843393224632, 308.50825115597115, 157.19071254338473, 190.2752157966988, 76.36278143046871, 74.06056287721869, 110.08615376001855, 197.297304528646, 237.83420503908786, 158.77462517147734, 40.46323261309562, 252.9719930007406, 156.44461261803187, 161.12719299021947, 53.34278283542266, 110.87790837756353, 290.94554025711324, 188.8046084093613, 381.5530343087638, 179.59898315799492, 186.1263593939208, 286.63220526557114, 338.68668319649095, 219.05636678719657, 191.5696904882028, 328.4973235501965, 242.77580610508306, 98.43870744845903, 34.43645629635386, 313.75551075990427, 139.30572180346343, 220.37446151085555, 150.0434256081746, 155.57415612289032, 254.7038451131531, 178.71318026455563, 136.3706875925454, 248.25438495751914, 148.26375446996806, 229.60519667962163, 334.6370577597964, 387.80994235684483, 102.66106717457102, 172.3478625382091, 88.52907279296412, 184.13839292183587, 129.65478762803687, 375.23592487121573, 174.8855804550269, 253.00919449798224, 74.31817826768882, 124.86830267541133, 177.02324282936027, 140.60779844470866, 155.52832503399839, 169.6406381622964, 103.9658367920587, 220.2017388408953, 333.14850754927517, 187.10568180826462, 149.9432830882783, 142.13688283779467, 288.9264537137198, 303.62758538017744, 206.50163965535629, 207.89086228211602, 53.02142975727819, 152.31443042249083, 118.38868448005128, 120.7314728913052, 141.43015593288118, 111.40953215373453, 84.068594656386, 72.78440779942773, 143.35597687342093, 53.94387884971375, 189.39046455414436, 142.58688868418292, 182.45068772847165, 116.61163276067218, 216.84077547749595, 102.30605103039531, 87.78705527465104, 129.27451172715405, 366.4043866686591, 38.081894433267344, 355.55844007381177, 105.4908789713023, 313.0384883478423, 273.59359425887885, 186.2956058770004, 77.89740890180296, 65.25802414742975, 189.8925667026544, 160.69228879907544, 63.40008631851417, 170.1448677861027, 79.68054151298006, 116.98414790229529, 209.04489205694696, 48.374360748766755, 86.343387117142, 143.50066224528703, 268.9998465940184, 209.17818912489855, 78.89722941499011, 159.568301329295, 189.6363269113106, 120.3286840550573, 151.54206973389992, 280.38758759151835, 121.35410505439319, 299.0317909742357, 315.4569963589769, 109.49955946856348, 113.99456890852787, 295.72181963743765, 132.04170126885884, 81.91138680837076, 76.87973726483735, 496.7453468316817, 70.12330309889727, 60.224508424900826, 166.07480830233445, 330.4033639333619, 254.6692527092908, 213.88943512686836, 305.5417885626532, 130.6911420173115, 181.50163151880795, 103.51523843182234, 168.87153872985965, 180.87135054517998, 229.20265662476749, 184.84136324284407, 104.43760679029943, 73.5885216504965, 85.21621883196119, 355.64536662277015, 107.19907214225996, 86.60656405759916, 261.2695101320175, 132.36800389414375, 133.01426017367646, 156.29153561017358, 180.17205684978506, 314.3634959351704, 108.3309514175026, 293.93021716271653, 200.76631006664664, 129.23568263438338, 209.61362574578862, 264.7287022072927, 230.7593734874362, 376.8025816135857, 342.3486341933432, 235.93307757402846, 259.22963418775606, 290.6983095093845, 53.67202322630369, 57.845950247580866, 87.97354555411927, 334.82425919512275, 152.36168467325513, 70.98314501310479, 107.43525265965744, 191.66172744204874, 313.98998011414903, 117.97258733640682, 227.16558676319534, 226.01440957579118, 292.762352640745, 242.82991874617218, 398.9052309190592, 148.16657808766652, 147.17102378910758, 231.56022160676642, 331.70095867849807, 75.08318022739455, 120.66077027188653, 186.6613857708773, 256.5519255437352, 81.52233885085418, 183.32302339113912, 344.8837648937817, 236.32627156027377, 176.710985010217, 378.70275414267877, 240.58440705478898, 250.87185505600422, 384.49039298323083, 244.2525967579753, 136.86758142061888, 266.99546600756344, 232.28745042273135, 135.11658097910117, 339.1541414852374, 241.38277075683843, 246.6115736481828, 225.48877922390966, 66.23190191279123, 216.87966452191137, 99.14321829074315, 109.89699450373276, 219.31882489644448, 138.11784643643995, 375.174767921259, 138.38790089802035, 104.16874381982514, 162.05164218496142, 307.56316073573316, 79.60971099803807, 276.0918517916661, 185.5900799950694, 235.35953556520403, 169.11242716604235, 288.7609558514774, 326.9771082465522, 119.8759415833825, 73.36247055055038, 231.67527142128034, 225.48668025972287, 194.43719339474123, 43.69477482123735, 203.27521204385715, 98.85042569752314, 276.93030438848353, 376.02304877557253, 274.3262557707985, 141.58834406202695, 166.49562126294964, 66.64711634813116, 137.72305215324727, 196.20907490020272, 291.43377030152305, 160.97071074070183, 310.0164168634218, 283.87528624761484, 95.27103754728793, 199.14516418397068, 214.7465705651916, 179.43444544718238, 365.6781544031896, 233.33197296754426, 174.77442786196565, 199.95592749890903, 260.83777368383045, 81.75683118325692, 160.6897735337969, 202.46286544762086, 219.05033331975258, 132.37435180636544, 227.47850146685644, 34.078937893685044, 168.41417102813813, 43.11200014813812, 204.19820921468985, 138.13889877508157, 315.56093887622046, 134.67302099802603, 304.52681088343365, 237.92132436918655, 137.05186372167466, 108.93762723335469, 182.02266624656107, 160.80048153879432, 129.75418887667925, 227.22668078613313, 97.25007752724538, 127.63432961788875, 126.88770126276694, 315.1550072204975, 157.1288920401909, 209.53844226403132, 387.9710197443697, 231.1177412218542, 158.7173919211327, 187.25738540419368, 226.38947277370738, 38.5673095419559, 35.98218151077266, 107.42556459924891, 124.12459392102286, 173.83206602839147, 169.9897673815245, 198.69432955656012, 198.99659626824592, 253.2471890186369, 69.04450997508594, 258.07790818592673, 336.71363413487086, 403.06362162487534, 74.51603843861058, 164.74830145397078, 179.69906458223508, 138.56555741204133, 414.31213750399337, 280.0999200749518, 197.3472687856812, 276.1568755358237, 45.60550376639621, 259.01952220167493, 285.70410988447753, 76.14918375003722, 211.93555626915452, 37.37143732888048, 37.19814436262589, 342.3694659379065, 68.11759440901103, 100.94210202094465, 349.821481600458, 111.82293966413258, 72.12504702079421, 67.30662983524448, 220.52261589609, 156.61317520821854, 144.3536631493044, 121.5668747740044, 131.70613762137876, 100.54915735001734, 218.03520641790752, 257.33883515582824, 150.9823616476385, 209.2917565174101, 183.44076964998263, 259.558233537343, 435.4636662614712, 127.5069410537205, 70.07290689431544, 354.54626415325043, 261.00910695568814, 418.085900004779, 267.78838004304555, 27.22698624807347, 145.47613487852627, 201.72786461097732, 161.70008095648407, 183.46640755861367, 295.35666438560975, 39.28004553535222, 207.0432766471778, 178.8346148529856, 206.4882515639347, 212.52032801628175, 279.03643616389064, 164.2749928070294, 30.909962651943438, 74.77962788260662, 218.66033999714045, 159.12626333722469, 150.78182100896998, 200.52539862518296, 111.78095215326765, 86.39857617306959, 223.93971322251616, 166.5103442403249, 225.18944593654788, 104.4855348873312, 228.32989714245207, 191.13620319754318, 172.57320315323997, 101.02419840102614, 146.96102993880507, 158.40216364548584, 91.06175868719538, 230.22063314463833, 103.39049321408066, 141.63243781173927, 166.3571758752013, 134.9209492918498, 191.18066216575116, 384.6723479875436, 60.36795103995461, 296.05934867334474, 106.41793692445859, 157.50270149450708, 120.4457136044769, 283.4711349216004, 177.4381614944405, 331.3339730929454, 164.57470154768873, 181.45228381909888, 92.97783986577176, 358.667490230755, 122.40403804050818, 249.7164916141155, 411.2995093720204, 320.8602542930752, 217.40457944901263, 182.48888234275933, 170.02979024193797, 33.69278704033601, 171.58784591172275, 46.45009857081361, 239.1018175134933, 91.93771432320675, 218.0320395713731, 210.46657454043455, 236.18707766626446, 211.06433432369474, 411.74860480820564, 299.0126619134754, 151.37363659901848, 205.93960708440991, 228.58817141453787, 88.80542369845558, 154.12790888346174, 90.65252528587249, 270.22699078416696, 231.15504615763564, 382.73091756114843, 344.38483492241687, 201.53160911345464, 301.66820032748797, 259.0799598071605, 135.83293089769677, 275.31750845624595, 364.2119973768469, 146.695436801102, 147.93646022908325, 255.28464728731618, 268.6254614093099, 355.8916891480854, 395.9426961295871, 74.22555120250215, 163.9774235833185, 155.0132286394524, 95.09118608849101, 43.99848102071054, 36.50411629788218, 106.48546512158795, 40.081305960759046, 103.29169630368219, 239.25629589777728, 101.37190832509137, 90.71789080141193, 220.01338985771534, 298.6654800441169, 265.7254487561737, 282.99934068908686, 355.3466298506974, 95.8798618720564, 157.25460734212936, 238.1307591994175, 248.05085658687568, 39.986452667129356, 267.72928525980655, 171.26092038487357, 279.14860178893065, 199.92554281195916, 295.68706856466486, 107.97681552191457, 212.55842564170743, 266.6643262835089, 103.33744165776437, 207.37467428991212, 314.6487474538765, 80.99883942419943, 91.47516027140328, 271.9454308599022, 247.00092903425275, 54.01370276387843, 179.42680113899056, 82.61142471916074, 251.73412130023746, 43.74337303464027, 166.58473491612034, 137.6052079956161, 84.91878316843578, 144.64011596669064, 170.4026261649668, 72.84087381149168, 243.60383264196133, 178.15068784837655, 165.47527656906047, 280.9464519768408, 161.90734087410937, 229.12274162204542, 116.07177386173245, 51.385255358874716, 196.14733051375254, 165.22686571687535, 111.45383276780196, 123.06846655300926, 219.55200371981266, 112.82696242392981, 192.62671312759582, 257.98183791351545, 187.70340568746008, 411.8609792591456, 138.64914474758504, 92.07490685583282, 219.48380425005868, 234.40106257046685, 79.95557575671275, 210.38230236898983, 276.3982221586809, 174.0242038462526, 193.47187952313763, 74.56089756084815, 130.32982538378988, 212.99620663997447, 63.85639348299756, 258.6398346744904, 132.2527583676001, 85.6513223673991, 254.92289761792782, 250.83205077132118, 142.58366447132656, 109.02246389404756, 164.90014230724935, 114.73065123852876, 367.9444960506317, 277.6165964618411, 220.30363579925844, 265.78027926698934, 172.60076642830597, 46.901872236271565, 78.14291377890912, 189.4023091904843, 107.40812110184508, 202.28236973918686, 100.9633924084888, 242.82043595981497, 160.0494810076044, 123.86245289302579, 189.0951854141459, 282.2278223441622, 312.16395478580034, 95.97102990425685, 156.59456742901543, 176.88605727969963, 288.5627480762923, 112.84701140231184, 305.2831098898172, 106.65297246527015, 177.8183127706449, 230.33550695205892, 108.43572870910519, 210.9293723022397, 133.8427220545216, 240.02397739355874, 130.4983184436756, 63.68813193089469, 243.5944037762609, 113.55863625299197, 133.3717845451425, 197.39747972591564, 170.53111653589886, 171.3034424415622, 205.8968772210131, 164.1500937887198, 74.8660601110484, 172.83341820179984, 130.72321509077307, 42.154354362666, 313.47225017188515, 217.68312253848822, 235.7663795284375, 112.47838055577415, 381.8972678058572, 335.4617155721464, 296.836236913051, 160.3615675134702, 213.7409731496837, 320.038183364298, 268.7843807021971, 67.70973821566231, 108.93739993428393, 320.78735237019663, 201.8474116070053, 136.39373773323976, 159.42110942667404, 43.16824682401134, 222.46805207263603, 204.01429696866836, 69.04525966281419, 123.92757074416869, 80.30314619903623, 252.51630871867835, 111.92885620996122, 79.94790029394333, 310.18077140399066, 279.3526926777927, 156.3264270724135, 169.85323642177266, 162.91505843751804, 163.8635923329091, 117.89285351435653, 329.83082264336235, 213.75701872054302, 145.2271131668663, 220.1088718466561, 156.18013551096823, 111.23365175070963, 335.73504485436854, 34.70690370098529, 89.32155347206913, 251.07134268830453, 291.1093285311454, 137.961065911018, 105.59817208512246, 98.98485263791248, 194.923867904237, 77.369750230841, 202.7468644451813, 262.3108190477697, 167.93026517816233, 204.01912285769725, 197.87604760041222, 158.72199814771665, 173.87954758219533, 363.54747098788397, 212.07039012237604, 252.14955294694167, 227.83253345050417, 190.3566404372393, 205.12231851110303, 271.6135461207736, 68.10371804263143, 272.0644993677324, 206.8489423382828, 59.7975116044386, 86.41866488288468, 88.92964922293304, 58.11652100304146, 177.44574677716219, 237.9079101064922, 152.6232949084854, 129.76452867700363, 82.68324025568074, 194.11462233098845, 260.198109313267, 133.66982766753233, 147.5615131962487, 264.947595583582, 181.76586686907564, 120.46365371953614, 193.5305278963649, 72.05169423228678, 142.1916620551166, 147.54037613048706, 194.60424838649794, 303.1245496716045, 208.65096610364665, 160.94153265477033, 203.08845338423347, 123.49427090924803, 196.6884261809137, 377.466580745941, 214.87857719921536, 278.2588158914925, 113.59286656514614, 230.41878560173396, 264.8360735940953, 194.01589532813782, 422.73110038521116, 248.30885719121704, 189.0645622523887, 218.3689490520093, 200.44267192161956, 145.9649270935294, 54.94397745539391, 265.17928496356507, 204.04475940424118, 207.57922453617044, 38.8158940579846, 80.70838078193931, 171.12776562827162, 134.47552533922217, 235.90444186705284, 147.11877893873847, 92.39897976891639, 202.08835410943442, 237.8681196969513, 131.5368213763694, 249.6092222269547, 47.22207274950186, 199.25225699720264, 231.51354432634554, 314.58868545016, 36.230522174700674, 90.28369178389129, 179.92182435615635, 138.85951683184368, 160.48243128922087, 196.5729894207191, 150.46297845282473, 394.1809724358881, 298.1996709013434, 208.70922008220725, 278.9068809283359, 188.24194937058192, 297.8418846568316, 164.66341393322674, 398.6438249334864, 358.5200377888484, 36.22932049808609, 116.63897156081582, 195.3081893780229, 249.44724607058137, 126.64443241724005, 332.92206135560866, 132.25770928113047, 203.3008996305238, 199.01739587094283, 115.24766949831387, 207.54160540922393, 117.10310845716553, 106.56677971420366, 48.58715115333338, 292.5303700447406, 204.30534007810596, 171.5294465676773, 106.87521263028097, 200.67528021340598, 255.56323400875868, 148.99924814888217, 336.58371731793244, 265.1886076409538, 181.9477654739336, 216.1201119729966, 41.32956744585662, 47.870206492494624, 112.70173651201189, 209.77085421601436, 309.977271773737, 357.68834345836734, 177.49526668049953, 259.2128773338721, 252.33162920161047, 142.9237258273182, 117.73461686314667, 134.28467979616175, 108.55896052244047, 371.03992417296286, 194.77331192056963, 254.31644159929402, 357.38430903631064, 337.97164834882, 85.97177124526272, 150.50682649787888, 191.11921306304473, 286.14275804367065, 182.88309006325352, 79.58478188590912, 197.20336407187654, 38.73975650266619, 245.21852939986675, 245.32835639869788, 189.91878077085212, 302.19399775031115, 82.21451767884109, 230.91701213920092, 129.8310424440771, 137.74466855149214, 127.46478781202238, 228.18331500788088, 189.4488547596964, 166.23765597041458, 213.16925376855406, 159.53295324263047, 154.24666823300052, 381.6431502850172, 99.2177122456477, 103.37373643899257, 296.0760948415529, 263.11402407315063, 133.49097568713708, 122.32421444281304, 116.99562800945634, 272.24324113221064, 169.15277793286631, 105.00243049314034, 413.98128947930184, 90.12763087214861, 263.2383761032277, 70.07038189892563, 93.32802293104845, 102.52920916581128, 42.24378334817215, 244.2915458019519, 149.22030372504233, 121.34473960422793, 197.37426034948214, 119.15795523435472, 238.42579597376354, 92.47804982619137, 239.00540685356376, 77.823035471389, 189.9189682480978, 219.44798010459365, 87.54120506528523, 105.67388389985967, 136.02010047251832, 175.66866565530236, 200.86356873703122, 96.58614621864797, 190.73135312565498, 223.82967627856314, 187.28981729784596, 202.09425593657707, 177.74270130631058, 151.65962885664806, 88.78439565883693, 179.0283681925202, 355.4502233677243, 176.85974167262745, 264.0304757589054, 184.2040477582823, 86.50439890419695, 178.92537828099037, 159.89339631706414, 371.48514970774903, 136.5322837750336, 301.10942804893546, 128.42132491616653, 196.43239941577428, 74.69287508952691, 188.56260742509397, 104.1270775116702, 62.454498414512024, 108.89284793950478, 203.01565578504062, 181.66186996618694, 64.73060010142363, 195.8982549388527]  # Truncate for embedding
baseline = 176.72693446142497
mean = 186.60137296458115
std = 90.31733562971759
p5 = 56.853419346260814
p50 = 175.71412561677118
p95 = 355.4556342030286
display_name = "Expected Cost-Effectiveness vs Bed Nets Multiplier"
units = "ratio"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from
output_path = get_figure_output_path('mc-distribution-treaty_expected_vs_bed_nets_multiplier.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 176.7 |
| Mean (expected value) | 186.6 |
| Median (50th percentile) | 175.7 |
| Standard Deviation | 90.32 |
| 90% Confidence Interval | [56.85, 355.5] |

*The histogram shows the distribution of Expected Cost-Effectiveness vs Bed Nets Multiplier across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
