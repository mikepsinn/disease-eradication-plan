```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Total Annual Trade Disruption (10,000 simulations)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [640071796538.438, 504164328487.9488, 692768716896.5841, 716544634743.2422, 431058602986.25726, 481238940547.5854, 620289025648.8372, 573273471171.9504, 604566894166.708, 521173613282.9952, 708807303673.199, 696138799805.4672, 613521064627.6288, 740684557036.1444, 658836404329.7986, 520595908275.92694, 647388157470.5555, 511474318744.85815, 708688086621.7472, 601022777498.2719, 586798939506.5405, 537340879316.8358, 753320083317.6912, 589966752781.8616, 561981127275.9434, 569633054490.4226, 666457880405.175, 647008298699.8651, 652461822491.5846, 654559988910.6648, 863000000000.0, 564171163441.2422, 553672730483.901, 524819115730.2384, 676429374533.0885, 740912175133.473, 594231696545.0879, 522367141109.59735, 523822537396.0808, 680597960673.2965, 691884310812.0978, 667742017148.7063, 538813566797.1605, 631881597650.6097, 619062136736.8606, 630372354007.3159, 707805405519.3931, 630921623450.5942, 684027813997.6185, 613689701145.4481, 638302196623.748, 678269898972.0269, 468181670188.33276, 572924703375.9838, 557802808891.0015, 541366581771.08453, 577470859793.5928, 790637911994.8373, 519992066263.17053, 720078039719.8678, 449795643441.70544, 571379675945.9596, 624144791352.6794, 672866059568.2485, 687962273439.203, 698063494161.9813, 569977780352.4656, 558597498567.9036, 706117301451.2842, 586128366444.9117, 483507250021.75507, 495883703372.9396, 515066522194.19916, 662312996440.6909, 621896929097.1625, 685434211857.319, 562088385195.5758, 623678196172.154, 677584283990.3822, 573975597157.539, 657582347213.974, 539156415735.6981, 568530003624.0066, 566647693508.1628, 490408486390.1377, 661116370542.5159, 557898885374.5554, 607718694365.2605, 660386203472.3542, 656387767603.8412, 682387268145.4392, 595864762868.258, 562483039750.649, 597852960077.4421, 449439342229.71967, 469017014987.2211, 479489353502.2327, 508003286522.2179, 650962848394.6058, 516345564967.3883, 567007405594.0718, 763644094412.4214, 569215592397.1562, 691179931966.3403, 513773123689.5025, 584659857602.9204, 512279348750.80457, 570959147605.4524, 703906421872.1742, 446260827962.86505, 654978682949.8011, 632507096672.8706, 545681588466.2808, 469104818152.4166, 614185567495.3632, 551980094157.1282, 631939348171.1785, 608728958056.8795, 805774033236.6772, 581150604678.8286, 505641821017.58905, 625977895774.5441, 630518730592.5195, 771814597905.0671, 703257419610.4791, 646024514111.2888, 786210376093.9863, 491024855466.9722, 541282635983.5848, 514415676669.1713, 565836424170.8115, 474916670103.4085, 678735091243.3566, 582920582211.2078, 467048691196.9423, 506352989367.96155, 641071976893.8636, 703633908492.3276, 863000000000.0, 863000000000.0, 652656042570.7134, 508698841407.1271, 431000000000.0, 635881370108.4415, 524896590397.1129, 563276417987.3528, 543946097421.09985, 591407163958.7168, 732674302046.249, 623513150549.7898, 589537011578.1096, 504551986257.3665, 450449725056.1842, 556227330957.9364, 600611496691.8573, 829891110406.9674, 620557076283.1067, 721928706077.7788, 554946563213.9635, 491357836171.1535, 510908668719.16315, 533132646577.09625, 863000000000.0, 524110333817.6311, 703679200271.44, 516579494387.91614, 715401949236.8038, 649252375347.4436, 589746008500.5275, 602001111524.4438, 539839961988.5209, 656334296526.5968, 559328532799.6904, 487824326512.7148, 483314086091.32513, 625235276107.5591, 802535733992.5435, 623838944781.8007, 593737140760.777, 637929193298.826, 764562744226.7812, 630449998564.2832, 563719501559.7227, 737935080977.5553, 654320168647.7944, 796386440174.2822, 626417905917.7865, 487922761913.55786, 475635995739.572, 812834163334.7778, 823396434284.2992, 587355714349.5259, 566501932823.565, 785951052909.7819, 498198788009.04156, 517331916919.2179, 679720771344.4657, 565355019392.935, 605821473606.6351, 589034110290.8407, 643815636286.377, 778459061125.9972, 616200784212.4657, 679794611445.219, 431000000000.0, 601151606884.2783, 522082224112.93823, 488412836560.72107, 518856106350.7974, 571456919413.7032, 713414864845.0063, 479175147712.1783, 609678276118.2073, 556438497801.486, 572111558549.648, 724498401600.4774, 667145075391.2506, 768835337526.7019, 589969245331.4951, 535910908234.9517, 582751324552.7728, 633041847771.0217, 625677722571.6567, 500206384379.47455, 616190380179.9202, 631440642287.522, 863000000000.0, 846090591413.6404, 521155165837.09393, 576217528126.392, 467659580865.26416, 546015159421.5998, 641309968298.1567, 751092049710.3114, 532767716457.352, 539901409916.70825, 431000000000.0, 589115349570.0996, 502161106028.0545, 551985314393.0739, 518975068074.2604, 596311561061.7297, 443858733147.8999, 467360581478.51953, 863000000000.0, 482501091849.09607, 499106892835.49384, 840115030200.4819, 863000000000.0, 492525889737.1923, 568005999502.4574, 644270723694.0181, 824132176621.971, 508940974310.7068, 580540039877.6234, 696082660676.1221, 655018493746.4447, 567209376245.408, 592139053310.3966, 475067611212.514, 581272530532.0256, 578368906057.2893, 631882558443.5696, 549454783051.77344, 659307747434.613, 725780086214.7864, 623333973806.9147, 645438301282.6439, 612120576156.85, 606381564216.0415, 533479859659.4677, 641411200225.1885, 595991574431.8954, 863000000000.0, 801719024006.9261, 649355590406.2014, 529564736709.588, 497724528996.7539, 749133444304.5785, 635321548386.0262, 660315496276.2301, 444895334271.2124, 714877135658.5632, 657307545596.6052, 497899549667.9417, 557688748942.9504, 635430713605.1819, 612045770817.5205, 575728057109.2501, 595335887148.1766, 579850109373.9265, 623016873016.7087, 787353986678.0195, 431000000000.0, 581409094116.0916, 625670955242.8835, 639081534153.8586, 567636557399.7654, 443938043478.1207, 642721924412.2062, 823935097782.2709, 461850645506.02747, 706851146746.3761, 572025033889.0958, 599808035736.7294, 503009985275.7117, 571423171138.1117, 763754746337.1715, 672440174112.4121, 824660997268.8574, 747309874032.2528, 655521012348.7666, 826364047927.5548, 655510131170.2797, 702368842997.9347, 575278624675.3422, 613577162125.1561, 535770031567.2017, 722806278722.6185, 491937287918.3059, 696702272018.6908, 586196333088.2239, 746492595581.4762, 692820092068.165, 837692784781.7982, 690353445825.0405, 458731473256.73535, 599209072305.5206, 492487376780.8298, 553079755438.3137, 792926873248.0232, 679022221621.846, 535626777723.893, 506520338869.72003, 609911047967.4363, 488608182280.3873, 538275346130.51324, 640900820710.7096, 744384194028.3776, 675563318720.8206, 431000000000.0, 640031994472.5991, 614175109274.1212, 652595905403.0885, 807840594861.1584, 431000000000.0, 545976742556.8804, 673425704968.5961, 457954210730.2322, 787977119034.979, 647342865406.1954, 704690965687.5029, 547933889258.0644, 700597749000.9319, 732998362131.9633, 631961984738.8295, 632132829061.5886, 636178477865.1245, 520221551052.9854, 590700306883.7911, 590176950661.7686, 649072960653.0437, 724121255050.0342, 502506904769.7362, 593066139809.2644, 788747649832.8871, 531397892065.1738, 524030026213.9755, 628542017838.8938, 704415994813.3628, 607603496217.6716, 767684772355.0916, 705969186299.8994, 704095348269.7902, 669042539906.7917, 863000000000.0, 584688486441.5742, 431000000000.0, 806128156969.4862, 559058963241.8762, 618095352679.7659, 765044511543.755, 456277532243.58307, 485574695786.15314, 456357036209.68353, 526651496669.20135, 655585000632.2888, 665497871666.4447, 636848545277.6809, 471885036665.21576, 431000000000.0, 612250776865.8759, 557663881348.6674, 657887114045.881, 686830881334.6727, 621435220854.2064, 693960259157.282, 631550829374.3898, 666192426232.8342, 535081078062.1835, 587346102253.6436, 627925364482.192, 701439476316.1373, 565441721612.9636, 665141166639.2139, 578425236919.2538, 593852671336.0316, 702559718023.9636, 431000000000.0, 481726680239.82184, 466106330025.7216, 431000000000.0, 537595124815.35767, 692643637936.3542, 576473202492.939, 628038387282.8765, 735702470764.1964, 767511133154.6874, 598976752986.7439, 771047582211.099, 616369433015.1837, 522622942321.7374, 545657336639.70776, 466242764646.495, 517937681165.998, 569038537553.8948, 699333142438.0645, 822973309818.4609, 474453662430.58185, 650160693612.0422, 504114233406.40405, 659677479772.4548, 592426715026.857, 438130905246.86664, 714986078290.423, 544631640599.9904, 551548440559.2512, 501507487963.2117, 539888297038.90125, 654219600320.5767, 586342716158.912, 642797965528.9462, 646603930620.6565, 766554784326.645, 570578928077.6765, 466547297019.7781, 732835861928.3851, 571724279611.8059, 739023509409.567, 649071030794.281, 592421364917.845, 645096936645.6377, 857302611239.2678, 863000000000.0, 613886026360.0255, 623860977916.403, 734009786576.758, 521857021174.5991, 643301129942.3611, 603595285311.8652, 641116852123.001, 522996856909.65155, 457306580272.9135, 431000000000.0, 497285421799.12415, 558962137347.1099, 575623792790.2573, 855208087331.624, 737896398218.5615, 511183119319.3731, 644974724207.4888, 564104754028.462, 576526435380.7778, 626650463316.2781, 676812688362.8469, 570936304642.6819, 732397524335.5475, 495122852759.56116, 607055127725.7012, 863000000000.0, 630863863159.1556, 782022758936.8888, 616303085969.2041, 672216044913.733, 600291695949.7054, 588306396973.7666, 528023097158.3212, 654499618669.2512, 521313013884.38245, 682411508156.001, 735189389882.2318, 647133182394.3773, 576333584910.5001, 657254491386.5524, 574044214453.6927, 715906763336.3629, 438092003927.28424, 571306423136.7195, 431000000000.0, 465042342904.0331, 772455263080.1212, 710796256892.4086, 533676643003.39374, 464428414766.1552, 431000000000.0, 550609890013.5668, 863000000000.0, 655032235814.3859, 549040936341.5635, 658552401428.2759, 459634676898.7697, 575201801873.0985, 617174157320.2375, 597176063606.7152, 697748712860.2723, 644624140966.0735, 682743566346.8801, 536631493939.26733, 711128197705.5654, 809667601380.9604, 510452483197.1443, 517977966880.7419, 768615145559.1356, 586124240240.768, 777953446156.2623, 560565690375.4473, 785058918598.7284, 620690510036.8225, 634812001942.4573, 800490920745.6694, 568659524928.0525, 513089235208.3322, 559966189453.0638, 657064173523.8193, 459243187784.3402, 679014639742.5216, 551071781636.23, 743393997412.929, 431000000000.0, 527359649379.03296, 449508453620.18036, 523660017390.23676, 633622926230.943, 587386218271.4797, 579706018706.7183, 589479458753.3018, 628662746441.3762, 506986379247.6159, 687428011530.1138, 682058003417.6458, 649262397975.0411, 669329618403.3932, 639129633287.9565, 863000000000.0, 597070763839.8278, 574206226049.7775, 530461233635.6274, 504855767585.99097, 486193518544.25354, 517876692010.8301, 598812789254.2632, 643440991540.8801, 611901874197.293, 529331861581.0654, 711427300711.9749, 691412710626.903, 589430971499.9924, 540019321853.34406, 668367349834.5371, 626945056398.9175, 468932543506.1954, 599099844949.2511, 635241104226.5446, 516875958396.0319, 627153162707.4304, 468375610051.8139, 768669958550.3386, 756725176951.4246, 579794539392.1091, 646779836677.3577, 431000000000.0, 493858143623.045, 575563787753.1124, 501295622562.0875, 688349460248.1316, 863000000000.0, 492084778983.1517, 522616896040.47534, 632250367516.7135, 807110570815.6545, 488104206314.5854, 633777047199.7876, 837789837533.8086, 452286272853.1507, 483045511178.2729, 562452261075.7018, 552853171800.6995, 700453215588.2789, 632947799669.2651, 442503094737.9574, 664461861812.7708, 547292841734.552, 760292551322.332, 542452555000.30597, 541584035194.04486, 667502332217.378, 694304421040.8693, 656570496220.2102, 449577938807.49243, 667135484165.0878, 504672515530.4001, 632231036888.4615, 470967235601.1079, 656363414997.899, 525487803263.2108, 482911311653.15015, 688279046420.028, 632946092230.2048, 543764617607.728, 784520295132.7672, 560753104823.9886, 609838042163.3549, 636017047963.9042, 543215804745.4948, 659260678563.9642, 551592289596.9425, 563648356001.8054, 772288066030.7737, 504110465212.0321, 431000000000.0, 807084905887.428, 863000000000.0, 564285907971.523, 431159045129.13635, 573859729144.5532, 576336222500.3059, 586272002746.6337, 497638262769.05786, 672070978653.4918, 665535616855.4348, 465096428824.44147, 686494871881.207, 863000000000.0, 625165632811.5891, 571132258185.6055, 591279917129.8937, 676342615703.0724, 445995463277.0089, 624326239950.2314, 565770729926.0756, 841743696480.6406, 587913364895.7711, 815284705128.0305, 498491126168.8926, 672989901037.7013, 641742126990.8755, 519695314752.0434, 625769100402.1564, 751981153747.746, 572505838255.623, 449070286663.27637, 604485166637.6506, 516625716006.3814, 570624018752.2966, 597654602639.63, 447980448543.4806, 455193694707.23444, 660540966952.9519, 552644169203.3564, 431000000000.0, 697010714652.0077, 636407350828.263, 534207879636.9389, 479989140399.609, 703344384505.856, 645162747469.054, 863000000000.0, 653325865127.7693, 649569611871.3132, 588669860085.6937, 700972422742.3138, 677523528063.7325, 757232391453.7338, 552781100338.7588, 561275382894.763, 556939093123.5668, 697748167868.5995, 791119847187.9869, 558945746766.9835, 562335756387.9694, 641136085242.1722, 580490204785.5609, 718007330486.1263, 431000000000.0, 523615815433.2226, 527748195708.2654, 431000000000.0, 511042745714.3655, 515459435404.2717, 585109674961.331, 738810179405.6565, 580562420736.891, 504985623815.65875, 600273439394.1488, 730491915980.9836, 509926416075.93036, 515878749631.81775, 669569110805.6326, 582991624144.1322, 680222596195.9886, 604905477119.5878, 686795531151.2949, 504603540484.39923, 605073224235.8557, 584115041132.0127, 488666224607.6174, 459429167345.2523, 684858225841.7025, 569752491593.0022, 505751076162.6714, 596108760745.4504, 740786800568.6932, 431000000000.0, 464912120488.5848, 514752661299.381, 785914026085.6772, 637562530389.3695, 694845731643.7664, 495279070357.1876, 497095531345.59503, 656537208205.9297, 612676999291.2418, 668404233393.9077, 586506482429.2351, 637059909763.5573, 623631636784.7545, 696135766825.304, 699758196485.0406, 454853381822.5374, 431000000000.0, 724368219737.216, 748679115826.914, 505899867633.8247, 435886936325.88806, 617125668644.7648, 715308651526.133, 834272303739.4713, 664566501954.161, 567656495190.75, 517478525053.76025, 607606217858.2703, 575003633604.9456, 506398933413.8222, 863000000000.0, 832434270496.8011, 741843367727.4458, 514938720216.13385, 705746845062.5552, 679274475760.5842, 655923591396.9512, 756955601175.0913, 678761619336.3218, 691486540174.7694, 678946594024.0925, 644183345917.1869, 441824300999.4712, 615439601007.716, 549370455250.58435, 483150830432.16675, 817302863199.8442, 824175724882.6196, 771819122151.2495, 634472328075.8843, 770642484353.9808, 607671133430.6871, 628596807331.6738, 499400581469.9267, 650641380569.742, 612906672995.2151, 481198573099.3451, 600887182655.7096, 597851755347.441, 834267364425.8542, 710673680438.2322, 607605586673.6482, 633749058258.2375, 611149705784.3544, 584921798523.5139, 500380509232.9379, 590331027251.0969, 531161197640.05365, 485689482493.6378, 663968047223.9717, 649980369549.4619, 441581544897.2032, 593310870954.9257, 723591543841.5043, 731796169723.5137, 727472344782.0385, 610575141687.5613, 521914055210.74915, 500267582124.5265, 644619527482.4634, 648599189309.363, 762033207184.046, 737109180304.913, 592306641868.4434, 486216466180.1936, 572982123202.3807, 630209308946.2863, 585008052983.1965, 547258336027.4197, 634210144464.6748, 554487530432.9424, 542406481130.67914, 640837502439.1786, 564614189893.3342, 633222506565.8654, 636501596211.4387, 495343417113.5387, 556727787963.0656, 782656308025.9574, 493355960251.4098, 431000000000.0, 435731474754.1865, 609513644095.955, 609709203202.3787, 593845431236.2117, 752204220084.0186, 431000000000.0, 650519273706.5072, 800025046603.6683, 496368600654.7499, 566841979972.6091, 530521087413.4311, 517366900501.2355, 572254868525.6207, 781227913298.6975, 840185587525.4899, 571272772445.4481, 850338577493.3181, 610213633011.4408, 827796335990.009, 596413591901.0012, 620643360194.7455, 647011790829.2452, 863000000000.0, 705279284203.7936, 534835030911.06586, 720170007479.2463, 568653261011.7227, 555887587016.8694, 712490928679.6298, 609727418053.5618, 637108781421.9542, 607879556889.8088, 643702352075.7812, 653880087319.7882, 431158132110.0689, 682531121458.3706, 509378169400.4416, 469417887353.9165, 600118253961.2487, 615478919749.3026, 536142717048.44794, 702748393507.1826, 477834710871.74274, 564118219880.5767, 546580745950.02057, 601379045126.723, 637141392290.7198, 507044252854.7665, 689558406631.8334, 613191376712.2583, 433409663214.6786, 431005246406.6273, 605048024731.0043, 583050485350.6731, 595343089033.2476, 603368242946.109, 631141634362.6874, 717446284126.7428, 497839969574.619, 492490488703.05817, 499413657317.2652, 638279228411.3326, 756321987486.8251, 561680801940.0659, 431000000000.0, 448112410088.9188, 523027684887.67694, 549220608837.5685, 563973565201.1863, 610539153388.6241, 573731163394.1683, 730513438321.8938, 537809590327.8596, 520316417740.91864, 660166915314.1616, 461704696615.5784, 649798925263.4868, 617511179886.1626, 590709343711.3805, 803845154595.7557, 542970812133.67615, 863000000000.0, 582588681033.8864, 483393112358.67346, 613944699283.2717, 500929864830.5254, 530628076062.1693, 650646230480.2251, 669216604150.6638, 542974642563.22974, 722526804802.5245, 744674360569.3088, 782451404832.8248, 666115417093.0881, 772395826760.4917, 434268091051.7941, 573104183069.3884, 519883709040.0162, 619341302386.9618, 547884723136.2071, 588750329137.3872, 846891458340.9058, 588378220970.8796, 652584557565.0027, 581882026849.8978, 614576378063.5074, 607020392229.0172, 656596683149.5946, 745706022731.0251, 812324465307.6682, 640629068474.4673, 673263230927.4786, 494339015961.3034, 596987834801.9315, 716509628108.7006, 707119767122.9438, 629580809692.4135, 709688017200.7804, 661561755136.2964, 750352862924.5874, 638329360801.4391, 569272745178.6677, 643617595860.22, 431000000000.0, 649014423106.7021, 431000000000.0, 446566442716.33026, 656998242364.3823, 660009190714.5709, 493325376484.1945, 534376000040.6204, 773371515136.3262, 556452256133.8584, 863000000000.0, 606165885673.5422, 651918159336.1422, 807935913238.6876, 620639977164.3182, 507543894006.21454, 594676961532.1635, 602551844520.9043, 475924602667.199, 579453517451.6344, 531529592558.1783, 714486336591.8497, 610109165705.5391, 576686921393.6938, 595051317583.0166, 630868597028.2837, 676529608027.8434, 507781034745.0277, 504020854707.8597, 737724298824.6031, 563578473968.6719, 471543748457.72107, 656071126525.3873, 658352502464.2827, 462108626417.2275, 631581134671.0535, 690942893637.4346, 648036067681.8058, 678353365399.4569, 472597240279.02234, 643069355207.8363, 574661317107.4745, 556574738770.9528, 707695715719.6707, 788442364753.2714, 833794960875.5785, 765758730072.0175, 594676251171.6837, 645548720790.6831, 694784762775.303, 619555933137.3066, 620611013456.6108, 701841069055.0759]  # Truncate for embedding
baseline = 616000000000.0
mean = 614330480522.8958
std = 104888518699.56355
p5 = 450496856219.31506
p50 = 604956939543.5573
p95 = 811653707947.4441
display_name = "Total Annual Trade Disruption"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---

# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-global_annual_trade_disruption_conflict.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 6.16e+11 |
| Mean (expected value) | 6.143e+11 |
| Median (50th percentile) | 6.05e+11 |
| Standard Deviation | 1.049e+11 |
| 90% Confidence Interval | [4.505e+11, 8.117e+11] |

*The histogram shows the distribution of Total Annual Trade Disruption across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
