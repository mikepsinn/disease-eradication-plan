```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Amortized Annual Treaty Campaign Cost (10,000 simulations)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results
samples = [261416157.50015858, 165830058.4478802, 304268919.8916763, 324664865.20734715, 122127095.5317284, 151823519.05270004, 246165219.4173769, 211749438.11429262, 234369983.78033376, 176616682.48788437, 317954963.0390897, 307119738.896077, 241052379.5769379, 346049132.45065993, 276303891.9237402, 176244808.58781716, 267172069.415337, 170424571.91992152, 317852123.99571615, 231750849.1681665, 221386464.370233, 187181044.8714307, 357514052.3272188, 223674341.78346914, 203866615.81549948, 209191972.9069645, 282468031.9175674, 266871691.2772808, 271200270.9405895, 272874872.1881579, 490065701.22643024, 205383811.97375587, 198161527.89665, 178972272.59610233, 290635200.7531058, 346254010.75832784, 226773050.50670323, 177386195.63603163, 178326785.96037096, 294083892.0478691, 303522981.0410696, 283513295.8811538, 188158461.08589128, 255046827.15152723, 245234408.23581403, 253881656.22674397, 317091222.14695257, 254305397.57502782, 296936640.3544717, 241179127.25638646, 260033356.4504843, 292155374.18596333, 144118873.0977796, 211503753.78463534, 200987471.87803692, 189858861.2830536, 214717330.78834492, 392465844.7776716, 175856524.69031894, 327752349.82488346, 133605547.17121658, 210417084.58188024, 249101915.7464678, 287703335.1054507, 300226006.98310304, 308753827.66910076, 209433488.62932366, 201533502.69075915, 315638553.39172107, 220903657.35728666, 153182156.1739478, 160700475.9218832, 172705116.77295497, 279107302.0311477, 247387753.09672615, 298110369.65654653, 203940791.1630809, 248745617.78884766, 291588631.16359174, 212244469.76984075, 275296122.26624006, 188386370.30535972, 208420102.14204058, 207106206.4722727, 157352502.31171903, 278140790.3638635, 201053446.9321382, 236711484.181017, 277551857.09903973, 274337855.5372971, 295570417.9778598, 227965168.01368243, 204213833.9202947, 229420718.71044204, 133405686.76261924, 144605853.46144503, 150779660.44131714, 168235198.76808637, 270007045.64595073, 173520749.70628694, 207356975.11137146, 367020317.5030841, 208899683.1487604, 302929536.98555815, 171882262.6791591, 219848171.7626836, 170934349.21630478, 210121793.9683842, 313741055.7590528, 131629280.88751386, 273209657.4661397, 255530505.14046404, 192750042.67340636, 144657087.0697348, 241552013.75359654, 197009099.1909596, 255091464.6335087, 237464467.14425737, 407107414.836105, 217336076.21186346, 166753693.24762923, 250504154.03598, 253994546.05133238, 374632111.2517915, 313185130.9615485, 266094533.4634389, 388233735.0134323, 157727658.8709291, 189802829.8482347, 172290808.882943, 206541193.2151511, 148068240.94066638, 292540223.90130436, 218601321.20278612, 143459675.87194547, 167199174.9464329, 262199333.74396428, 313507565.28275263, 466237214.1030235, 639630310.3501813, 271355067.3574158, 168672802.30503976, 114953591.21917415, 258147587.89427367, 179022501.52164274, 204763282.98945332, 191584609.61305514, 224718508.53047317, 338877724.67376655, 248619647.62307307, 223363286.4813491, 166072152.10341212, 133972825.448272, 199907133.90704933, 231447856.27664667, 430991579.9321981, 246368816.4916681, 329375284.07754886, 199031012.58706915, 157930513.07726854, 170066830.11923897, 184401957.5172389, 487848554.7968311, 178513073.97094485, 313546365.4348895, 173670129.84860885, 323669511.25921535, 268648663.01148623, 223514535.7873968, 232472385.08105427, 188841166.3491462, 274295001.0885145, 202036444.6575556, 155784442.12703234, 153066225.0389175, 249935613.1386259, 403952338.44415575, 248868338.8018989, 226412643.76860446, 259742350.07189918, 367872248.3903622, 253941534.82751635, 205070456.42024174, 343579126.03654873, 272683205.4413781, 397994918.27870744, 250841323.89519468, 155844030.31671268, 148493162.97907358, 414028732.4333695, 424492492.1498042, 221787735.40615946, 207004634.1575238, 387986570.16783404, 162126574.32618508, 174151035.02723578, 293356503.71248496, 206206278.09716573, 235300635.68514022, 222999549.49190974, 264353704.22628447, 380879860.2774567, 243070384.5040089, 293417699.22626597, 118143355.27545278, 231845799.0250169, 177202348.2747616, 156140866.09775215, 175127225.6242062, 210471346.51166058, 321942265.3379185, 150592571.94268852, 238173108.8810473, 200051767.830583, 210931495.67778212, 331635408.37312925, 283027156.76989156, 371847521.01506025, 223676146.5680865, 186234392.43585557, 218480171.91297543, 255944372.3749174, 250274267.55782187, 163368300.07530347, 243062533.4042801, 254706124.86149737, 557807429.3384707, 447417811.4746966, 176604801.7056798, 213828976.82429406, 143814922.51482707, 192974446.66235322, 262385861.15636173, 355478865.0103456, 184161930.3966204, 188882077.21281517, 114369534.81604709, 223058288.0609898, 164581821.27943677, 197012648.25715548, 175203530.08430427, 228291866.0542913, 130294580.40870357, 143640993.23062313, 487979063.30219185, 152578765.56884864, 162687669.56385845, 441322747.92077565, 637688404.324655, 158643117.91120893, 208053921.1268231, 264711895.81161228, 425226248.3548952, 168825270.4559973, 216900468.01839623, 307072141.04941016, 273241500.591011, 207497842.34625903, 225249987.17539105, 148157355.47724774, 217423116.33885047, 215354984.96485907, 255047569.75161678, 195295939.8956446, 276683141.19023067, 332765574.31968606, 248482927.89835933, 265631981.10039118, 240001048.7079394, 235716705.04341647, 184630475.26937523, 262465222.40291542, 228057868.7751563, 481959347.5067394, 403158559.017011, 268730535.1311821, 182061863.1669074, 161833922.37826547, 353694584.06602734, 257712472.31938866, 277494859.5994086, 130869736.12341529, 323212875.7240374, 275075534.7238082, 161941892.3084251, 200909161.64509997, 257797291.1646437, 239944957.47478265, 213482539.1374046, 227578755.48620844, 216408758.48122114, 248241057.77227032, 389324667.5490315, 99436616.99175097, 217520626.55865255, 250269086.0359678, 260641896.56692532, 207795942.14040494, 130338541.49414, 263493849.87748805, 425029639.24924767, 140454420.62069267, 316269642.0989144, 210870648.45272234, 230856510.4193891, 165110201.0811186, 210447638.19574755, 367122880.7515238, 287353911.7284267, 425754033.77133185, 352037355.2215142, 273643604.8604291, 427455980.48440516, 273634894.8616256, 312424788.8599024, 213164685.51235223, 241094538.9354894, 186141259.59214476, 330146267.4201491, 158283826.2673446, 307597685.60549104, 220952568.93227184, 351295889.6525422, 304312279.575131, 438864002.14377344, 302233955.5706094, 138666128.79302198, 230416163.54043972, 158619596.70281857, 197757422.55783296, 394662782.4425676, 292777890.58489096, 186046578.87223536, 167304089.46311894, 238347027.4108206, 156259263.79201752, 187800953.9887045, 262065229.72926494, 349386677.9279566, 289921253.84103596, 108999359.49096517, 261385015.2227268, 241544146.31920478, 271307132.39861476, 409127293.99997836, 117628300.96815005, 192948595.79936802, 288162825.5099684, 138222264.75460666, 389919741.63628703, 267136245.3045269, 314413740.32721585, 194267751.36022893, 310912041.3316838, 339166391.896044, 255108962.32227257, 255241041.39808786, 258378660.20938793, 176004038.60901928, 224205799.74200106, 223826565.53395152, 268506377.48500323, 331303213.24022126, 164796960.5738808, 225924108.25091773, 390656206.33587176, 183262331.0186629, 178461081.90396607, 252472157.20367303, 314177892.5836115, 236625698.7069378, 370774918.082108, 315511254.3699164, 313902979.5308209, 284573859.28634477, 522477706.52421725, 219868724.64545074, 120001124.76470925, 407453183.57131445, 201850911.977022, 244502168.07861748, 368319421.29633236, 137267168.0930379, 154425688.58313334, 137312382.71378163, 180162123.7667099, 273694828.01436585, 281687859.39237, 258900175.62959328, 146283988.69148535, 108317035.54325336, 240098692.55994415, 200892090.2898283, 275540866.39305085, 299278265.8543205, 247036395.12000147, 305275352.6958861, 254791239.20267156, 282252197.07729846, 185686128.31996697, 221780804.84825101, 251998166.35624102, 311630530.3216427, 206266577.24894604, 281398249.1508626, 215395013.75675762, 226496810.9954816, 312588040.0457982, 120421841.2384073, 152115153.55350885, 142912520.58332852, 107470437.79740074, 187349606.39204058, 304163368.4794666, 214010048.8389892, 252085008.2017711, 341579954.7738678, 370613179.29419595, 230245479.11742094, 373914220.1197264, 243197667.99747965, 177551335.94512752, 192733732.72999263, 142991673.63976923, 174538682.76780164, 208775777.88756177, 309834143.39740187, 424070797.56825095, 147795049.62114075, 269369584.5805253, 165798786.63101926, 276980814.42643476, 225459050.23896852, 127138996.17138165, 323307639.24082005, 192044553.39950928, 196715741.82279482, 164175551.13069952, 188873346.53928965, 272602850.1983676, 221057930.43886045, 263553586.7568916, 266552117.0217758, 369723006.8318783, 209854984.936617, 143168427.20036304, 339021624.12056386, 210659215.1006986, 344555863.9815998, 268504847.20704955, 225455161.07654214, 265362811.31907353, 458967204.9679381, 479283050.66123277, 241326727.57948115, 248885162.0009174, 340068141.5483318, 177057099.15260747, 263949035.8896125, 233650500.30242702, 262234499.96297914, 177792864.80491802, 137852964.17549285, 117245652.39810017, 161563194.59765345, 201784291.67652616, 213408778.98626122, 456798441.2187339, 343544438.26079696, 170240358.23935673, 265266478.50053096, 205337723.33616427, 214047758.65351948, 251019618.544126, 290951471.1536026, 210105759.77131435, 338631273.03987867, 160233149.2776436, 236217552.94759676, 573456047.8638619, 254260821.06885415, 384252091.2106873, 243147590.25861213, 287170106.9791573, 231212393.41703284, 222473732.4429314, 181055322.7321622, 272826617.3698124, 176706474.00126788, 295590581.82693034, 341121344.9373307, 266970426.0725991, 213911160.3653712, 275032957.42912936, 212292878.9474887, 324109049.2137881, 127117694.79259983, 210365632.42139766, 120512454.2650647, 142295985.97844946, 375232272.26953745, 319673124.54836833, 184760050.1515658, 141940839.1665569, 87111579.99125844, 196078638.63121614, 539448881.7050968, 273252492.7718247, 195015895.58809888, 276075504.3561095, 139182793.93731323, 213110377.38787246, 243805470.03329635, 228924648.84898412, 308486278.5313891, 264990231.17334923, 295866870.7153049, 186711128.8328873, 319960322.52140063, 410917200.3510961, 169778589.2979185, 174564477.99774748, 371642129.2943581, 220900688.14526537, 380402615.6697004, 202889009.23640358, 387136865.3159232, 246470196.92387372, 257316750.32246965, 401966408.9861033, 208510662.5921667, 171447961.75520116, 202475651.7424614, 274880249.73221195, 138958731.71360797, 292771613.591907, 196392050.04703048, 348491824.51503396, 105317975.39661954, 180623006.30633333, 133444441.96597156, 178221630.770609, 256394472.32576677, 221809730.19764292, 216306135.82641393, 223321644.91928777, 252565007.17660224, 167596430.34268594, 299778281.7941596, 295296589.8355772, 268656612.6028733, 284808234.9188577, 260679477.6337456, 472424661.0887896, 228847526.89771324, 212407199.10453162, 182648458.82463363, 166261986.64941832, 154798865.00457573, 174499634.56689218, 230125053.20946172, 264059008.95653424, 239837077.90946952, 181909641.24175948, 320219219.2479139, 303125590.50920403, 223286565.62116078, 188960593.03694236, 284023002.0944811, 251245564.56061006, 144556572.35724813, 230335906.6454419, 257649977.9635288, 173859534.03040138, 251405238.20982483, 144231861.86114433, 371693252.7117206, 360635645.1903188, 216369178.18297917, 266691113.0833854, 104769288.20087752, 159457832.61533052, 213366335.10346767, 164043968.22441432, 300550687.7926566, 466327891.03743875, 158373819.30452096, 177547431.70541066, 255331929.674379, 408413188.7213009, 155953897.7671489, 256513919.5697827, 438962384.90712214, 135006734.2500319, 152905106.5341162, 204192533.10063183, 197603116.54385433, 310788752.50530595, 255871560.28094146, 129544289.85642388, 280847129.4808586, 193835182.05368719, 363920565.6546195, 190584456.35089546, 190004043.38873202, 283318050.6233663, 305566356.7394147, 274484328.74800897, 133483412.37113744, 283019349.2347423, 166147458.64688694, 255316980.88553903, 145745926.22347584, 274318337.70306075, 179406030.61094227, 152824631.42089838, 300491628.28657496, 255870238.4759507, 191462942.89131433, 386624309.99960744, 203018317.790253, 238292473.37584028, 258253097.09731853, 191095243.7638578, 276645257.26719606, 196745532.30641246, 205021118.4457906, 375075599.4009254, 165796434.45643798, 104669464.738836, 408388094.80912757, 563970103.3932801, 205463457.6432123, 122708734.23515508, 212162737.8739894, 213913028.30972233, 221007030.2386651, 161780717.9940331, 287051171.731227, 281718513.55008626, 142327294.72360528, 298997086.3705794, 475294672.89405644, 249882328.01556975, 210243325.490095, 224626168.9034444, 290563640.26434785, 131481504.49467039, 249240540.70449895, 206495473.59323245, 442979828.99654573, 222189999.33348083, 416444759.78983206, 162307098.19087344, 287804982.21678346, 262724737.38614154, 175665862.15306517, 250344237.79439464, 356290316.4715681, 211208877.52748272, 133198827.42245916, 234309421.58912468, 173699653.07896078, 209886617.33645037, 229275295.3487996, 132588885.11149868, 136651511.85196292, 277676633.23708975, 197460836.36373392, 99500037.48761477, 307859468.9734405, 258556733.83708927, 185110075.53860733, 151077486.29183215, 313259595.1230878, 265414693.3045373, 532464166.0843683, 271889263.89667875, 268900340.5665495, 222736279.5349981, 311231756.4057462, 291538435.5726602, 361101791.4892677, 197554047.5834453, 203378884.6075073, 200394846.44556868, 308485815.41476405, 392927894.3060716, 201773015.34532577, 204111914.35686326, 262249572.60673302, 216864932.266697, 325941196.4355597, 110446691.47980103, 178193036.12419826, 180876129.1242759, 107947045.91981375, 170151592.6509336, 172955471.32668802, 220171209.68746722, 344364315.9157287, 216916428.00770885, 166343167.202298, 231198955.07612836, 336936891.03173363, 169446494.01828894, 173222845.85739297, 285003834.0709793, 218652180.71255815, 293772520.0407173, 234620965.29889575, 299248677.90238434, 166104361.05604875, 234745360.73733854, 219457225.3145416, 156294451.38804957, 139065151.8063231, 297629393.0835179, 209275635.15628448, 166822093.36287582, 228143550.01317918, 346141154.0226438, 109383958.31616603, 142220617.99432522, 172505261.29331592, 387951285.7710484, 259456448.41426817, 306024338.65945286, 160329045.76712123, 161446188.64455533, 274457642.54704523, 240418475.668103, 284053079.9918414, 221175833.34190747, 259064789.8345706, 248710078.37709212, 307117167.2743245, 310196233.2946844, 136458483.99995154, 110613090.77184151, 331520723.85529286, 353281334.281564, 166915267.83834517, 125913127.2670624, 243768825.54814452, 323588310.23740196, 435403708.48765135, 280931988.88912636, 207809860.5142243, 174244815.1013494, 236627725.27328014, 212970318.57117856, 167227974.88313726, 474652811.78938854, 433549953.95276684, 347092805.4044417, 172623723.19155082, 315320209.13469845, 292986768.55436426, 273965952.2534381, 360847375.0692033, 292562177.98765206, 303187785.3007179, 292715281.9487464, 264643103.50946197, 129169406.72198223, 242496312.74568447, 195238860.28701717, 152968277.73221266, 418439782.4817001, 425269698.9665999, 374636347.7805432, 257053122.26546824, 373535345.34865755, 236676064.74716115, 252514292.6099339, 162869337.44332263, 269751489.58732766, 240590881.36566594, 151799394.4985621, 231650933.91323677, 229419835.33887616, 435398721.6128952, 319567102.93015134, 236627255.28484708, 256492225.44783384, 239273568.4651069, 220036256.91420808, 163476219.34922168, 223938179.33569926, 183107108.65949085, 154494876.24595755, 280446835.96204615, 269226386.9231583, 129035467.60593796, 226102228.86489007, 330836918.1960317, 338096116.6708412, 334260719.2743456, 238843560.6550448, 177093878.81647253, 163406225.25973654, 264986596.86524248, 268130831.74004403, 365528809.9015705, 342838900.99141985, 225371773.30548698, 154812711.9569745, 211544192.59980023, 253755940.6001008, 220098208.9082682, 193811911.672497, 256849728.01618758, 198717471.35982913, 190553644.14997974, 262015627.3562031, 205691407.00072265, 256084267.4454503, 258630078.80610675, 160368554.22164303, 200249994.7513334, 384853159.2697808, 159150489.7439688, 115546454.67010918, 125828415.88188693, 238050140.02380192, 238196212.8200127, 226491535.9255609, 356494045.8149207, 95982631.71541569, 269654450.3465179, 401514636.10518587, 160998658.4737993, 207241632.0749711, 182687655.60703677, 174173410.52664077, 211032295.52624822, 383498661.09964865, 441394471.7023217, 210341998.55052063, 451776248.86928344, 238573202.14159387, 428889974.8573009, 228366503.4272565, 246434370.99869817, 266874451.95639512, 698239042.332252, 314918649.03241503, 185523720.24468338, 327832906.02388144, 208506282.45355362, 199674542.89119303, 321140718.33954805, 238209820.6639682, 259102859.31583008, 236831300.75730857, 264264577.68867624, 272331662.58104485, 122703440.97711158, 295690091.1929249, 169100739.45505315, 144839837.45825863, 231084741.38497782, 242525949.75313494, 186387690.27921095, 312749451.847611, 149795719.5093606, 205347068.32520366, 193355230.76215973, 232013472.78607568, 259128263.70367384, 167632751.2960178, 301565593.1561117, 240804680.92572758, 124566593.2554602, 121818675.60487731, 234726671.567169, 218694324.38968095, 227584015.2127518, 233482532.2629954, 254475226.62192205, 325451338.25488746, 161905133.46321917, 158621497.19849253, 162877428.14038306, 260015432.6300211, 360265316.0549667, 203658993.86371294, 101612199.03325658, 132662665.7665923, 177812785.2842953, 195137452.99695733, 205246692.37288308, 238816639.5585326, 212072067.4345849, 336956004.02554506, 187491852.7303752, 176065037.25075957, 277375106.59320945, 140370492.91889426, 269082337.9645288, 244060244.75777212, 224212350.80587456, 405226626.82007277, 190931214.24335098, 476540812.3628529, 218363788.23544446, 153113648.9707746, 241370847.50383922, 163816930.38328966, 182757730.24517563, 269755344.20670277, 284715956.73400253, 190933778.2877492, 329900640.47146887, 349649122.5113055, 384658709.67788756, 282189598.0599975, 375176573.4049891, 125032389.44042152, 211630167.92718545, 175786893.42391855, 245446050.3592106, 194234557.8722506, 222794427.0425133, 448237880.6786866, 222525602.2171011, 271298087.5812542, 217858481.5327981, 241846101.23689106, 236191711.42566544, 274505323.08841, 350583019.45392716, 413527098.0470798, 261852377.03468475, 288029390.4088644, 159752407.42386302, 228786798.4430022, 324634349.47131455, 316500806.2824267, 253271627.24268442, 318715198.96278507, 278500331.1472589, 354804941.64419556, 260054555.49159303, 208939687.19006777, 264197905.38512447, 88098950.29708473, 268459962.1779088, 80057976.57583882, 131799573.03712486, 274827357.588009, 277248012.2003296, 159131781.5375383, 185220916.38714692, 376091432.3853742, 200061193.08715722, 507450533.43493825, 235556442.64404565, 270767196.94850093, 409220580.00919056, 246431800.5659478, 167946483.40772155, 227097780.30314246, 232879049.28039384, 148663818.57259452, 216126360.46811622, 183348727.37819237, 322873054.1280482, 238495103.3947626, 214161465.81031755, 227370975.1742349, 254264474.28614473, 290717886.3661346, 168095489.1152239, 165740502.83202744, 343390133.74421066, 204972662.43298885, 146083793.64828238, 274084131.83464015, 275914807.3648904, 140602832.6712668, 254814651.1004223, 302729960.8705529, 267684800.95982972, 292224406.6716186, 146702193.3260792, 263766841.8198279, 212728488.19118622, 200145110.51166698, 316996729.32416844, 390364335.0579492, 434921901.581019, 368982853.81060135, 227097262.05650073, 265719077.19014657, 305972738.1584319, 245608828.79215506, 246409794.43339062, 311973617.0641888]  # Truncate for embedding
baseline = 250000000.0
mean = 249288471.31219336
std = 87853534.96371986
p5 = 133999309.67240661
p50 = 234659124.58186364
p95 = 412867416.68935615
display_name = "Amortized Annual Treaty Campaign Cost"
units = "USD/year"

# Create figure with two subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---
# Handle edge case where all samples are identical (zero variance)
if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)
ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---
sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles
ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"
exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title
fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from
output_path = get_figure_output_path('mc-distribution-treaty_campaign_annual_cost_amortized.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 2.5e+08 |
| Mean (expected value) | 2.493e+08 |
| Median (50th percentile) | 2.347e+08 |
| Standard Deviation | 8.785e+07 |
| 90% Confidence Interval | [1.34e+08, 4.129e+08] |

*The histogram shows the distribution of Amortized Annual Treaty Campaign Cost across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
