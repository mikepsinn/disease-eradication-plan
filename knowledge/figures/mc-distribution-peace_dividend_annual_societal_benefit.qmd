```{python}
#| echo: false
#| fig-cap: "Monte Carlo Distribution: Annual Peace Dividend from 1% Reduction in Total War Costs (10,000 simulations)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Simulation results

samples = [119040921079.7147, 100643390170.41634, 112167202158.76442, 129430244517.83145, 85845166602.67105, 98373772638.41553, 114134359512.36438, 109727161823.34459, 113955296684.32309, 104333014991.61563, 125740398645.03256, 136250549968.98671, 109643576175.21603, 136352222315.28563, 122857499465.06248, 109562969127.62701, 114163568597.35942, 100804802190.51532, 126276726309.21907, 105285337349.39157, 114060156499.87352, 93968288883.8483, 128046227881.49937, 109786715912.57805, 111031771982.88867, 110760919712.91042, 123033576955.70438, 108344864726.80598, 115206596461.70212, 116891444679.93135, 139841435738.3112, 95373571432.2553, 104412171273.18532, 103685165473.66843, 119650912083.83551, 139493981729.49423, 101739177672.62631, 93045181123.18707, 99550809659.33865, 119709063855.28238, 129898316712.1707, 124624522694.89392, 98688399977.14815, 107631920580.82121, 110206723787.91368, 118925222964.56038, 132777188503.34169, 112297827654.22906, 112330231133.43254, 104299953663.2059, 119523064249.65186, 119713836795.54723, 88860058612.54352, 100493172862.49167, 98161150270.04958, 107387217385.27007, 110149267265.59212, 133175737485.33618, 98484659972.75774, 130857160996.37735, 98718050552.95117, 99765319284.26692, 115891120557.17137, 128758226891.05731, 137356184019.41685, 120795364630.18672, 103291105226.80045, 108631585687.22955, 116651025705.62032, 110621154184.02527, 103722546403.42242, 97177286864.86574, 86460054614.83093, 114385603827.60709, 109702505628.82925, 132958043215.16281, 103565110908.4119, 103888072557.05809, 122028426389.9665, 107380054361.52902, 115772517562.81795, 95309078331.42528, 117858617940.45522, 111535264232.21904, 100038862819.62645, 118747550545.0111, 99850269422.64474, 108593560696.16675, 111264641848.67374, 132840148571.68019, 122260567691.05396, 120379922620.04926, 102016534408.35942, 113352959499.77803, 89485037476.80617, 83992459475.39815, 103127357380.50426, 93822270752.11664, 110909982262.89569, 101799034939.63434, 105352923371.3493, 137594856034.45776, 106355980150.5943, 111449226349.30656, 92156793518.17076, 102546927743.63292, 103133161981.09355, 106213791977.08516, 130571287587.48053, 86204616163.95572, 123297502064.95038, 114408636571.64522, 100609040792.94043, 92065505484.06851, 113368233728.35204, 115004998784.53821, 109672367588.58218, 102839265033.98575, 142901132792.39685, 102898871858.65242, 85102973405.6751, 107544943882.36237, 128456464799.5826, 128774306312.50648, 114640168942.30191, 131086624605.51088, 128966565349.2082, 104835159411.57245, 99035952270.81949, 108486365755.45047, 103579564613.25682, 94473403709.60287, 121591279083.0525, 106248864251.26414, 92132325729.54149, 98980339064.91963, 118029758590.71179, 126844191575.3407, 140955719725.36407, 146356759333.9447, 132209112529.98222, 91816491037.47552, 87423012668.0954, 126006233062.71964, 102029150597.03796, 111696830687.1697, 95254295516.65231, 111085135638.09792, 128300437971.14949, 112351403232.44926, 120824322971.92656, 94213679494.7363, 90295851891.72836, 93897916419.32199, 123360567950.66101, 151643515079.17358, 113247395923.90652, 126553316579.53429, 107642355624.7024, 102013158503.92102, 107874690129.52785, 105932147080.25119, 147886506505.73132, 105675675508.22536, 133204753993.21114, 97933524315.37402, 134775106619.36539, 124036453156.24327, 108458098386.2707, 107323773827.52736, 105598132759.17555, 112252205999.97476, 96965095453.32811, 95419233695.05287, 96775811187.33028, 116713062705.19041, 143414663560.09512, 102044314386.6254, 113962615171.76543, 129077552424.98193, 142599640594.65466, 121727043216.40848, 106490700536.3771, 133628181595.29465, 117782120119.40459, 142315557664.43362, 107631704051.98665, 103900323860.688, 87359410647.04015, 149126247665.85437, 155952903322.41278, 114954938816.74646, 117509504057.60956, 123317746259.98375, 92126493763.7367, 107074135082.35197, 114188593385.60951, 100160175943.56844, 115369080866.75015, 109196732159.80678, 120877225736.16602, 137726308110.88058, 114719467104.61598, 117664823432.40192, 87049561657.58606, 108001800296.22734, 96695985816.41957, 99021462331.18483, 90628919778.12973, 93590665979.67754, 134446018362.50696, 93537519532.67117, 122902224036.85555, 98968083817.83235, 105517599083.35046, 130346641496.7788, 116544183825.02853, 128332910005.0298, 115067284269.43263, 92715003939.58287, 101344914843.19289, 114658489140.26306, 121949386743.0752, 91955754603.38937, 108583342508.54666, 113998271349.36308, 150774950463.20795, 142099884422.45963, 105785478653.3297, 115403054183.98401, 90053452910.97452, 113973821042.83089, 117409074039.99516, 143097950356.03387, 102267391670.4998, 103275296642.81004, 78476143417.58336, 101852844342.13942, 93574503232.5027, 111278063754.32153, 100153870232.81767, 107989458764.60558, 91424890594.23116, 97734645951.76141, 147318411553.0449, 94139368286.32169, 95512588306.10344, 143872327955.85297, 140520739259.8484, 89305447199.85399, 109982624026.04633, 126407640560.38126, 139838163744.46912, 94402324584.83609, 97018720905.4084, 112424051284.1247, 130844958768.3501, 100870137839.67345, 121911237198.33127, 88641565118.3859, 98407914313.71024, 107851125193.8858, 121760470844.04489, 107396635568.6748, 127141727486.31122, 122556726068.33391, 125270931771.87541, 129633407194.57129, 124509021460.54945, 113399659383.21509, 97876284175.07764, 113701516397.31865, 100492894912.94058, 142481198582.76733, 123031608685.35767, 107457836441.22556, 101168960534.87129, 93237373437.97127, 134501122235.13115, 121594732401.50046, 122860689812.46393, 89560827532.25452, 127424397685.08618, 114034697899.3736, 88034109883.30205, 100657353551.52066, 115462386986.65813, 112748086179.30295, 113527660172.04994, 108682106918.9476, 111398948245.85278, 104966858598.46141, 140000088618.20612, 87009632122.87782, 118212211003.04657, 112675588126.53188, 102623627343.43855, 103543751711.61552, 92050446642.2331, 109309354808.43933, 144504681584.5844, 83771954997.00842, 141331796376.98254, 103388288278.63176, 102518469635.03117, 92383812086.05586, 107771209134.24757, 139260531647.45566, 132860191888.1091, 137025754690.49164, 139431636051.0656, 108331529308.08566, 134217436179.38864, 109740743524.80411, 120281771701.79085, 111952529412.4825, 108448919154.89613, 97755112477.02931, 131588339360.46988, 97022850650.84067, 122221298248.28883, 101850833394.48164, 147454377886.26816, 121689557517.16248, 141328460384.35162, 122921938968.9566, 93204414900.05954, 101314312539.13121, 105051463812.46402, 101036524969.71399, 144108199838.3034, 113975115947.88208, 101569275321.93834, 107124479338.50256, 124948439057.73608, 97355303319.65373, 95695017402.68712, 127038506164.09125, 120285979804.0816, 115746405625.23941, 85489239160.6824, 106507804278.0946, 109124065035.60045, 125047324055.81961, 134364995728.11067, 90971925126.21811, 113967175115.28766, 124935101396.58739, 94673694230.87611, 150112995130.82117, 114680619199.20578, 133445125013.60966, 99504718919.0322, 128543780930.98596, 139342329865.94946, 109839744448.81276, 102051454524.97969, 109914569850.63383, 105988105261.29004, 102567013553.783, 117163472535.4079, 111829716563.29102, 127753259990.41496, 95302172245.11781, 102890237544.46855, 136026916313.72054, 91206237251.82574, 96485710419.21556, 114221678554.89761, 112149344637.54317, 105673035329.49678, 137623451363.25647, 118629470418.69626, 130242728105.25357, 125612625928.36572, 149938433205.62808, 113996164843.69585, 78358508893.71945, 149890858925.17868, 97962420219.48032, 114038361682.72046, 150115581448.35416, 87250138434.2696, 93237136944.71065, 84046557478.38652, 110616244819.22632, 112717023561.5564, 125837370624.0969, 126715829820.66614, 96093270878.79742, 87891560003.58781, 113017342378.88371, 96397023624.42336, 133093564787.31941, 125917237966.98912, 113914977224.34848, 117198028435.3606, 115834481506.38448, 120311630637.2451, 112079827094.64621, 108631946581.14633, 115153972072.29858, 118343434535.45868, 100450364299.29214, 124675877492.85188, 96924541678.66327, 117312867241.43024, 135349888369.57483, 81646157522.69162, 94810258907.5156, 99199689886.33525, 85214746525.80287, 98768958159.99657, 123174781163.582, 108649955259.87053, 110514774712.65324, 127834325286.02887, 137515851361.66394, 107105515355.42482, 126711667788.01135, 101938347377.90543, 98634142205.88422, 111110215684.96156, 93048546545.65053, 91318479032.6895, 100948936426.13972, 123243892172.15868, 158398321456.42404, 102380862137.80159, 131786901486.40567, 96424451846.67249, 133396075931.3157, 104713010869.41364, 84992699120.78543, 136213427302.02704, 103783112121.15094, 105294991419.62999, 85447571858.2032, 95327950859.00368, 118428663256.89569, 103887677253.42824, 108377908543.74446, 113559643319.8257, 137442244263.3442, 111270543914.9325, 81551848849.14021, 130563263748.1404, 105421827249.98672, 133378888602.43169, 110611985556.43169, 102469608522.51996, 128041714983.2534, 128697183492.8961, 140092955047.4046, 109830746388.40002, 111991661604.82797, 125596067097.75227, 101527729294.81097, 120228149145.07126, 110034162159.18275, 112497595130.57579, 97083768713.61778, 89860699439.43094, 82082587141.79224, 98324700303.821, 111469615470.74477, 118129645354.40916, 160825527014.2604, 128757222836.957, 97392106547.97008, 116224419696.31686, 103804173055.32547, 105306834180.70142, 114675202382.9574, 132510857686.90549, 108185646059.22166, 122167695366.88394, 100766169543.06778, 113155207744.58197, 152088505171.7744, 117478372857.05173, 139986340193.6085, 115919798181.56369, 110480497524.85358, 114119707993.63539, 104068901998.54942, 96314170076.44954, 118897426541.07895, 109687781440.85887, 116104740914.93776, 130673061508.42805, 115906850562.47644, 113826127467.09236, 117243211950.20312, 108051768781.58891, 120958812469.58572, 93863037970.33937, 97687485289.30606, 88627229966.07224, 91847489014.88597, 139089507209.4537, 117703247017.15462, 98265633354.77269, 95951189151.17673, 95875000000.0, 102104750196.33928, 155014982795.7025, 119999584069.06255, 102190236337.60402, 116505097274.70473, 89776967346.85918, 111595313250.4108, 119089533348.66315, 102386301246.70335, 121731641487.9273, 110360875622.5494, 123643681920.50893, 98512356140.70642, 130397092185.54895, 144312498350.36932, 85898349895.89957, 86686229462.1489, 135212981333.2537, 117690153127.83984, 132336280602.26868, 101008196438.18001, 146835794667.4696, 120077337083.60204, 109473698242.43086, 145954938340.62665, 100837450276.45132, 93721684324.91672, 98451198610.47363, 110997587007.50563, 90351759527.72884, 113351373363.2497, 103912778407.17781, 133020774686.18904, 85099303854.1543, 96373705748.5443, 84981771612.55423, 92448804241.84172, 128049144831.88107, 107209126365.92584, 105814518147.185, 103059289610.75836, 126005369645.1038, 92518338959.67961, 125914791288.14885, 126665286619.49825, 118950345062.78543, 111853567758.53395, 121749487180.45026, 141989307620.68063, 116152422616.18953, 102294797358.03363, 99237138887.68658, 98935419075.68443, 101764987171.0222, 101839833310.3189, 114213865221.3897, 122844822165.63753, 107075993481.9538, 105396578018.93608, 125464963742.9599, 122699441438.08151, 109433522793.44044, 98884462313.5712, 114154816968.57336, 114699238419.97998, 89624562186.13736, 108509790884.10902, 115230913597.94516, 86852140677.01852, 112827241224.36333, 100246537380.6215, 147811435033.02054, 134045812526.26834, 107404857152.76657, 104071790122.5749, 83091249152.25938, 98789376758.3958, 104177304093.44061, 102309081091.3773, 132441889516.53255, 142264770605.01315, 94705550330.24025, 109341529394.95547, 106451831193.82094, 137063316642.12254, 85667892486.9185, 109895642765.99695, 160510599197.50333, 86781464228.79907, 83413515397.39384, 98587847097.26274, 94134778918.79073, 127137032529.53313, 118821563608.50719, 92778043151.01254, 125613730557.77208, 94402484167.97333, 137408863069.87721, 100635142943.9447, 108738320446.17921, 127131284865.41524, 139227567125.19333, 112825369816.05466, 83016180240.20628, 117286808209.93748, 95038697549.29138, 110841158680.71997, 86496602133.12737, 121528775445.10126, 95896938364.163, 88819917665.19788, 114664902669.58235, 102471454233.56656, 111720916194.74712, 150060426951.1048, 110124713380.86815, 116008131104.35172, 112037987393.32492, 105618947803.4511, 112016031757.6586, 103562518874.69301, 99914546703.81618, 140920700514.23367, 106768791481.53506, 80935205177.8128, 135700534174.05818, 147900186481.31747, 94816908134.18295, 78603543579.62683, 118559685121.25075, 108985877902.39836, 104272097087.94078, 94512428456.36166, 118049490975.61423, 121358631455.89087, 87974270610.20995, 122907242675.66693, 153868372403.9701, 119018999237.80714, 117480408246.76738, 111883666637.30176, 122437437444.2463, 98163211239.92429, 112711786914.59114, 93457537426.0941, 152514264130.2153, 110436713964.89713, 141013483161.731, 100388841658.28479, 118490304726.6868, 104231532148.82631, 103838614029.80098, 109963344139.83635, 125755104509.9186, 94764898188.35251, 93012665833.73344, 97575900766.47762, 106333141676.54675, 103657537362.81012, 116327190364.96863, 90627332801.62631, 99520100030.60446, 122821900375.42944, 112091126366.20174, 83004450322.2173, 114840312107.21321, 124047919370.55048, 91496493624.39423, 97232557096.4077, 118665993857.06738, 119562113702.59293, 164060000000.0, 124056787794.05396, 116577614091.61353, 111884679727.07742, 122022615284.72734, 136406030731.94887, 128038600622.1843, 102446011270.2179, 108512256060.84985, 106270116049.32555, 129411208323.21812, 133914846545.64758, 102463762737.5012, 111451356714.3632, 123878675739.71407, 110199499924.13094, 140937675747.3027, 91788394425.66512, 104365746009.35535, 90487591119.08493, 88032684941.84558, 97746070565.4801, 108106609602.33614, 93474466209.54883, 130085081790.60411, 108156790135.10962, 89655228731.75279, 104634930815.51012, 144465523380.65045, 99476379190.51047, 108741386580.38464, 119837153541.34473, 99412083517.6174, 120399434948.84254, 107931792519.43121, 129711929834.64313, 99998292427.11522, 115162580465.06168, 120536207695.4968, 102268578306.16063, 85199421592.63106, 132188825006.41176, 106007547285.81627, 94531710795.30629, 121291471204.02902, 124770555975.17438, 91532830952.29001, 95161189171.01062, 91854890913.72514, 125446423602.96219, 115695516079.72609, 107951278475.53062, 102142172265.14053, 96982681254.4593, 131841252854.83557, 114630298414.58751, 134623526081.88148, 104523897072.18784, 120223359855.35495, 111389247078.26999, 124377113768.5659, 126557050398.80154, 91265408793.5754, 82211271160.51833, 133510011549.43082, 133037351722.32896, 88455609462.04387, 78442887353.51689, 122293713776.91833, 113733830948.18993, 142184088399.50684, 110843846669.98145, 117708270915.90749, 101412348066.42572, 114137445916.27557, 101510282808.92062, 88456365677.75473, 148946493124.9124, 143204247244.601, 123817207612.69379, 90992023079.82326, 118535342706.93538, 114545353835.79895, 114678465483.29814, 136651949951.20648, 126714641299.85414, 124226581219.89963, 123699429134.13055, 121670281518.17653, 78287293346.7251, 114457154961.52016, 112565602743.05962, 80463342309.33698, 139819233232.8956, 153215327492.9433, 134223138098.20312, 120702403706.5443, 138253786550.21515, 104296008873.88287, 108536596615.75027, 105875602072.63623, 125220324605.40018, 111760766182.31544, 91204240546.37016, 105392382226.10223, 113097111308.52386, 137510244938.03134, 124642924261.25378, 107466043013.9566, 121895694111.3, 111204089915.31906, 109164301617.11195, 88800552295.05563, 104841749894.40944, 100845611026.26602, 85037145188.42764, 118713298899.29573, 118121188207.28961, 81149384095.85838, 117506856230.87212, 132378013063.52823, 129287460003.58676, 124599738382.02896, 102297633767.04868, 104946904355.83511, 92401263553.8946, 108262718303.23271, 112906621980.93427, 138442750135.47577, 133242884441.33769, 102596285056.33418, 100936723955.6195, 97905158561.63582, 126636201092.06935, 109576694310.91391, 99857284505.16673, 113973105687.41661, 103963687075.36969, 105237821355.36493, 105796545265.19287, 100244953692.8723, 115989289394.27364, 125963261615.34668, 102236933864.9396, 115824725646.66895, 147478987188.46808, 89514634336.40884, 85843273584.78523, 93390516601.96481, 119701328128.97742, 110581118693.42465, 113290071562.91399, 129442953289.2341, 78860355148.04112, 117412319638.55614, 137721370297.3652, 91621895726.54909, 109213624735.98044, 98183722805.67932, 100173747326.80833, 111761283051.4368, 152433528495.6113, 143467269278.8216, 115233511275.86555, 147814221160.23502, 114181468349.92775, 142015854053.95032, 110927028074.49498, 112085418112.44724, 125968838262.79019, 140947904064.7642, 116359838471.58563, 97040529900.52153, 124042796247.24258, 102169432551.68604, 102717742558.65361, 123665665103.14879, 110920262751.29074, 112497077312.51257, 114800481034.22148, 130693229015.67297, 120392924288.30298, 83348000645.98506, 108950056785.8835, 107607575595.09673, 92620480757.44699, 109386758452.80707, 99942207384.67702, 99830556764.11235, 127307911626.31227, 89157455843.97935, 97040310107.01903, 94194688061.89166, 123491740573.20624, 116978938840.1136, 92844667869.3713, 124569643029.29742, 112332418929.66344, 79424156712.14975, 91489671981.30078, 109966238341.65587, 108667465410.06186, 121868679731.50821, 102868611922.74539, 110043217988.54082, 131149508726.9029, 100798753826.13292, 90519922414.34163, 91680685862.43805, 121407029158.96321, 148864909935.04413, 105036222570.24118, 81960752719.00647, 82843482855.3812, 97588876742.06247, 108697167269.08856, 117074045426.5982, 109976084393.06087, 106933396111.6109, 145158681267.72842, 102822890029.09506, 99445208237.6467, 132688027367.60216, 90593675882.09355, 111486836878.53523, 123155603048.8711, 99606897239.07283, 149726303418.27353, 101579138734.2221, 144516104820.16406, 105624256907.112, 92001350356.15443, 109610510834.4698, 98047965790.90543, 97151354352.35994, 106458204210.99399, 121161620455.62904, 108597663815.01843, 116163102483.4741, 132124612469.3113, 133194377067.68512, 128562578989.81363, 133551786554.83348, 91079558792.30467, 111055931246.54427, 102600074615.20628, 126555542017.94183, 100933117954.90404, 109174194974.5514, 149243520622.67548, 109333257844.50528, 116710883281.64969, 102005932028.08849, 112847861739.94183, 102418672615.21245, 106721519260.10411, 123972672206.50307, 147161495902.2313, 118549726766.75656, 127357926060.82727, 90361866129.54039, 118243783543.32057, 118554945958.1333, 119145996357.64217, 123438610604.20053, 128625132110.07953, 125549866481.1589, 134942686627.67003, 112480619844.72147, 98536055736.34787, 105930559658.84598, 95875000000.0, 107724692657.00215, 95008290168.56339, 88628458770.16309, 121380032195.51344, 121311799052.35513, 97697110428.09471, 95580624518.08873, 121063208761.29051, 100063780882.84177, 151700255499.88336, 104578021603.12651, 127532855745.2084, 139140167968.51532, 106202053866.96692, 96994100317.86731, 112899512463.07407, 114733545866.43982, 79147702940.44289, 92091462974.05476, 107198509451.81624, 117858797945.43933, 120262505482.13452, 115604531179.58058, 102307880762.00989, 108523848385.833, 128416096543.65407, 93670150054.65393, 104744458775.10065, 146195065763.51254, 97873073957.27652, 86953906480.0479, 119880638506.87764, 106293976460.92545, 81376486392.65488, 109277701554.48567, 138663026538.4076, 119814309139.85867, 117795607578.99617, 85996341564.29375, 109208616208.1566, 102785632120.04407, 99734556989.77748, 125177919648.82178, 142241789226.71973, 142783161832.4683, 142260190428.3357, 107591763909.21872, 131006035030.72943, 131670249026.44984, 115153466680.37999, 117440513857.03664, 121910163682.95192]  # Truncate for embedding
baseline = 113551000000.0
mean = 113009456155.0397
std = 16841774435.858597
p5 = 87397089481.19351
p50 = 111706556446.16531
p95 = 143267659612.62894
display_name = "Annual Peace Dividend from 1% Reduction in Total War Costs"
units = "USD/year"

# Create figure with two subplots

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
fig.subplots_adjust(wspace=0.3)

# --- Left: Histogram ---

# Handle edge case where all samples are identical (zero variance)

if std == 0 or (max(samples) == min(samples)):
    n_bins = 1
else:
    n_bins = min(50, max(1, int(np.sqrt(len(samples)))))
n, bins, patches = ax1.hist(samples, bins=n_bins, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=1)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax1.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key statistics with formatted values in legend (use format_parameter_value for full units)

ax1.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=2, label=f'Median: {format_parameter_value(p50, units)}')
ax1.axvline(p5, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'5th %-ile: {format_parameter_value(p5, units)}')
ax1.axvline(p95, color=COLOR_BLACK, linestyle=':', linewidth=1.5, alpha=0.7, label=f'95th %-ile: {format_parameter_value(p95, units)}')
ax1.axvline(baseline, color=COLOR_BLACK, linestyle='-', linewidth=1.5, alpha=0.5, label=f'Baseline: {format_parameter_value(baseline, units)}')

ax1.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax1.set_ylabel('Frequency', fontsize=11)
ax1.set_title('Distribution of Outcomes', fontsize=12, weight='bold')
ax1.legend(loc='upper right', fontsize=9)
clean_spines(ax1)

# --- Right: CDF (Cumulative Probability) ---

sorted_samples = np.sort(samples)
cumulative = np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

ax2.plot(sorted_samples, cumulative * 100, color=COLOR_BLACK, linewidth=2)
ax2.fill_between(sorted_samples, 0, cumulative * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax2.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Mark key percentiles

ax2.axhline(50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
ax2.axhline(5, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axhline(95, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.5)
ax2.axvline(p50, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)

ax2.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=11)
ax2.set_ylabel('Cumulative Probability (%)', fontsize=11)
ax2.set_title('Probability of Exceeding Value', fontsize=12, weight='bold')
ax2.set_ylim(0, 100)
clean_spines(ax2)

# Add annotation for "probability of exceeding baseline"

exceed_baseline_pct = (np.array(samples) > baseline).sum() / len(samples) * 100
ax2.annotate(f'{exceed_baseline_pct:.0f}% chance of\nexceeding baseline',
             xy=(baseline, exceed_baseline_pct), xytext=(baseline * 1.1, exceed_baseline_pct + 10),
             fontsize=9, ha='left',
             arrowprops=dict(arrowstyle='->', color=COLOR_BLACK, lw=1))

# Main title

fig.suptitle(f'Monte Carlo Analysis: {display_name}', fontsize=14, weight='bold', y=1.02)

# Add watermark

add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('mc-distribution-peace_dividend_annual_societal_benefit.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Monte Carlo: {display_name}',
    description=f'Monte Carlo simulation results showing uncertainty distribution for {display_name}'
)

plt.show()
```

**Key Statistics:**

| Statistic | Value |
|:----------|------:|
| Baseline (deterministic) | 1.136e+11 |
| Mean (expected value) | 1.13e+11 |
| Median (50th percentile) | 1.117e+11 |
| Standard Deviation | 1.684e+10 |
| 90% Confidence Interval | [8.74e+10, 1.433e+11] |

*The histogram shows the distribution of Annual Peace Dividend from 1% Reduction in Total War Costs across 10,000 Monte Carlo simulations. The CDF (right) shows the probability of the outcome exceeding any given value, which is useful for risk assessment.*
