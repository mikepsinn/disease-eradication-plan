```{python}
#| echo: false
#| fig-cap: "Probability of Exceeding Threshold: Personal Lifetime Wealth (Age 30, 1% Treaty)"
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Monte Carlo samples
samples = [471371.44157882815, 249796.7345675482, 571879.6883156003, 633578.0783198251, 185736.8297767404, 229058.50044119952, 427336.4090811684, 344955.0739231269, 395799.2200435298, 269943.6869474068, 614166.8381974853, 582906.1868112796, 411794.5214556533, 685648.9987092523, 498692.60228372074, 269943.6869474068, 485227.65231225215, 269943.6869474068, 614166.8381974853, 395799.2200435298, 362393.6841372837, 289516.5484459881, 708571.7035367475, 362393.6841372837, 327006.2736927796, 344955.0739231269, 524493.8531474775, 485227.65231225215, 485227.65231225215, 498692.60228372074, 921626.1749105332, 327006.2736927796, 308532.0092987736, 269943.6869474068, 536851.9028397629, 685648.9987092523, 379336.9336789908, 269943.6869474068, 269943.6869474068, 548862.2083691921, 571879.6883156003, 524493.8531474775, 289516.5484459881, 442438.05888284335, 427336.4090811684, 442438.05888284335, 614166.8381974853, 442438.05888284335, 560534.8685972269, 411794.5214556533, 457112.2631309969, 548862.2083691921, 229058.50044119952, 344955.0739231269, 327006.2736927796, 289516.5484459881, 344955.0739231269, 783322.995235749, 269943.6869474068, 633578.0783198251, 207711.2780547128, 344955.0739231269, 427336.4090811684, 536851.9028397629, 571879.6883156003, 593623.6061819658, 344955.0739231269, 327006.2736927796, 604040.9194093931, 362393.6841372837, 229058.50044119952, 249796.7345675482, 269943.6869474068, 511777.6575392339, 427336.4090811684, 560534.8685972269, 327006.2736927796, 427336.4090811684, 548862.2083691921, 344955.0739231269, 498692.60228372074, 289516.5484459881, 344955.0739231269, 327006.2736927796, 249796.7345675482, 511777.6575392339, 327006.2736927796, 395799.2200435298, 511777.6575392339, 498692.60228372074, 548862.2083691921, 379336.9336789908, 327006.2736927796, 379336.9336789908, 207711.2780547128, 229058.50044119952, 229058.50044119952, 249796.7345675482, 485227.65231225215, 269943.6869474068, 327006.2736927796, 729651.2822358714, 344955.0739231269, 571879.6883156003, 269943.6869474068, 362393.6841372837, 269943.6869474068, 344955.0739231269, 604040.9194093931, 207711.2780547128, 498692.60228372074, 442438.05888284335, 308532.0092987736, 229058.50044119952, 411794.5214556533, 308532.0092987736, 442438.05888284335, 395799.2200435298, 812411.2326152469, 362393.6841372837, 249796.7345675482, 442438.05888284335, 442438.05888284335, 749043.3981033978, 604040.9194093931, 471371.44157882815, 777995.0989997863, 249796.7345675482, 289516.5484459881, 269943.6869474068, 327006.2736927796, 229058.50044119952, 548862.2083691921, 362393.6841372837, 229058.50044119952, 249796.7345675482, 471371.44157882815, 604040.9194093931, 896353.5134153785, 974736.0460797386, 485227.65231225215, 249796.7345675482, 185736.8297767404, 457112.2631309969, 269943.6869474068, 327006.2736927796, 308532.0092987736, 379336.9336789908, 669259.8740210931, 427336.4090811684, 362393.6841372837, 249796.7345675482, 207711.2780547128, 327006.2736927796, 395799.2200435298, 851569.4994319542, 427336.4090811684, 642879.5840598383, 308532.0092987736, 249796.7345675482, 269943.6869474068, 289516.5484459881, 919948.8215772753, 269943.6869474068, 604040.9194093931, 269943.6869474068, 624009.8205822166, 485227.65231225215, 362393.6841372837, 395799.2200435298, 289516.5484459881, 498692.60228372074, 327006.2736927796, 229058.50044119952, 229058.50044119952, 427336.4090811684, 807886.3180777268, 427336.4090811684, 379336.9336789908, 457112.2631309969, 736295.5211959844, 442438.05888284335, 327006.2736927796, 677569.5556569297, 498692.60228372074, 793551.4293227062, 442438.05888284335, 229058.50044119952, 229058.50044119952, 825276.1198014528, 840896.647919327, 362393.6841372837, 327006.2736927796, 777995.0989997863, 249796.7345675482, 269943.6869474068, 548862.2083691921, 327006.2736927796, 395799.2200435298, 362393.6841372837, 471371.44157882815, 761104.8551984255, 411794.5214556533, 548862.2083691921, 185736.8297767404, 395799.2200435298, 269943.6869474068, 229058.50044119952, 269943.6869474068, 344955.0739231269, 624009.8205822166, 229058.50044119952, 411794.5214556533, 327006.2736927796, 344955.0739231269, 651922.0783091742, 524493.8531474775, 742757.8025961991, 362393.6841372837, 289516.5484459881, 362393.6841372837, 457112.2631309969, 442438.05888284335, 249796.7345675482, 411794.5214556533, 442438.05888284335, 967541.9534280656, 873438.32140058, 269943.6869474068, 344955.0739231269, 229058.50044119952, 308532.0092987736, 471371.44157882815, 708571.7035367475, 289516.5484459881, 289516.5484459881, 185736.8297767404, 362393.6841372837, 249796.7345675482, 308532.0092987736, 269943.6869474068, 379336.9336789908, 207711.2780547128, 229058.50044119952, 919948.8215772753, 229058.50044119952, 249796.7345675482, 864551.3800934141, 974736.0460797386, 249796.7345675482, 327006.2736927796, 471371.44157882815, 840896.647919327, 249796.7345675482, 362393.6841372837, 582906.1868112796, 498692.60228372074, 327006.2736927796, 379336.9336789908, 229058.50044119952, 362393.6841372837, 344955.0739231269, 442438.05888284335, 308532.0092987736, 498692.60228372074, 651922.0783091742, 427336.4090811684, 471371.44157882815, 411794.5214556533, 395799.2200435298, 289516.5484459881, 471371.44157882815, 379336.9336789908, 914673.1080313288, 803237.196582204, 485227.65231225215, 289516.5484459881, 249796.7345675482, 701143.6840837477, 457112.2631309969, 511777.6575392339, 207711.2780547128, 624009.8205822166, 498692.60228372074, 249796.7345675482, 327006.2736927796, 457112.2631309969, 411794.5214556533, 344955.0739231269, 379336.9336789908, 362393.6841372837, 427336.4090811684, 777995.0989997863, 185736.8297767404, 362393.6841372837, 442438.05888284335, 457112.2631309969, 327006.2736927796, 207711.2780547128, 471371.44157882815, 840896.647919327, 207711.2780547128, 604040.9194093931, 344955.0739231269, 395799.2200435298, 249796.7345675482, 344955.0739231269, 729651.2822358714, 536851.9028397629, 844548.7578244737, 693504.8805373413, 498692.60228372074, 844548.7578244737, 498692.60228372074, 593623.6061819658, 344955.0739231269, 411794.5214556533, 289516.5484459881, 642879.5840598383, 249796.7345675482, 582906.1868112796, 362393.6841372837, 693504.8805373413, 571879.6883156003, 861432.0137175051, 571879.6883156003, 207711.2780547128, 379336.9336789908, 249796.7345675482, 308532.0092987736, 788507.0513464762, 548862.2083691921, 289516.5484459881, 249796.7345675482, 411794.5214556533, 249796.7345675482, 289516.5484459881, 471371.44157882815, 693504.8805373413, 536851.9028397629, 185736.8297767404, 471371.44157882815, 411794.5214556533, 485227.65231225215, 816815.5306781343, 185736.8297767404, 308532.0092987736, 536851.9028397629, 207711.2780547128, 777995.0989997863, 485227.65231225215, 604040.9194093931, 308532.0092987736, 593623.6061819658, 669259.8740210931, 442438.05888284335, 442438.05888284335, 457112.2631309969, 269943.6869474068, 379336.9336789908, 379336.9336789908, 485227.65231225215, 642879.5840598383, 249796.7345675482, 379336.9336789908, 783322.995235749, 289516.5484459881, 269943.6869474068, 442438.05888284335, 604040.9194093931, 395799.2200435298, 742757.8025961991, 604040.9194093931, 604040.9194093931, 524493.8531474775, 947259.7840636533, 362393.6841372837, 185736.8297767404, 812411.2326152469, 327006.2736927796, 427336.4090811684, 736295.5211959844, 207711.2780547128, 229058.50044119952, 207711.2780547128, 269943.6869474068, 498692.60228372074, 511777.6575392339, 457112.2631309969, 229058.50044119952, 185736.8297767404, 411794.5214556533, 327006.2736927796, 498692.60228372074, 560534.8685972269, 427336.4090811684, 582906.1868112796, 442438.05888284335, 524493.8531474775, 289516.5484459881, 362393.6841372837, 442438.05888284335, 593623.6061819658, 327006.2736927796, 511777.6575392339, 344955.0739231269, 379336.9336789908, 604040.9194093931, 185736.8297767404, 229058.50044119952, 229058.50044119952, 185736.8297767404, 289516.5484459881, 571879.6883156003, 344955.0739231269, 442438.05888284335, 669259.8740210931, 736295.5211959844, 379336.9336789908, 749043.3981033978, 411794.5214556533, 269943.6869474068, 308532.0092987736, 229058.50044119952, 269943.6869474068, 344955.0739231269, 593623.6061819658, 840896.647919327, 229058.50044119952, 485227.65231225215, 249796.7345675482, 498692.60228372074, 379336.9336789908, 207711.2780547128, 624009.8205822166, 308532.0092987736, 308532.0092987736, 249796.7345675482, 289516.5484459881, 498692.60228372074, 362393.6841372837, 471371.44157882815, 471371.44157882815, 736295.5211959844, 344955.0739231269, 229058.50044119952, 669259.8740210931, 344955.0739231269, 677569.5556569297, 485227.65231225215, 379336.9336789908, 471371.44157882815, 889286.3752066885, 910940.785358533, 411794.5214556533, 427336.4090811684, 669259.8740210931, 269943.6869474068, 471371.44157882815, 395799.2200435298, 471371.44157882815, 269943.6869474068, 207711.2780547128, 185736.8297767404, 249796.7345675482, 327006.2736927796, 344955.0739231269, 886809.8790797874, 677569.5556569297, 269943.6869474068, 471371.44157882815, 327006.2736927796, 344955.0739231269, 442438.05888284335, 536851.9028397629, 344955.0739231269, 660713.0761934052, 249796.7345675482, 395799.2200435298, 974736.0460797386, 442438.05888284335, 766890.5104919646, 411794.5214556533, 536851.9028397629, 395799.2200435298, 362393.6841372837, 289516.5484459881, 498692.60228372074, 269943.6869474068, 548862.2083691921, 669259.8740210931, 485227.65231225215, 344955.0739231269, 498692.60228372074, 344955.0739231269, 624009.8205822166, 207711.2780547128, 344955.0739231269, 185736.8297767404, 229058.50044119952, 749043.3981033978, 614166.8381974853, 289516.5484459881, 229058.50044119952, 163116.37092489333, 308532.0092987736, 958043.144889053, 498692.60228372074, 308532.0092987736, 498692.60228372074, 207711.2780547128, 344955.0739231269, 411794.5214556533, 379336.9336789908, 582906.1868112796, 471371.44157882815, 560534.8685972269, 289516.5484459881, 614166.8381974853, 816815.5306781343, 269943.6869474068, 269943.6869474068, 742757.8025961991, 362393.6841372837, 761104.8551984255, 327006.2736927796, 772519.0758571131, 427336.4090811684, 457112.2631309969, 803237.196582204, 344955.0739231269, 269943.6869474068, 327006.2736927796, 498692.60228372074, 207711.2780547128, 548862.2083691921, 308532.0092987736, 685648.9987092523, 185736.8297767404, 289516.5484459881, 207711.2780547128, 269943.6869474068, 457112.2631309969, 362393.6841372837, 362393.6841372837, 362393.6841372837, 442438.05888284335, 249796.7345675482, 560534.8685972269, 548862.2083691921, 485227.65231225215, 524493.8531474775, 457112.2631309969, 904993.5869168036, 379336.9336789908, 344955.0739231269, 289516.5484459881, 249796.7345675482, 229058.50044119952, 269943.6869474068, 379336.9336789908, 471371.44157882815, 411794.5214556533, 289516.5484459881, 614166.8381974853, 571879.6883156003, 362393.6841372837, 289516.5484459881, 524493.8531474775, 442438.05888284335, 229058.50044119952, 379336.9336789908, 457112.2631309969, 269943.6869474068, 442438.05888284335, 229058.50044119952, 742757.8025961991, 715795.0498278713, 362393.6841372837, 471371.44157882815, 185736.8297767404, 249796.7345675482, 344955.0739231269, 249796.7345675482, 571879.6883156003, 896353.5134153785, 249796.7345675482, 269943.6869474068, 442438.05888284335, 812411.2326152469, 229058.50044119952, 457112.2631309969, 861432.0137175051, 207711.2780547128, 229058.50044119952, 327006.2736927796, 308532.0092987736, 593623.6061819658, 457112.2631309969, 207711.2780547128, 511777.6575392339, 308532.0092987736, 722819.6559693115, 308532.0092987736, 289516.5484459881, 524493.8531474775, 582906.1868112796, 498692.60228372074, 207711.2780547128, 524493.8531474775, 249796.7345675482, 442438.05888284335, 229058.50044119952, 498692.60228372074, 269943.6869474068, 229058.50044119952, 571879.6883156003, 457112.2631309969, 308532.0092987736, 772519.0758571131, 327006.2736927796, 411794.5214556533, 457112.2631309969, 308532.0092987736, 498692.60228372074, 308532.0092987736, 327006.2736927796, 749043.3981033978, 249796.7345675482, 185736.8297767404, 812411.2326152469, 970301.5992137268, 327006.2736927796, 207711.2780547128, 344955.0739231269, 344955.0739231269, 362393.6841372837, 249796.7345675482, 536851.9028397629, 511777.6575392339, 229058.50044119952, 560534.8685972269, 907024.3021625351, 427336.4090811684, 344955.0739231269, 379336.9336789908, 536851.9028397629, 207711.2780547128, 427336.4090811684, 327006.2736927796, 867590.6944187989, 362393.6841372837, 829339.0813594958, 249796.7345675482, 536851.9028397629, 471371.44157882815, 269943.6869474068, 442438.05888284335, 708571.7035367475, 344955.0739231269, 207711.2780547128, 395799.2200435298, 269943.6869474068, 344955.0739231269, 379336.9336789908, 207711.2780547128, 207711.2780547128, 511777.6575392339, 308532.0092987736, 185736.8297767404, 582906.1868112796, 457112.2631309969, 289516.5484459881, 229058.50044119952, 604040.9194093931, 471371.44157882815, 953428.4844640128, 485227.65231225215, 485227.65231225215, 362393.6841372837, 593623.6061819658, 548862.2083691921, 715795.0498278713, 308532.0092987736, 327006.2736927796, 327006.2736927796, 582906.1868112796, 783322.995235749, 327006.2736927796, 327006.2736927796, 471371.44157882815, 362393.6841372837, 633578.0783198251, 185736.8297767404, 269943.6869474068, 289516.5484459881, 185736.8297767404, 269943.6869474068, 269943.6869474068, 362393.6841372837, 677569.5556569297, 362393.6841372837, 249796.7345675482, 395799.2200435298, 660713.0761934052, 269943.6869474068, 269943.6869474068, 524493.8531474775, 362393.6841372837, 548862.2083691921, 395799.2200435298, 560534.8685972269, 249796.7345675482, 395799.2200435298, 362393.6841372837, 249796.7345675482, 207711.2780547128, 560534.8685972269, 344955.0739231269, 249796.7345675482, 379336.9336789908, 685648.9987092523, 185736.8297767404, 229058.50044119952, 269943.6869474068, 777995.0989997863, 457112.2631309969, 582906.1868112796, 249796.7345675482, 249796.7345675482, 498692.60228372074, 411794.5214556533, 524493.8531474775, 362393.6841372837, 457112.2631309969, 427336.4090811684, 582906.1868112796, 593623.6061819658, 207711.2780547128, 185736.8297767404, 642879.5840598383, 701143.6840837477, 249796.7345675482, 207711.2780547128, 411794.5214556533, 624009.8205822166, 858230.2208034717, 511777.6575392339, 327006.2736927796, 269943.6869474068, 395799.2200435298, 344955.0739231269, 249796.7345675482, 907024.3021625351, 854943.5556949588, 685648.9987092523, 269943.6869474068, 604040.9194093931, 548862.2083691921, 498692.60228372074, 715795.0498278713, 548862.2083691921, 571879.6883156003, 548862.2083691921, 471371.44157882815, 207711.2780547128, 411794.5214556533, 308532.0092987736, 229058.50044119952, 829339.0813594958, 840896.647919327, 749043.3981033978, 457112.2631309969, 742757.8025961991, 395799.2200435298, 442438.05888284335, 249796.7345675482, 485227.65231225215, 411794.5214556533, 229058.50044119952, 395799.2200435298, 379336.9336789908, 858230.2208034717, 614166.8381974853, 395799.2200435298, 457112.2631309969, 411794.5214556533, 362393.6841372837, 249796.7345675482, 379336.9336789908, 289516.5484459881, 229058.50044119952, 511777.6575392339, 485227.65231225215, 207711.2780547128, 379336.9336789908, 642879.5840598383, 660713.0761934052, 651922.0783091742, 411794.5214556533, 269943.6869474068, 249796.7345675482, 471371.44157882815, 485227.65231225215, 729651.2822358714, 677569.5556569297, 379336.9336789908, 229058.50044119952, 344955.0739231269, 442438.05888284335, 362393.6841372837, 308532.0092987736, 457112.2631309969, 308532.0092987736, 308532.0092987736, 471371.44157882815, 327006.2736927796, 457112.2631309969, 457112.2631309969, 249796.7345675482, 327006.2736927796, 766890.5104919646, 249796.7345675482, 185736.8297767404, 207711.2780547128, 411794.5214556533, 411794.5214556533, 379336.9336789908, 708571.7035367475, 185736.8297767404, 485227.65231225215, 803237.196582204, 249796.7345675482, 327006.2736927796, 289516.5484459881, 269943.6869474068, 344955.0739231269, 766890.5104919646, 867590.6944187989, 344955.0739231269, 878992.544456721, 411794.5214556533, 848105.4575518398, 379336.9336789908, 427336.4090811684, 485227.65231225215, 974736.0460797386, 604040.9194093931, 289516.5484459881, 633578.0783198251, 344955.0739231269, 308532.0092987736, 624009.8205822166, 411794.5214556533, 457112.2631309969, 395799.2200435298, 471371.44157882815, 498692.60228372074, 207711.2780547128, 548862.2083691921, 269943.6869474068, 229058.50044119952, 395799.2200435298, 411794.5214556533, 289516.5484459881, 604040.9194093931, 229058.50044119952, 327006.2736927796, 308532.0092987736, 395799.2200435298, 457112.2631309969, 249796.7345675482, 571879.6883156003, 411794.5214556533, 207711.2780547128, 185736.8297767404, 395799.2200435298, 362393.6841372837, 379336.9336789908, 395799.2200435298, 442438.05888284335, 633578.0783198251, 249796.7345675482, 249796.7345675482, 249796.7345675482, 457112.2631309969, 715795.0498278713, 327006.2736927796, 185736.8297767404, 207711.2780547128, 269943.6869474068, 308532.0092987736, 327006.2736927796, 411794.5214556533, 344955.0739231269, 660713.0761934052, 289516.5484459881, 269943.6869474068, 511777.6575392339, 207711.2780547128, 485227.65231225215, 427336.4090811684, 379336.9336789908, 807886.3180777268, 308532.0092987736, 909006.2364281475, 362393.6841372837, 229058.50044119952, 411794.5214556533, 249796.7345675482, 289516.5484459881, 485227.65231225215, 524493.8531474775, 308532.0092987736, 642879.5840598383, 693504.8805373413, 766890.5104919646, 524493.8531474775, 749043.3981033978, 207711.2780547128, 344955.0739231269, 269943.6869474068, 427336.4090811684, 308532.0092987736, 362393.6841372837, 876251.045542801, 362393.6841372837, 485227.65231225215, 362393.6841372837, 411794.5214556533, 395799.2200435298, 498692.60228372074, 693504.8805373413, 821102.6982385803, 471371.44157882815, 536851.9028397629, 249796.7345675482, 379336.9336789908, 633578.0783198251, 604040.9194093931, 442438.05888284335, 614166.8381974853, 511777.6575392339, 701143.6840837477, 457112.2631309969, 344955.0739231269, 471371.44157882815, 163116.37092489333, 485227.65231225215, 163116.37092489333, 207711.2780547128, 498692.60228372074, 511777.6575392339, 249796.7345675482, 289516.5484459881, 749043.3981033978, 327006.2736927796, 936443.5459232364, 395799.2200435298, 485227.65231225215, 816815.5306781343, 427336.4090811684, 249796.7345675482, 379336.9336789908, 395799.2200435298, 229058.50044119952, 344955.0739231269, 289516.5484459881, 624009.8205822166, 411794.5214556533, 344955.0739231269, 379336.9336789908, 442438.05888284335, 536851.9028397629, 249796.7345675482, 249796.7345675482, 677569.5556569297, 327006.2736927796, 229058.50044119952, 498692.60228372074, 498692.60228372074, 207711.2780547128, 442438.05888284335, 571879.6883156003, 485227.65231225215, 548862.2083691921, 229058.50044119952, 471371.44157882815, 344955.0739231269, 327006.2736927796, 614166.8381974853, 777995.0989997863, 858230.2208034717, 736295.5211959844, 379336.9336789908, 471371.44157882815, 582906.1868112796, 427336.4090811684, 427336.4090811684, 593623.6061819658, 395799.2200435298, 289516.5484459881, 327006.2736927796, 548862.2083691921, 395799.2200435298, 471371.44157882815, 560534.8685972269, 327006.2736927796, 582906.1868112796, 485227.65231225215, 229058.50044119952, 772519.0758571131, 308532.0092987736, 207711.2780547128, 249796.7345675482, 249796.7345675482, 411794.5214556533, 344955.0739231269, 344955.0739231269, 536851.9028397629, 471371.44157882815, 471371.44157882815, 485227.65231225215, 536851.9028397629, 185736.8297767404, 344955.0739231269, 185736.8297767404, 411794.5214556533, 395799.2200435298, 660713.0761934052, 701143.6840837477, 442438.05888284335, 308532.0092987736, 511777.6575392339, 308532.0092987736, 395799.2200435298, 642879.5840598383, 308532.0092987736, 593623.6061819658, 560534.8685972269, 269943.6869474068, 642879.5840598383, 560534.8685972269, 427336.4090811684, 289516.5484459881, 269943.6869474068, 308532.0092987736, 524493.8531474775, 269943.6869474068, 498692.60228372074, 229058.50044119952, 362393.6841372837, 427336.4090811684, 960610.9838899279, 229058.50044119952, 777995.0989997863, 427336.4090811684, 485227.65231225215, 427336.4090811684, 498692.60228372074, 362393.6841372837, 772519.0758571131, 327006.2736927796, 685648.9987092523, 289516.5484459881, 395799.2200435298, 249796.7345675482, 498692.60228372074, 772519.0758571131, 379336.9336789908, 362393.6841372837, 249796.7345675482, 362393.6841372837, 207711.2780547128, 269943.6869474068, 442438.05888284335, 736295.5211959844, 974736.0460797386, 308532.0092987736, 766890.5104919646, 457112.2631309969, 379336.9336789908, 498692.60228372074, 411794.5214556533, 427336.4090811684, 327006.2736927796, 229058.50044119952, 207711.2780547128, 548862.2083691921, 344955.0739231269, 308532.0092987736, 395799.2200435298, 593623.6061819658, 442438.05888284335, 289516.5484459881, 708571.7035367475, 807886.3180777268, 511777.6575392339, 642879.5840598383, 715795.0498278713, 685648.9987092523, 536851.9028397629, 536851.9028397629, 511777.6575392339, 249796.7345675482, 560534.8685972269, 229058.50044119952, 269943.6869474068, 729651.2822358714, 604040.9194093931, 783322.995235749, 344955.0739231269, 249796.7345675482, 362393.6841372837, 427336.4090811684, 411794.5214556533, 685648.9987092523, 344955.0739231269, 471371.44157882815, 249796.7345675482, 498692.60228372074, 395799.2200435298, 289516.5484459881, 362393.6841372837, 362393.6841372837, 344955.0739231269, 851569.4994319542, 379336.9336789908, 362393.6841372837, 185736.8297767404, 269943.6869474068, 344955.0739231269, 289516.5484459881, 755157.4259088933, 362393.6841372837, 729651.2822358714, 411794.5214556533, 411794.5214556533, 379336.9336789908, 395799.2200435298, 840896.647919327, 185736.8297767404, 185736.8297767404, 308532.0092987736, 395799.2200435298, 560534.8685972269, 498692.60228372074, 327006.2736927796, 651922.0783091742, 651922.0783091742, 442438.05888284335, 633578.0783198251, 457112.2631309969, 308532.0092987736, 560534.8685972269, 427336.4090811684, 395799.2200435298, 777995.0989997863, 185736.8297767404, 229058.50044119952, 249796.7345675482, 344955.0739231269, 344955.0739231269, 229058.50044119952, 249796.7345675482, 269943.6869474068, 961436.1714345228, 858230.2208034717, 327006.2736927796, 344955.0739231269, 249796.7345675482, 207711.2780547128, 379336.9336789908, 249796.7345675482, 379336.9336789908, 207711.2780547128, 289516.5484459881, 427336.4090811684, 485227.65231225215, 485227.65231225215, 229058.50044119952, 604040.9194093931, 269943.6869474068, 548862.2083691921, 395799.2200435298, 229058.50044119952, 344955.0739231269, 485227.65231225215, 536851.9028397629, 379336.9336789908, 793551.4293227062, 651922.0783091742, 344955.0739231269, 571879.6883156003, 886809.8790797874, 891701.3099435268, 229058.50044119952, 269943.6869474068, 783322.995235749, 249796.7345675482, 229058.50044119952, 327006.2736927796, 485227.65231225215, 379336.9336789908, 289516.5484459881, 289516.5484459881, 289516.5484459881, 269943.6869474068, 941507.2545640713, 457112.2631309969, 614166.8381974853, 308532.0092987736, 362393.6841372837, 289516.5484459881, 185736.8297767404, 229058.50044119952, 207711.2780547128, 185736.8297767404, 249796.7345675482, 736295.5211959844, 395799.2200435298, 729651.2822358714, 485227.65231225215, 582906.1868112796, 269943.6869474068, 511777.6575392339, 571879.6883156003, 308532.0092987736, 524493.8531474775, 524493.8531474775, 308532.0092987736, 249796.7345675482, 249796.7345675482, 411794.5214556533, 471371.44157882815, 269943.6869474068, 411794.5214556533, 524493.8531474775, 536851.9028397629, 798460.1699989606, 722819.6559693115, 249796.7345675482, 833294.7732624541, 308532.0092987736, 660713.0761934052, 411794.5214556533, 327006.2736927796, 207711.2780547128, 362393.6841372837, 207711.2780547128, 633578.0783198251, 788507.0513464762, 269943.6869474068, 457112.2631309969, 289516.5484459881, 308532.0092987736, 582906.1868112796, 395799.2200435298, 844548.7578244737, 327006.2736927796, 642879.5840598383, 411794.5214556533, 593623.6061819658, 327006.2736927796, 395799.2200435298, 379336.9336789908, 269943.6869474068, 548862.2083691921, 548862.2083691921, 536851.9028397629, 793551.4293227062, 772519.0758571131, 327006.2736927796, 485227.65231225215, 308532.0092987736, 411794.5214556533, 308532.0092987736, 816815.5306781343, 471371.44157882815, 362393.6841372837, 701143.6840837477, 185736.8297767404, 185736.8297767404, 593623.6061819658, 411794.5214556533, 457112.2631309969, 229058.50044119952, 395799.2200435298, 898594.1641937478, 593623.6061819658, 427336.4090811684, 327006.2736927796, 327006.2736927796, 185736.8297767404, 457112.2631309969, 604040.9194093931, 207711.2780547128, 289516.5484459881, 249796.7345675482, 269943.6869474068, 411794.5214556533, 185736.8297767404, 536851.9028397629, 582906.1868112796, 362393.6841372837, 185736.8297767404, 249796.7345675482, 715795.0498278713, 163116.37092489333, 344955.0739231269, 249796.7345675482, 593623.6061819658, 289516.5484459881, 485227.65231225215, 524493.8531474775, 864551.3800934141, 362393.6841372837, 485227.65231225215, 229058.50044119952, 701143.6840837477, 289516.5484459881, 308532.0092987736, 395799.2200435298, 207711.2780547128, 442438.05888284335, 633578.0783198251, 457112.2631309969, 207711.2780547128, 379336.9336789908, 571879.6883156003, 207711.2780547128, 249796.7345675482, 614166.8381974853, 457112.2631309969, 485227.65231225215, 870552.2620852261, 498692.60228372074, 548862.2083691921, 974736.0460797386, 362393.6841372837, 269943.6869474068, 498692.60228372074, 498692.60228372074, 308532.0092987736, 249796.7345675482, 945030.6844964058, 471371.44157882815, 289516.5484459881, 624009.8205822166, 379336.9336789908, 362393.6841372837, 524493.8531474775, 229058.50044119952, 471371.44157882815, 881664.8666956502, 498692.60228372074, 327006.2736927796, 308532.0092987736, 327006.2736927796, 344955.0739231269, 327006.2736927796, 624009.8205822166, 207711.2780547128, 604040.9194093931, 327006.2736927796, 485227.65231225215, 249796.7345675482, 742757.8025961991, 715795.0498278713, 633578.0783198251, 229058.50044119952, 593623.6061819658, 485227.65231225215, 207711.2780547128, 395799.2200435298, 485227.65231225215, 524493.8531474775, 442438.05888284335, 457112.2631309969, 777995.0989997863, 708571.7035367475, 163116.37092489333, 344955.0739231269, 362393.6841372837, 207711.2780547128, 411794.5214556533, 715795.0498278713, 249796.7345675482, 471371.44157882815, 269943.6869474068, 289516.5484459881, 777995.0989997863, 308532.0092987736, 498692.60228372074, 207711.2780547128, 870552.2620852261, 536851.9028397629, 362393.6841372837, 536851.9028397629, 229058.50044119952, 701143.6840837477, 344955.0739231269, 362393.6841372837, 308532.0092987736, 308532.0092987736, 560534.8685972269, 457112.2631309969, 548862.2083691921, 395799.2200435298, 511777.6575392339, 327006.2736927796, 933740.8772715423, 207711.2780547128, 722819.6559693115, 749043.3981033978, 269943.6869474068, 933740.8772715423, 642879.5840598383, 642879.5840598383, 411794.5214556533, 362393.6841372837, 362393.6841372837, 485227.65231225215, 761104.8551984255, 442438.05888284335, 269943.6869474068, 593623.6061819658, 624009.8205822166, 548862.2083691921, 571879.6883156003, 344955.0739231269, 269943.6869474068, 269943.6869474068, 207711.2780547128, 442438.05888284335, 379336.9336789908, 327006.2736927796, 163116.37092489333, 229058.50044119952, 677569.5556569297, 289516.5484459881, 471371.44157882815, 229058.50044119952, 766890.5104919646, 379336.9336789908, 457112.2631309969, 947259.7840636533, 788507.0513464762, 344955.0739231269, 308532.0092987736, 344955.0739231269, 511777.6575392339, 379336.9336789908, 327006.2736927796, 777995.0989997863, 379336.9336789908, 943880.866313599, 411794.5214556533, 854943.5556949588, 471371.44157882815, 633578.0783198251, 289516.5484459881, 269943.6869474068, 498692.60228372074, 642879.5840598383, 411794.5214556533, 229058.50044119952, 229058.50044119952, 229058.50044119952, 207711.2780547128, 427336.4090811684, 685648.9987092523, 395799.2200435298, 185736.8297767404, 362393.6841372837, 362393.6841372837, 914673.1080313288, 229058.50044119952, 327006.2736927796, 837146.2930026334, 498692.60228372074, 524493.8531474775, 427336.4090811684, 471371.44157882815, 582906.1868112796, 269943.6869474068, 614166.8381974853, 229058.50044119952, 471371.44157882815, 442438.05888284335, 308532.0092987736, 395799.2200435298, 308532.0092987736, 249796.7345675482, 344955.0739231269, 249796.7345675482, 471371.44157882815, 249796.7345675482, 571879.6883156003, 249796.7345675482, 308532.0092987736, 308532.0092987736, 736295.5211959844, 471371.44157882815, 362393.6841372837, 511777.6575392339, 185736.8297767404, 395799.2200435298, 898594.1641937478, 427336.4090811684, 411794.5214556533, 524493.8531474775, 614166.8381974853, 185736.8297767404, 207711.2780547128, 442438.05888284335, 289516.5484459881, 736295.5211959844, 344955.0739231269, 207711.2780547128, 229058.50044119952, 163116.37092489333, 362393.6841372837, 362393.6841372837, 327006.2736927796, 669259.8740210931, 701143.6840837477, 362393.6841372837, 185736.8297767404, 536851.9028397629, 524493.8531474775, 471371.44157882815, 642879.5840598383, 249796.7345675482, 898594.1641937478, 269943.6869474068, 571879.6883156003, 207711.2780547128, 269943.6869474068, 788507.0513464762, 344955.0739231269, 604040.9194093931, 442438.05888284335, 379336.9336789908, 749043.3981033978, 362393.6841372837, 207711.2780547128, 269943.6869474068, 524493.8531474775, 485227.65231225215, 207711.2780547128, 289516.5484459881, 308532.0092987736, 327006.2736927796, 229058.50044119952, 308532.0092987736, 289516.5484459881, 582906.1868112796, 593623.6061819658, 379336.9336789908, 327006.2736927796, 427336.4090811684, 269943.6869474068, 249796.7345675482, 269943.6869474068, 289516.5484459881, 249796.7345675482, 427336.4090811684, 571879.6883156003, 207711.2780547128, 411794.5214556533, 362393.6841372837, 471371.44157882815, 395799.2200435298, 229058.50044119952, 229058.50044119952, 411794.5214556533, 651922.0783091742, 185736.8297767404, 471371.44157882815, 701143.6840837477, 379336.9336789908, 524493.8531474775, 289516.5484459881, 379336.9336789908, 207711.2780547128, 185736.8297767404, 633578.0783198251, 249796.7345675482, 327006.2736927796, 229058.50044119952, 229058.50044119952, 362393.6841372837, 289516.5484459881, 485227.65231225215, 498692.60228372074, 471371.44157882815, 442438.05888284335, 807886.3180777268, 249796.7345675482, 395799.2200435298, 685648.9987092523, 722819.6559693115, 229058.50044119952, 344955.0739231269, 749043.3981033978, 511777.6575392339, 442438.05888284335, 362393.6841372837, 327006.2736927796, 457112.2631309969, 362393.6841372837, 395799.2200435298, 411794.5214556533, 289516.5484459881, 524493.8531474775, 974736.0460797386, 207711.2780547128, 471371.44157882815, 289516.5484459881, 536851.9028397629, 411794.5214556533, 582906.1868112796, 693504.8805373413, 442438.05888284335, 685648.9987092523, 185736.8297767404, 807886.3180777268, 485227.65231225215, 669259.8740210931, 229058.50044119952, 269943.6869474068, 427336.4090811684, 395799.2200435298, 457112.2631309969, 669259.8740210931, 207711.2780547128, 642879.5840598383, 395799.2200435298, 362393.6841372837, 229058.50044119952, 511777.6575392339, 185736.8297767404, 548862.2083691921, 229058.50044119952, 411794.5214556533, 379336.9336789908, 693504.8805373413, 362393.6841372837, 289516.5484459881, 308532.0092987736, 722819.6559693115, 524493.8531474775, 327006.2736927796, 362393.6841372837, 207711.2780547128, 485227.65231225215, 207711.2780547128, 582906.1868112796, 427336.4090811684, 954387.1644801942, 249796.7345675482, 379336.9336789908, 858230.2208034717, 701143.6840837477, 289516.5484459881, 442438.05888284335, 395799.2200435298, 457112.2631309969, 289516.5484459881, 379336.9336789908, 207711.2780547128, 427336.4090811684, 498692.60228372074, 362393.6841372837, 207711.2780547128, 642879.5840598383, 485227.65231225215, 289516.5484459881, 344955.0739231269, 229058.50044119952, 249796.7345675482, 308532.0092987736, 708571.7035367475, 289516.5484459881, 548862.2083691921, 308532.0092987736, 457112.2631309969, 379336.9336789908, 614166.8381974853, 308532.0092987736, 207711.2780547128, 229058.50044119952, 308532.0092987736, 229058.50044119952, 485227.65231225215, 327006.2736927796, 952450.8982884018, 207711.2780547128, 442438.05888284335, 249796.7345675482, 308532.0092987736, 427336.4090811684, 185736.8297767404, 442438.05888284335, 878992.544456721, 327006.2736927796, 457112.2631309969, 651922.0783091742, 362393.6841372837, 308532.0092987736, 185736.8297767404, 548862.2083691921, 379336.9336789908, 249796.7345675482, 427336.4090811684, 308532.0092987736, 308532.0092987736, 536851.9028397629, 229058.50044119952, 660713.0761934052, 229058.50044119952, 289516.5484459881, 884270.0012093261, 685648.9987092523, 411794.5214556533, 269943.6869474068, 308532.0092987736, 411794.5214556533, 411794.5214556533, 379336.9336789908, 395799.2200435298, 362393.6841372837, 229058.50044119952, 308532.0092987736, 624009.8205822166, 229058.50044119952, 362393.6841372837, 269943.6869474068, 427336.4090811684, 327006.2736927796, 777995.0989997863, 511777.6575392339, 229058.50044119952, 560534.8685972269, 289516.5484459881, 308532.0092987736, 471371.44157882815, 308532.0092987736, 614166.8381974853, 289516.5484459881, 308532.0092987736, 289516.5484459881, 308532.0092987736, 677569.5556569297, 548862.2083691921, 837146.2930026334, 939030.181302113, 249796.7345675482, 411794.5214556533, 249796.7345675482, 289516.5484459881, 289516.5484459881, 249796.7345675482, 249796.7345675482, 379336.9336789908, 249796.7345675482, 604040.9194093931, 269943.6869474068, 974736.0460797386, 327006.2736927796, 411794.5214556533, 229058.50044119952, 837146.2930026334, 677569.5556569297, 457112.2631309969, 229058.50044119952, 442438.05888284335, 249796.7345675482, 777995.0989997863, 593623.6061819658, 411794.5214556533, 185736.8297767404, 249796.7345675482, 560534.8685972269, 708571.7035367475, 677569.5556569297, 207711.2780547128, 457112.2631309969, 651922.0783091742, 207711.2780547128, 395799.2200435298, 457112.2631309969, 344955.0739231269, 207711.2780547128, 344955.0739231269, 344955.0739231269, 379336.9336789908, 308532.0092987736, 327006.2736927796, 395799.2200435298, 498692.60228372074, 344955.0739231269, 327006.2736927796, 411794.5214556533, 207711.2780547128, 511777.6575392339, 395799.2200435298, 411794.5214556533, 633578.0783198251, 185736.8297767404, 185736.8297767404, 457112.2631309969, 395799.2200435298, 427336.4090811684, 327006.2736927796, 548862.2083691921, 624009.8205822166, 511777.6575392339, 344955.0739231269, 185736.8297767404, 582906.1868112796, 708571.7035367475, 548862.2083691921, 269943.6869474068, 560534.8685972269, 604040.9194093931, 803237.196582204, 269943.6869474068, 362393.6841372837, 571879.6883156003, 411794.5214556533, 249796.7345675482, 485227.65231225215, 536851.9028397629, 411794.5214556533, 442438.05888284335, 344955.0739231269, 777995.0989997863, 269943.6869474068, 308532.0092987736, 395799.2200435298, 614166.8381974853, 229058.50044119952, 229058.50044119952, 185736.8297767404, 411794.5214556533, 249796.7345675482, 327006.2736927796, 548862.2083691921, 289516.5484459881, 442438.05888284335, 344955.0739231269, 560534.8685972269, 498692.60228372074, 289516.5484459881, 362393.6841372837, 660713.0761934052, 485227.65231225215, 229058.50044119952, 548862.2083691921, 249796.7345675482, 761104.8551984255, 651922.0783091742, 457112.2631309969, 427336.4090811684, 362393.6841372837, 560534.8685972269, 327006.2736927796, 442438.05888284335, 614166.8381974853, 308532.0092987736, 308532.0092987736, 249796.7345675482, 249796.7345675482, 207711.2780547128, 571879.6883156003, 861432.0137175051, 766890.5104919646, 207711.2780547128, 571879.6883156003, 766890.5104919646, 327006.2736927796, 427336.4090811684, 185736.8297767404, 457112.2631309969, 249796.7345675482, 442438.05888284335, 207711.2780547128, 524493.8531474775, 651922.0783091742, 289516.5484459881, 249796.7345675482, 185736.8297767404, 344955.0739231269, 308532.0092987736, 207711.2780547128, 498692.60228372074, 327006.2736927796, 249796.7345675482, 308532.0092987736, 669259.8740210931, 536851.9028397629, 379336.9336789908, 536851.9028397629, 249796.7345675482, 411794.5214556533, 427336.4090811684, 327006.2736927796, 498692.60228372074, 289516.5484459881, 511777.6575392339, 524493.8531474775, 163116.37092489333, 701143.6840837477, 163116.37092489333, 308532.0092987736, 651922.0783091742, 344955.0739231269, 229058.50044119952, 249796.7345675482, 651922.0783091742, 207711.2780547128, 685648.9987092523, 395799.2200435298, 249796.7345675482, 308532.0092987736, 249796.7345675482, 614166.8381974853, 571879.6883156003, 207711.2780547128, 327006.2736927796, 269943.6869474068, 729651.2822358714, 229058.50044119952, 812411.2326152469, 395799.2200435298, 249796.7345675482, 289516.5484459881, 269943.6869474068, 229058.50044119952, 411794.5214556533, 229058.50044119952, 185736.8297767404, 327006.2736927796, 207711.2780547128, 289516.5484459881, 269943.6869474068, 269943.6869474068, 898594.1641937478, 411794.5214556533, 457112.2631309969, 207711.2780547128, 289516.5484459881, 442438.05888284335, 249796.7345675482, 624009.8205822166, 249796.7345675482, 344955.0739231269, 308532.0092987736, 427336.4090811684, 289516.5484459881, 344955.0739231269, 362393.6841372837, 289516.5484459881, 511777.6575392339, 442438.05888284335, 379336.9336789908, 327006.2736927796, 593623.6061819658, 362393.6841372837, 344955.0739231269, 427336.4090811684, 833294.7732624541, 229058.50044119952, 582906.1868112796, 207711.2780547128, 442438.05888284335, 803237.196582204, 511777.6575392339, 427336.4090811684, 308532.0092987736, 411794.5214556533, 362393.6841372837, 289516.5484459881, 344955.0739231269, 442438.05888284335, 289516.5484459881, 269943.6869474068, 229058.50044119952, 485227.65231225215, 524493.8531474775, 442438.05888284335, 633578.0783198251, 411794.5214556533, 485227.65231225215, 457112.2631309969, 379336.9336789908, 308532.0092987736, 932343.9013850105]
thresholds = [229058.50044119952, 395799.2200435298, 729651.2822358714]
display_name = "Personal Lifetime Wealth (Age 30, 1% Treaty)"
units = "usd"

# Calculate exceedance probabilities (1 - CDF)
sorted_samples = np.sort(samples)
exceedance = 1 - np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

# Create figure
fig, ax = plt.subplots(figsize=(10, 6))

# Plot exceedance curve
ax.plot(sorted_samples, exceedance * 100, color=COLOR_BLACK, linewidth=2.5)
ax.fill_between(sorted_samples, 0, exceedance * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)
ax.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Annotate thresholds
for thresh in thresholds:
    exceed_pct = (np.array(samples) >= thresh).sum() / len(samples) * 100
    ax.axvline(thresh, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
    ax.axhline(exceed_pct, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.3)

    # Add label with formatted threshold value (use format_parameter_value for full units)
    ax.annotate(f'{exceed_pct:.0f}% chance\nâ‰¥ {format_parameter_value(thresh, units)}',
                xy=(thresh, exceed_pct), xytext=(thresh * 1.05, exceed_pct + 5),
                fontsize=10, ha='left', weight='bold',
                bbox=dict(boxstyle='round,pad=0.3', facecolor=COLOR_WHITE, edgecolor=COLOR_BLACK, alpha=0.9))

ax.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=12)
ax.set_ylabel('Probability of Exceeding Value (%)', fontsize=12)
ax.set_title(f'Exceedance Probability: {display_name}', fontsize=14, weight='bold', pad=15)
ax.set_ylim(0, 100)
ax.set_xlim(left=min(sorted_samples) * 0.95)

clean_spines(ax)
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from
output_path = get_figure_output_path('exceedance-personal_lifetime_wealth.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Exceedance: {display_name}',
    description=f'Probability of {display_name} exceeding various thresholds'
)

plt.show()
```

*This exceedance probability chart shows the likelihood that Personal Lifetime Wealth (Age 30, 1% Treaty) will exceed any given threshold. Higher curves indicate more favorable outcomes with greater certainty.*
