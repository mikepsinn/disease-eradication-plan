```{python}
#| echo: false
#| fig-cap: "Probability of Exceeding Threshold: Personal Lifetime Wealth (Age 30, 1% Treaty)"

import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path

from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines, get_tick_formatter,
    COLOR_BLACK, COLOR_WHITE, add_png_metadata, get_figure_output_path
)
from dih_models.parameters import format_parameter_value

setup_chart_style()

# Monte Carlo samples

samples = [467728.25542069884, 246814.83957575436, 567839.8165015692, 629245.7124740685, 182910.53015822236, 226128.34458575712, 423843.9795995834, 341716.36087094573, 392407.90734554897, 266910.17839968955, 609931.4968813934, 578817.2693462336, 408352.58893404563, 681028.3726898674, 494949.520544844, 266910.17839968955, 481534.45767384587, 266910.17839968955, 609931.4968813934, 392407.90734554897, 359103.9808739859, 286431.5516179686, 703808.5159409067, 359103.9808739859, 323818.67491548904, 341716.36087094573, 520651.3601693497, 481534.45767384587, 481534.45767384587, 494949.520544844, 914342.7557233456, 323818.67491548904, 305395.64916200604, 266910.17839968955, 532959.8851357755, 681028.3726898674, 375996.3639672247, 266910.17839968955, 266910.17839968955, 544920.7861449906, 567839.8165015692, 520651.3601693497, 286431.5516179686, 438895.255006718, 423843.9795995834, 438895.255006718, 609931.4968813934, 438895.255006718, 556544.1617666952, 408352.58893404563, 453519.207128279, 544920.7861449906, 226128.34458575712, 341716.36087094573, 323818.67491548904, 286431.5516179686, 341716.36087094573, 777999.8419073081, 266910.17839968955, 629245.7124740685, 204832.98722159833, 341716.36087094573, 423843.9795995834, 532959.8851357755, 567839.8165015692, 589485.7621087469, 341716.36087094573, 323818.67491548904, 599854.2674819048, 359103.9808739859, 226128.34458575712, 246814.83957575436, 266910.17839968955, 507984.80978508206, 423843.9795995834, 556544.1617666952, 323818.67491548904, 423843.9795995834, 544920.7861449906, 341716.36087094573, 494949.520544844, 286431.5516179686, 341716.36087094573, 323818.67491548904, 246814.83957575436, 507984.80978508206, 323818.67491548904, 392407.90734554897, 507984.80978508206, 494949.520544844, 544920.7861449906, 375996.3639672247, 323818.67491548904, 375996.3639672247, 204832.98722159833, 226128.34458575712, 226128.34458575712, 246814.83957575436, 481534.45767384587, 266910.17839968955, 323818.67491548904, 724746.5686157582, 341716.36087094573, 567839.8165015692, 266910.17839968955, 359103.9808739859, 266910.17839968955, 341716.36087094573, 599854.2674819048, 204832.98722159833, 494949.520544844, 438895.255006718, 305395.64916200604, 226128.34458575712, 408352.58893404563, 305395.64916200604, 438895.255006718, 392407.90734554897, 806814.1607856607, 359103.9808739859, 246814.83957575436, 438895.255006718, 438895.255006718, 743998.1864890541, 599854.2674819048, 467728.25542069884, 772717.9883153934, 246814.83957575436, 286431.5516179686, 266910.17839968955, 323818.67491548904, 226128.34458575712, 544920.7861449906, 359103.9808739859, 226128.34458575712, 246814.83957575436, 467728.25542069884, 599854.2674819048, 889614.5482231113, 965402.6555964216, 481534.45767384587, 246814.83957575436, 182910.53015822236, 453519.207128279, 266910.17839968955, 323818.67491548904, 305395.64916200604, 375996.3639672247, 664734.8680989878, 423843.9795995834, 359103.9808739859, 246814.83957575436, 204832.98722159833, 323818.67491548904, 392407.90734554897, 845524.6794501795, 423843.9795995834, 638498.8825000369, 305395.64916200604, 246814.83957575436, 266910.17839968955, 286431.5516179686, 912706.6755308298, 266910.17839968955, 599854.2674819048, 266910.17839968955, 619725.9080556484, 481534.45767384587, 359103.9808739859, 392407.90734554897, 286431.5516179686, 494949.520544844, 323818.67491548904, 226128.34458575712, 226128.34458575712, 423843.9795995834, 802334.6224238161, 423843.9795995834, 375996.3639672247, 453519.207128279, 731343.8610554534, 438895.255006718, 323818.67491548904, 672996.6815937804, 494949.520544844, 788136.5256968925, 438895.255006718, 226128.34458575712, 226128.34458575712, 819543.5791942962, 834985.0117531177, 359103.9808739859, 323818.67491548904, 772717.9883153934, 246814.83957575436, 266910.17839968955, 544920.7861449906, 323818.67491548904, 392407.90734554897, 359103.9808739859, 467728.25542069884, 755966.5456925044, 408352.58893404563, 544920.7861449906, 182910.53015822236, 392407.90734554897, 266910.17839968955, 226128.34458575712, 266910.17839968955, 341716.36087094573, 619725.9080556484, 226128.34458575712, 408352.58893404563, 323818.67491548904, 341716.36087094573, 647493.1583550221, 520651.3601693497, 737759.3098831155, 359103.9808739859, 286431.5516179686, 359103.9808739859, 453519.207128279, 438895.255006718, 246814.83957575436, 408352.58893404563, 438895.255006718, 958612.5934045294, 867086.4892837587, 266910.17839968955, 341716.36087094573, 226128.34458575712, 305395.64916200604, 467728.25542069884, 703808.5159409067, 286431.5516179686, 286431.5516179686, 182910.53015822236, 359103.9808739859, 246814.83957575436, 305395.64916200604, 266910.17839968955, 375996.3639672247, 204832.98722159833, 226128.34458575712, 912706.6755308298, 226128.34458575712, 246814.83957575436, 858330.4853707782, 965402.6555964216, 246814.83957575436, 323818.67491548904, 467728.25542069884, 834985.0117531177, 246814.83957575436, 359103.9808739859, 578817.2693462336, 494949.520544844, 323818.67491548904, 375996.3639672247, 226128.34458575712, 359103.9808739859, 341716.36087094573, 438895.255006718, 305395.64916200604, 494949.520544844, 647493.1583550221, 423843.9795995834, 467728.25542069884, 408352.58893404563, 392407.90734554897, 286431.5516179686, 467728.25542069884, 375996.3639672247, 907555.3849126424, 797730.9875082892, 481534.45767384587, 286431.5516179686, 246814.83957575436, 696427.9015789931, 453519.207128279, 507984.80978508206, 204832.98722159833, 619725.9080556484, 494949.520544844, 246814.83957575436, 323818.67491548904, 453519.207128279, 408352.58893404563, 341716.36087094573, 375996.3639672247, 359103.9808739859, 423843.9795995834, 772717.9883153934, 182910.53015822236, 359103.9808739859, 438895.255006718, 453519.207128279, 323818.67491548904, 204832.98722159833, 467728.25542069884, 834985.0117531177, 204832.98722159833, 599854.2674819048, 341716.36087094573, 392407.90734554897, 246814.83957575436, 341716.36087094573, 724746.5686157582, 532959.8851357755, 838592.619124609, 688836.6184645272, 494949.520544844, 838592.619124609, 494949.520544844, 589485.7621087469, 341716.36087094573, 408352.58893404563, 286431.5516179686, 638498.8825000369, 246814.83957575436, 578817.2693462336, 359103.9808739859, 688836.6184645272, 567839.8165015692, 855254.9773532868, 567839.8165015692, 204832.98722159833, 375996.3639672247, 246814.83957575436, 305395.64916200604, 783137.9671279774, 544920.7861449906, 286431.5516179686, 246814.83957575436, 408352.58893404563, 246814.83957575436, 286431.5516179686, 467728.25542069884, 688836.6184645272, 532959.8851357755, 182910.53015822236, 467728.25542069884, 408352.58893404563, 481534.45767384587, 811173.1928092212, 182910.53015822236, 305395.64916200604, 532959.8851357755, 204832.98722159833, 772717.9883153934, 481534.45767384587, 599854.2674819048, 305395.64916200604, 589485.7621087469, 664734.8680989878, 438895.255006718, 438895.255006718, 453519.207128279, 266910.17839968955, 375996.3639672247, 375996.3639672247, 481534.45767384587, 638498.8825000369, 246814.83957575436, 375996.3639672247, 777999.8419073081, 286431.5516179686, 266910.17839968955, 438895.255006718, 599854.2674819048, 392407.90734554897, 737759.3098831155, 599854.2674819048, 599854.2674819048, 520651.3601693497, 939210.9345793662, 359103.9808739859, 182910.53015822236, 806814.1607856607, 323818.67491548904, 423843.9795995834, 731343.8610554534, 204832.98722159833, 226128.34458575712, 204832.98722159833, 266910.17839968955, 494949.520544844, 507984.80978508206, 453519.207128279, 226128.34458575712, 182910.53015822236, 408352.58893404563, 323818.67491548904, 494949.520544844, 556544.1617666952, 423843.9795995834, 578817.2693462336, 438895.255006718, 520651.3601693497, 286431.5516179686, 359103.9808739859, 438895.255006718, 589485.7621087469, 323818.67491548904, 507984.80978508206, 341716.36087094573, 375996.3639672247, 599854.2674819048, 182910.53015822236, 226128.34458575712, 226128.34458575712, 182910.53015822236, 286431.5516179686, 567839.8165015692, 341716.36087094573, 438895.255006718, 664734.8680989878, 731343.8610554534, 375996.3639672247, 743998.1864890541, 408352.58893404563, 266910.17839968955, 305395.64916200604, 226128.34458575712, 266910.17839968955, 341716.36087094573, 589485.7621087469, 834985.0117531177, 226128.34458575712, 481534.45767384587, 246814.83957575436, 494949.520544844, 375996.3639672247, 204832.98722159833, 619725.9080556484, 305395.64916200604, 305395.64916200604, 246814.83957575436, 286431.5516179686, 494949.520544844, 359103.9808739859, 467728.25542069884, 467728.25542069884, 731343.8610554534, 341716.36087094573, 226128.34458575712, 664734.8680989878, 341716.36087094573, 672996.6815937804, 481534.45767384587, 375996.3639672247, 467728.25542069884, 882675.5147387602, 903906.5162304094, 408352.58893404563, 423843.9795995834, 664734.8680989878, 266910.17839968955, 467728.25542069884, 392407.90734554897, 467728.25542069884, 266910.17839968955, 204832.98722159833, 182910.53015822236, 246814.83957575436, 323818.67491548904, 341716.36087094573, 880241.9281485118, 672996.6815937804, 266910.17839968955, 467728.25542069884, 323818.67491548904, 341716.36087094573, 438895.255006718, 532959.8851357755, 341716.36087094573, 656236.0548798403, 246814.83957575436, 392407.90734554897, 965402.6555964216, 438895.255006718, 761705.8214459311, 408352.58893404563, 532959.8851357755, 392407.90734554897, 359103.9808739859, 286431.5516179686, 494949.520544844, 266910.17839968955, 544920.7861449906, 664734.8680989878, 481534.45767384587, 341716.36087094573, 494949.520544844, 341716.36087094573, 619725.9080556484, 204832.98722159833, 341716.36087094573, 182910.53015822236, 226128.34458575712, 743998.1864890541, 609931.4968813934, 286431.5516179686, 226128.34458575712, 160342.1890202773, 305395.64916200604, 949567.0394017561, 494949.520544844, 305395.64916200604, 494949.520544844, 204832.98722159833, 341716.36087094573, 408352.58893404563, 375996.3639672247, 578817.2693462336, 467728.25542069884, 556544.1617666952, 286431.5516179686, 609931.4968813934, 811173.1928092212, 266910.17839968955, 266910.17839968955, 737759.3098831155, 359103.9808739859, 755966.5456925044, 323818.67491548904, 767288.1198426664, 423843.9795995834, 453519.207128279, 797730.9875082892, 341716.36087094573, 266910.17839968955, 323818.67491548904, 494949.520544844, 204832.98722159833, 544920.7861449906, 305395.64916200604, 681028.3726898674, 182910.53015822236, 286431.5516179686, 204832.98722159833, 266910.17839968955, 453519.207128279, 359103.9808739859, 359103.9808739859, 359103.9808739859, 438895.255006718, 246814.83957575436, 556544.1617666952, 544920.7861449906, 481534.45767384587, 520651.3601693497, 453519.207128279, 898085.2617610507, 375996.3639672247, 341716.36087094573, 286431.5516179686, 246814.83957575436, 226128.34458575712, 266910.17839968955, 375996.3639672247, 467728.25542069884, 408352.58893404563, 286431.5516179686, 609931.4968813934, 567839.8165015692, 359103.9808739859, 286431.5516179686, 520651.3601693497, 438895.255006718, 226128.34458575712, 375996.3639672247, 453519.207128279, 266910.17839968955, 438895.255006718, 226128.34458575712, 737759.3098831155, 710984.5722018452, 359103.9808739859, 467728.25542069884, 182910.53015822236, 246814.83957575436, 341716.36087094573, 246814.83957575436, 567839.8165015692, 889614.5482231113, 246814.83957575436, 266910.17839968955, 438895.255006718, 806814.1607856607, 226128.34458575712, 453519.207128279, 855254.9773532868, 204832.98722159833, 226128.34458575712, 323818.67491548904, 305395.64916200604, 589485.7621087469, 453519.207128279, 204832.98722159833, 507984.80978508206, 305395.64916200604, 717962.0030947266, 305395.64916200604, 286431.5516179686, 520651.3601693497, 578817.2693462336, 494949.520544844, 204832.98722159833, 520651.3601693497, 246814.83957575436, 438895.255006718, 226128.34458575712, 494949.520544844, 266910.17839968955, 226128.34458575712, 567839.8165015692, 453519.207128279, 305395.64916200604, 767288.1198426664, 323818.67491548904, 408352.58893404563, 453519.207128279, 305395.64916200604, 494949.520544844, 305395.64916200604, 323818.67491548904, 743998.1864890541, 246814.83957575436, 182910.53015822236, 806814.1607856607, 961224.0678965019, 323818.67491548904, 204832.98722159833, 341716.36087094573, 341716.36087094573, 359103.9808739859, 246814.83957575436, 532959.8851357755, 507984.80978508206, 226128.34458575712, 556544.1617666952, 900073.8936211597, 423843.9795995834, 341716.36087094573, 375996.3639672247, 532959.8851357755, 204832.98722159833, 423843.9795995834, 323818.67491548904, 861326.0477900717, 359103.9808739859, 823561.6035207248, 246814.83957575436, 532959.8851357755, 467728.25542069884, 266910.17839968955, 438895.255006718, 703808.5159409067, 341716.36087094573, 204832.98722159833, 392407.90734554897, 266910.17839968955, 341716.36087094573, 375996.3639672247, 204832.98722159833, 204832.98722159833, 507984.80978508206, 305395.64916200604, 182910.53015822236, 578817.2693462336, 453519.207128279, 286431.5516179686, 226128.34458575712, 599854.2674819048, 467728.25542069884, 945145.1709955569, 481534.45767384587, 481534.45767384587, 359103.9808739859, 589485.7621087469, 544920.7861449906, 710984.5722018452, 305395.64916200604, 323818.67491548904, 323818.67491548904, 578817.2693462336, 777999.8419073081, 323818.67491548904, 323818.67491548904, 467728.25542069884, 359103.9808739859, 629245.7124740685, 182910.53015822236, 266910.17839968955, 286431.5516179686, 182910.53015822236, 266910.17839968955, 266910.17839968955, 359103.9808739859, 672996.6815937804, 359103.9808739859, 246814.83957575436, 392407.90734554897, 656236.0548798403, 266910.17839968955, 266910.17839968955, 520651.3601693497, 359103.9808739859, 544920.7861449906, 392407.90734554897, 556544.1617666952, 246814.83957575436, 392407.90734554897, 359103.9808739859, 246814.83957575436, 204832.98722159833, 556544.1617666952, 341716.36087094573, 246814.83957575436, 375996.3639672247, 681028.3726898674, 182910.53015822236, 226128.34458575712, 266910.17839968955, 772717.9883153934, 453519.207128279, 578817.2693462336, 246814.83957575436, 246814.83957575436, 494949.520544844, 408352.58893404563, 520651.3601693497, 359103.9808739859, 453519.207128279, 423843.9795995834, 578817.2693462336, 589485.7621087469, 204832.98722159833, 182910.53015822236, 638498.8825000369, 696427.9015789931, 246814.83957575436, 204832.98722159833, 408352.58893404563, 619725.9080556484, 852097.1495090052, 507984.80978508206, 323818.67491548904, 266910.17839968955, 392407.90734554897, 341716.36087094573, 246814.83957575436, 900073.8936211597, 848854.556441217, 681028.3726898674, 266910.17839968955, 599854.2674819048, 544920.7861449906, 494949.520544844, 710984.5722018452, 544920.7861449906, 567839.8165015692, 544920.7861449906, 467728.25542069884, 204832.98722159833, 408352.58893404563, 305395.64916200604, 226128.34458575712, 823561.6035207248, 834985.0117531177, 743998.1864890541, 453519.207128279, 737759.3098831155, 392407.90734554897, 438895.255006718, 246814.83957575436, 481534.45767384587, 408352.58893404563, 226128.34458575712, 392407.90734554897, 375996.3639672247, 852097.1495090052, 609931.4968813934, 392407.90734554897, 453519.207128279, 408352.58893404563, 359103.9808739859, 246814.83957575436, 375996.3639672247, 286431.5516179686, 226128.34458575712, 507984.80978508206, 481534.45767384587, 204832.98722159833, 375996.3639672247, 638498.8825000369, 656236.0548798403, 647493.1583550221, 408352.58893404563, 266910.17839968955, 246814.83957575436, 467728.25542069884, 481534.45767384587, 724746.5686157582, 672996.6815937804, 375996.3639672247, 226128.34458575712, 341716.36087094573, 438895.255006718, 359103.9808739859, 305395.64916200604, 453519.207128279, 305395.64916200604, 305395.64916200604, 467728.25542069884, 323818.67491548904, 453519.207128279, 453519.207128279, 246814.83957575436, 323818.67491548904, 761705.8214459311, 246814.83957575436, 182910.53015822236, 204832.98722159833, 408352.58893404563, 408352.58893404563, 375996.3639672247, 703808.5159409067, 182910.53015822236, 481534.45767384587, 797730.9875082892, 246814.83957575436, 323818.67491548904, 286431.5516179686, 266910.17839968955, 341716.36087094573, 761705.8214459311, 861326.0477900717, 341716.36087094573, 872553.9495687007, 408352.58893404563, 842104.924334178, 375996.3639672247, 423843.9795995834, 481534.45767384587, 965402.6555964216, 599854.2674819048, 286431.5516179686, 629245.7124740685, 341716.36087094573, 305395.64916200604, 619725.9080556484, 408352.58893404563, 453519.207128279, 392407.90734554897, 467728.25542069884, 494949.520544844, 204832.98722159833, 544920.7861449906, 266910.17839968955, 226128.34458575712, 392407.90734554897, 408352.58893404563, 286431.5516179686, 599854.2674819048, 226128.34458575712, 323818.67491548904, 305395.64916200604, 392407.90734554897, 453519.207128279, 246814.83957575436, 567839.8165015692, 408352.58893404563, 204832.98722159833, 182910.53015822236, 392407.90734554897, 359103.9808739859, 375996.3639672247, 392407.90734554897, 438895.255006718, 629245.7124740685, 246814.83957575436, 246814.83957575436, 246814.83957575436, 453519.207128279, 710984.5722018452, 323818.67491548904, 182910.53015822236, 204832.98722159833, 266910.17839968955, 305395.64916200604, 323818.67491548904, 408352.58893404563, 341716.36087094573, 656236.0548798403, 286431.5516179686, 266910.17839968955, 507984.80978508206, 204832.98722159833, 481534.45767384587, 423843.9795995834, 375996.3639672247, 802334.6224238161, 305395.64916200604, 902013.8466452894, 359103.9808739859, 226128.34458575712, 408352.58893404563, 246814.83957575436, 286431.5516179686, 481534.45767384587, 520651.3601693497, 305395.64916200604, 638498.8825000369, 688836.6184645272, 761705.8214459311, 520651.3601693497, 743998.1864890541, 204832.98722159833, 341716.36087094573, 266910.17839968955, 423843.9795995834, 305395.64916200604, 359103.9808739859, 869855.7793290976, 359103.9808739859, 481534.45767384587, 359103.9808739859, 408352.58893404563, 392407.90734554897, 494949.520544844, 688836.6184645272, 815415.2041993678, 467728.25542069884, 532959.8851357755, 246814.83957575436, 375996.3639672247, 629245.7124740685, 599854.2674819048, 438895.255006718, 609931.4968813934, 507984.80978508206, 696427.9015789931, 453519.207128279, 341716.36087094573, 467728.25542069884, 160342.1890202773, 481534.45767384587, 160342.1890202773, 204832.98722159833, 494949.520544844, 507984.80978508206, 246814.83957575436, 286431.5516179686, 743998.1864890541, 323818.67491548904, 928752.8651670157, 392407.90734554897, 481534.45767384587, 811173.1928092212, 423843.9795995834, 246814.83957575436, 375996.3639672247, 392407.90734554897, 226128.34458575712, 341716.36087094573, 286431.5516179686, 619725.9080556484, 408352.58893404563, 341716.36087094573, 375996.3639672247, 438895.255006718, 532959.8851357755, 246814.83957575436, 246814.83957575436, 672996.6815937804, 323818.67491548904, 226128.34458575712, 494949.520544844, 494949.520544844, 204832.98722159833, 438895.255006718, 567839.8165015692, 481534.45767384587, 544920.7861449906, 226128.34458575712, 467728.25542069884, 341716.36087094573, 323818.67491548904, 609931.4968813934, 772717.9883153934, 852097.1495090052, 731343.8610554534, 375996.3639672247, 467728.25542069884, 578817.2693462336, 423843.9795995834, 423843.9795995834, 589485.7621087469, 392407.90734554897, 286431.5516179686, 323818.67491548904, 544920.7861449906, 392407.90734554897, 467728.25542069884, 556544.1617666952, 323818.67491548904, 578817.2693462336, 481534.45767384587, 226128.34458575712, 767288.1198426664, 305395.64916200604, 204832.98722159833, 246814.83957575436, 246814.83957575436, 408352.58893404563, 341716.36087094573, 341716.36087094573, 532959.8851357755, 467728.25542069884, 467728.25542069884, 481534.45767384587, 532959.8851357755, 182910.53015822236, 341716.36087094573, 182910.53015822236, 408352.58893404563, 392407.90734554897, 656236.0548798403, 696427.9015789931, 438895.255006718, 305395.64916200604, 507984.80978508206, 305395.64916200604, 392407.90734554897, 638498.8825000369, 305395.64916200604, 589485.7621087469, 556544.1617666952, 266910.17839968955, 638498.8825000369, 556544.1617666952, 423843.9795995834, 286431.5516179686, 266910.17839968955, 305395.64916200604, 520651.3601693497, 266910.17839968955, 494949.520544844, 226128.34458575712, 359103.9808739859, 423843.9795995834, 952020.3226204414, 226128.34458575712, 772717.9883153934, 423843.9795995834, 481534.45767384587, 423843.9795995834, 494949.520544844, 359103.9808739859, 767288.1198426664, 323818.67491548904, 681028.3726898674, 286431.5516179686, 392407.90734554897, 246814.83957575436, 494949.520544844, 767288.1198426664, 375996.3639672247, 359103.9808739859, 246814.83957575436, 359103.9808739859, 204832.98722159833, 266910.17839968955, 438895.255006718, 731343.8610554534, 965402.6555964216, 305395.64916200604, 761705.8214459311, 453519.207128279, 375996.3639672247, 494949.520544844, 408352.58893404563, 423843.9795995834, 323818.67491548904, 226128.34458575712, 204832.98722159833, 544920.7861449906, 341716.36087094573, 305395.64916200604, 392407.90734554897, 589485.7621087469, 438895.255006718, 286431.5516179686, 703808.5159409067, 802334.6224238161, 507984.80978508206, 638498.8825000369, 710984.5722018452, 681028.3726898674, 532959.8851357755, 532959.8851357755, 507984.80978508206, 246814.83957575436, 556544.1617666952, 226128.34458575712, 266910.17839968955, 724746.5686157582, 599854.2674819048, 777999.8419073081, 341716.36087094573, 246814.83957575436, 359103.9808739859, 423843.9795995834, 408352.58893404563, 681028.3726898674, 341716.36087094573, 467728.25542069884, 246814.83957575436, 494949.520544844, 392407.90734554897, 286431.5516179686, 359103.9808739859, 359103.9808739859, 341716.36087094573, 845524.6794501795, 375996.3639672247, 359103.9808739859, 182910.53015822236, 266910.17839968955, 341716.36087094573, 286431.5516179686, 750065.608788681, 359103.9808739859, 724746.5686157582, 408352.58893404563, 408352.58893404563, 375996.3639672247, 392407.90734554897, 834985.0117531177, 182910.53015822236, 182910.53015822236, 305395.64916200604, 392407.90734554897, 556544.1617666952, 494949.520544844, 323818.67491548904, 647493.1583550221, 647493.1583550221, 438895.255006718, 629245.7124740685, 453519.207128279, 305395.64916200604, 556544.1617666952, 423843.9795995834, 392407.90734554897, 772717.9883153934, 182910.53015822236, 226128.34458575712, 246814.83957575436, 341716.36087094573, 341716.36087094573, 226128.34458575712, 246814.83957575436, 266910.17839968955, 952807.5101194958, 852097.1495090052, 323818.67491548904, 341716.36087094573, 246814.83957575436, 204832.98722159833, 375996.3639672247, 246814.83957575436, 375996.3639672247, 204832.98722159833, 286431.5516179686, 423843.9795995834, 481534.45767384587, 481534.45767384587, 226128.34458575712, 599854.2674819048, 266910.17839968955, 544920.7861449906, 392407.90734554897, 226128.34458575712, 341716.36087094573, 481534.45767384587, 532959.8851357755, 375996.3639672247, 788136.5256968925, 647493.1583550221, 341716.36087094573, 567839.8165015692, 880241.9281485118, 885047.6440883063, 226128.34458575712, 266910.17839968955, 777999.8419073081, 246814.83957575436, 226128.34458575712, 323818.67491548904, 481534.45767384587, 375996.3639672247, 286431.5516179686, 286431.5516179686, 286431.5516179686, 266910.17839968955, 933656.4202150782, 453519.207128279, 609931.4968813934, 305395.64916200604, 359103.9808739859, 286431.5516179686, 182910.53015822236, 226128.34458575712, 204832.98722159833, 182910.53015822236, 246814.83957575436, 731343.8610554534, 392407.90734554897, 724746.5686157582, 481534.45767384587, 578817.2693462336, 266910.17839968955, 507984.80978508206, 567839.8165015692, 305395.64916200604, 520651.3601693497, 520651.3601693497, 305395.64916200604, 246814.83957575436, 246814.83957575436, 408352.58893404563, 467728.25542069884, 266910.17839968955, 408352.58893404563, 520651.3601693497, 532959.8851357755, 792999.5581779858, 717962.0030947266, 246814.83957575436, 827472.4672630194, 305395.64916200604, 656236.0548798403, 408352.58893404563, 323818.67491548904, 204832.98722159833, 359103.9808739859, 204832.98722159833, 629245.7124740685, 783137.9671279774, 266910.17839968955, 453519.207128279, 286431.5516179686, 305395.64916200604, 578817.2693462336, 392407.90734554897, 838592.619124609, 323818.67491548904, 638498.8825000369, 408352.58893404563, 589485.7621087469, 323818.67491548904, 392407.90734554897, 375996.3639672247, 266910.17839968955, 544920.7861449906, 544920.7861449906, 532959.8851357755, 788136.5256968925, 767288.1198426664, 323818.67491548904, 481534.45767384587, 305395.64916200604, 408352.58893404563, 305395.64916200604, 811173.1928092212, 467728.25542069884, 359103.9808739859, 696427.9015789931, 182910.53015822236, 182910.53015822236, 589485.7621087469, 408352.58893404563, 453519.207128279, 226128.34458575712, 392407.90734554897, 891812.7045479853, 589485.7621087469, 423843.9795995834, 323818.67491548904, 323818.67491548904, 182910.53015822236, 453519.207128279, 599854.2674819048, 204832.98722159833, 286431.5516179686, 246814.83957575436, 266910.17839968955, 408352.58893404563, 182910.53015822236, 532959.8851357755, 578817.2693462336, 359103.9808739859, 182910.53015822236, 246814.83957575436, 710984.5722018452, 160342.1890202773, 341716.36087094573, 246814.83957575436, 589485.7621087469, 286431.5516179686, 481534.45767384587, 520651.3601693497, 858330.4853707782, 359103.9808739859, 481534.45767384587, 226128.34458575712, 696427.9015789931, 286431.5516179686, 305395.64916200604, 392407.90734554897, 204832.98722159833, 438895.255006718, 629245.7124740685, 453519.207128279, 204832.98722159833, 375996.3639672247, 567839.8165015692, 204832.98722159833, 246814.83957575436, 609931.4968813934, 453519.207128279, 481534.45767384587, 864243.9697443546, 494949.520544844, 544920.7861449906, 965402.6555964216, 359103.9808739859, 266910.17839968955, 494949.520544844, 494949.520544844, 305395.64916200604, 246814.83957575436, 937060.7524619383, 467728.25542069884, 286431.5516179686, 619725.9080556484, 375996.3639672247, 359103.9808739859, 520651.3601693497, 226128.34458575712, 467728.25542069884, 875183.0482999983, 494949.520544844, 323818.67491548904, 305395.64916200604, 323818.67491548904, 341716.36087094573, 323818.67491548904, 619725.9080556484, 204832.98722159833, 599854.2674819048, 323818.67491548904, 481534.45767384587, 246814.83957575436, 737759.3098831155, 710984.5722018452, 629245.7124740685, 226128.34458575712, 589485.7621087469, 481534.45767384587, 204832.98722159833, 392407.90734554897, 481534.45767384587, 520651.3601693497, 438895.255006718, 453519.207128279, 772717.9883153934, 703808.5159409067, 160342.1890202773, 341716.36087094573, 359103.9808739859, 204832.98722159833, 408352.58893404563, 710984.5722018452, 246814.83957575436, 467728.25542069884, 266910.17839968955, 286431.5516179686, 772717.9883153934, 305395.64916200604, 494949.520544844, 204832.98722159833, 864243.9697443546, 532959.8851357755, 359103.9808739859, 532959.8851357755, 226128.34458575712, 696427.9015789931, 341716.36087094573, 359103.9808739859, 305395.64916200604, 305395.64916200604, 556544.1617666952, 453519.207128279, 544920.7861449906, 392407.90734554897, 507984.80978508206, 323818.67491548904, 926130.8589989925, 204832.98722159833, 717962.0030947266, 743998.1864890541, 266910.17839968955, 926130.8589989925, 638498.8825000369, 638498.8825000369, 408352.58893404563, 359103.9808739859, 359103.9808739859, 481534.45767384587, 755966.5456925044, 438895.255006718, 266910.17839968955, 589485.7621087469, 619725.9080556484, 544920.7861449906, 567839.8165015692, 341716.36087094573, 266910.17839968955, 266910.17839968955, 204832.98722159833, 438895.255006718, 375996.3639672247, 323818.67491548904, 160342.1890202773, 226128.34458575712, 672996.6815937804, 286431.5516179686, 467728.25542069884, 226128.34458575712, 761705.8214459311, 375996.3639672247, 453519.207128279, 939210.9345793662, 783137.9671279774, 341716.36087094573, 305395.64916200604, 341716.36087094573, 507984.80978508206, 375996.3639672247, 323818.67491548904, 772717.9883153934, 375996.3639672247, 935950.5370723134, 408352.58893404563, 848854.556441217, 467728.25542069884, 629245.7124740685, 286431.5516179686, 266910.17839968955, 494949.520544844, 638498.8825000369, 408352.58893404563, 226128.34458575712, 226128.34458575712, 226128.34458575712, 204832.98722159833, 423843.9795995834, 681028.3726898674, 392407.90734554897, 182910.53015822236, 359103.9808739859, 359103.9808739859, 907555.3849126424, 226128.34458575712, 323818.67491548904, 831279.2676487502, 494949.520544844, 520651.3601693497, 423843.9795995834, 467728.25542069884, 578817.2693462336, 266910.17839968955, 609931.4968813934, 226128.34458575712, 467728.25542069884, 438895.255006718, 305395.64916200604, 392407.90734554897, 305395.64916200604, 246814.83957575436, 341716.36087094573, 246814.83957575436, 467728.25542069884, 246814.83957575436, 567839.8165015692, 246814.83957575436, 305395.64916200604, 305395.64916200604, 731343.8610554534, 467728.25542069884, 359103.9808739859, 507984.80978508206, 182910.53015822236, 392407.90734554897, 891812.7045479853, 423843.9795995834, 408352.58893404563, 520651.3601693497, 609931.4968813934, 182910.53015822236, 204832.98722159833, 438895.255006718, 286431.5516179686, 731343.8610554534, 341716.36087094573, 204832.98722159833, 226128.34458575712, 160342.1890202773, 359103.9808739859, 359103.9808739859, 323818.67491548904, 664734.8680989878, 696427.9015789931, 359103.9808739859, 182910.53015822236, 532959.8851357755, 520651.3601693497, 467728.25542069884, 638498.8825000369, 246814.83957575436, 891812.7045479853, 266910.17839968955, 567839.8165015692, 204832.98722159833, 266910.17839968955, 783137.9671279774, 341716.36087094573, 599854.2674819048, 438895.255006718, 375996.3639672247, 743998.1864890541, 359103.9808739859, 204832.98722159833, 266910.17839968955, 520651.3601693497, 481534.45767384587, 204832.98722159833, 286431.5516179686, 305395.64916200604, 323818.67491548904, 226128.34458575712, 305395.64916200604, 286431.5516179686, 578817.2693462336, 589485.7621087469, 375996.3639672247, 323818.67491548904, 423843.9795995834, 266910.17839968955, 246814.83957575436, 266910.17839968955, 286431.5516179686, 246814.83957575436, 423843.9795995834, 567839.8165015692, 204832.98722159833, 408352.58893404563, 359103.9808739859, 467728.25542069884, 392407.90734554897, 226128.34458575712, 226128.34458575712, 408352.58893404563, 647493.1583550221, 182910.53015822236, 467728.25542069884, 696427.9015789931, 375996.3639672247, 520651.3601693497, 286431.5516179686, 375996.3639672247, 204832.98722159833, 182910.53015822236, 629245.7124740685, 246814.83957575436, 323818.67491548904, 226128.34458575712, 226128.34458575712, 359103.9808739859, 286431.5516179686, 481534.45767384587, 494949.520544844, 467728.25542069884, 438895.255006718, 802334.6224238161, 246814.83957575436, 392407.90734554897, 681028.3726898674, 717962.0030947266, 226128.34458575712, 341716.36087094573, 743998.1864890541, 507984.80978508206, 438895.255006718, 359103.9808739859, 323818.67491548904, 453519.207128279, 359103.9808739859, 392407.90734554897, 408352.58893404563, 286431.5516179686, 520651.3601693497, 965402.6555964216, 204832.98722159833, 467728.25542069884, 286431.5516179686, 532959.8851357755, 408352.58893404563, 578817.2693462336, 688836.6184645272, 438895.255006718, 681028.3726898674, 182910.53015822236, 802334.6224238161, 481534.45767384587, 664734.8680989878, 226128.34458575712, 266910.17839968955, 423843.9795995834, 392407.90734554897, 453519.207128279, 664734.8680989878, 204832.98722159833, 638498.8825000369, 392407.90734554897, 359103.9808739859, 226128.34458575712, 507984.80978508206, 182910.53015822236, 544920.7861449906, 226128.34458575712, 408352.58893404563, 375996.3639672247, 688836.6184645272, 359103.9808739859, 286431.5516179686, 305395.64916200604, 717962.0030947266, 520651.3601693497, 323818.67491548904, 359103.9808739859, 204832.98722159833, 481534.45767384587, 204832.98722159833, 578817.2693462336, 423843.9795995834, 946065.1049763893, 246814.83957575436, 375996.3639672247, 852097.1495090052, 696427.9015789931, 286431.5516179686, 438895.255006718, 392407.90734554897, 453519.207128279, 286431.5516179686, 375996.3639672247, 204832.98722159833, 423843.9795995834, 494949.520544844, 359103.9808739859, 204832.98722159833, 638498.8825000369, 481534.45767384587, 286431.5516179686, 341716.36087094573, 226128.34458575712, 246814.83957575436, 305395.64916200604, 703808.5159409067, 286431.5516179686, 544920.7861449906, 305395.64916200604, 453519.207128279, 375996.3639672247, 609931.4968813934, 305395.64916200604, 204832.98722159833, 226128.34458575712, 305395.64916200604, 226128.34458575712, 481534.45767384587, 323818.67491548904, 944206.4251278869, 204832.98722159833, 438895.255006718, 246814.83957575436, 305395.64916200604, 423843.9795995834, 182910.53015822236, 438895.255006718, 872553.9495687007, 323818.67491548904, 453519.207128279, 647493.1583550221, 359103.9808739859, 305395.64916200604, 182910.53015822236, 544920.7861449906, 375996.3639672247, 246814.83957575436, 423843.9795995834, 305395.64916200604, 305395.64916200604, 532959.8851357755, 226128.34458575712, 656236.0548798403, 226128.34458575712, 286431.5516179686, 877745.0642174688, 681028.3726898674, 408352.58893404563, 266910.17839968955, 305395.64916200604, 408352.58893404563, 408352.58893404563, 375996.3639672247, 392407.90734554897, 359103.9808739859, 226128.34458575712, 305395.64916200604, 619725.9080556484, 226128.34458575712, 359103.9808739859, 266910.17839968955, 423843.9795995834, 323818.67491548904, 772717.9883153934, 507984.80978508206, 226128.34458575712, 556544.1617666952, 286431.5516179686, 305395.64916200604, 467728.25542069884, 305395.64916200604, 609931.4968813934, 286431.5516179686, 305395.64916200604, 286431.5516179686, 305395.64916200604, 672996.6815937804, 544920.7861449906, 831279.2676487502, 931259.2291524755, 246814.83957575436, 408352.58893404563, 246814.83957575436, 286431.5516179686, 286431.5516179686, 246814.83957575436, 246814.83957575436, 375996.3639672247, 246814.83957575436, 599854.2674819048, 266910.17839968955, 965402.6555964216, 323818.67491548904, 408352.58893404563, 226128.34458575712, 831279.2676487502, 672996.6815937804, 453519.207128279, 226128.34458575712, 438895.255006718, 246814.83957575436, 772717.9883153934, 589485.7621087469, 408352.58893404563, 182910.53015822236, 246814.83957575436, 556544.1617666952, 703808.5159409067, 672996.6815937804, 204832.98722159833, 453519.207128279, 647493.1583550221, 204832.98722159833, 392407.90734554897, 453519.207128279, 341716.36087094573, 204832.98722159833, 341716.36087094573, 341716.36087094573, 375996.3639672247, 305395.64916200604, 323818.67491548904, 392407.90734554897, 494949.520544844, 341716.36087094573, 323818.67491548904, 408352.58893404563, 204832.98722159833, 507984.80978508206, 392407.90734554897, 408352.58893404563, 629245.7124740685, 182910.53015822236, 182910.53015822236, 453519.207128279, 392407.90734554897, 423843.9795995834, 323818.67491548904, 544920.7861449906, 619725.9080556484, 507984.80978508206, 341716.36087094573, 182910.53015822236, 578817.2693462336, 703808.5159409067, 544920.7861449906, 266910.17839968955, 556544.1617666952, 599854.2674819048, 797730.9875082892, 266910.17839968955, 359103.9808739859, 567839.8165015692, 408352.58893404563, 246814.83957575436, 481534.45767384587, 532959.8851357755, 408352.58893404563, 438895.255006718, 341716.36087094573, 772717.9883153934, 266910.17839968955, 305395.64916200604, 392407.90734554897, 609931.4968813934, 226128.34458575712, 226128.34458575712, 182910.53015822236, 408352.58893404563, 246814.83957575436, 323818.67491548904, 544920.7861449906, 286431.5516179686, 438895.255006718, 341716.36087094573, 556544.1617666952, 494949.520544844, 286431.5516179686, 359103.9808739859, 656236.0548798403, 481534.45767384587, 226128.34458575712, 544920.7861449906, 246814.83957575436, 755966.5456925044, 647493.1583550221, 453519.207128279, 423843.9795995834, 359103.9808739859, 556544.1617666952, 323818.67491548904, 438895.255006718, 609931.4968813934, 305395.64916200604, 305395.64916200604, 246814.83957575436, 246814.83957575436, 204832.98722159833, 567839.8165015692, 855254.9773532868, 761705.8214459311, 204832.98722159833, 567839.8165015692, 761705.8214459311, 323818.67491548904, 423843.9795995834, 182910.53015822236, 453519.207128279, 246814.83957575436, 438895.255006718, 204832.98722159833, 520651.3601693497, 647493.1583550221, 286431.5516179686, 246814.83957575436, 182910.53015822236, 341716.36087094573, 305395.64916200604, 204832.98722159833, 494949.520544844, 323818.67491548904, 246814.83957575436, 305395.64916200604, 664734.8680989878, 532959.8851357755, 375996.3639672247, 532959.8851357755, 246814.83957575436, 408352.58893404563, 423843.9795995834, 323818.67491548904, 494949.520544844, 286431.5516179686, 507984.80978508206, 520651.3601693497, 160342.1890202773, 696427.9015789931, 160342.1890202773, 305395.64916200604, 647493.1583550221, 341716.36087094573, 226128.34458575712, 246814.83957575436, 647493.1583550221, 204832.98722159833, 681028.3726898674, 392407.90734554897, 246814.83957575436, 305395.64916200604, 246814.83957575436, 609931.4968813934, 567839.8165015692, 204832.98722159833, 323818.67491548904, 266910.17839968955, 724746.5686157582, 226128.34458575712, 806814.1607856607, 392407.90734554897, 246814.83957575436, 286431.5516179686, 266910.17839968955, 226128.34458575712, 408352.58893404563, 226128.34458575712, 182910.53015822236, 323818.67491548904, 204832.98722159833, 286431.5516179686, 266910.17839968955, 266910.17839968955, 891812.7045479853, 408352.58893404563, 453519.207128279, 204832.98722159833, 286431.5516179686, 438895.255006718, 246814.83957575436, 619725.9080556484, 246814.83957575436, 341716.36087094573, 305395.64916200604, 423843.9795995834, 286431.5516179686, 341716.36087094573, 359103.9808739859, 286431.5516179686, 507984.80978508206, 438895.255006718, 375996.3639672247, 323818.67491548904, 589485.7621087469, 359103.9808739859, 341716.36087094573, 423843.9795995834, 827472.4672630194, 226128.34458575712, 578817.2693462336, 204832.98722159833, 438895.255006718, 797730.9875082892, 507984.80978508206, 423843.9795995834, 305395.64916200604, 408352.58893404563, 359103.9808739859, 286431.5516179686, 341716.36087094573, 438895.255006718, 286431.5516179686, 266910.17839968955, 226128.34458575712, 481534.45767384587, 520651.3601693497, 438895.255006718, 629245.7124740685, 408352.58893404563, 481534.45767384587, 453519.207128279, 375996.3639672247, 305395.64916200604, 924774.3616082263]
thresholds = [226128.34458575712, 392407.90734554897, 724746.5686157582]
display_name = "Personal Lifetime Wealth (Age 30, 1% Treaty)"
units = "usd"

# Calculate exceedance probabilities (1 - CDF)

sorted_samples = np.sort(samples)
exceedance = 1 - np.arange(1, len(sorted_samples) + 1) / len(sorted_samples)

# Create figure

fig, ax = plt.subplots(figsize=(10, 6))

# Plot exceedance curve

ax.plot(sorted_samples, exceedance * 100, color=COLOR_BLACK, linewidth=2.5)
ax.fill_between(sorted_samples, 0, exceedance * 100, alpha=0.1, color=COLOR_BLACK)

# Apply tick formatter for readable labels (K, M, B suffixes, $ for USD)

ax.xaxis.set_major_formatter(get_tick_formatter(unit=units))

# Annotate thresholds

for thresh in thresholds:
    exceed_pct = (np.array(samples) >= thresh).sum() / len(samples) * 100
    ax.axvline(thresh, color=COLOR_BLACK, linestyle='--', linewidth=1, alpha=0.5)
    ax.axhline(exceed_pct, color=COLOR_BLACK, linestyle=':', linewidth=1, alpha=0.3)

    # Add label with formatted threshold value (use format_parameter_value for full units)

    ax.annotate(f'{exceed_pct:.0f}% chance\nâ‰¥ {format_parameter_value(thresh, units)}',
                xy=(thresh, exceed_pct), xytext=(thresh * 1.05, exceed_pct + 5),
                fontsize=10, ha='left', weight='bold',
                bbox=dict(boxstyle='round,pad=0.3', facecolor=COLOR_WHITE, edgecolor=COLOR_BLACK, alpha=0.9))

ax.set_xlabel(f'{display_name} ({units})' if units else display_name, fontsize=12)
ax.set_ylabel('Probability of Exceeding Value (%)', fontsize=12)
ax.set_title(f'Exceedance Probability: {display_name}', fontsize=14, weight='bold', pad=15)
ax.set_ylim(0, 100)
ax.set_xlim(left=min(sorted_samples) * 0.95)

clean_spines(ax)
add_watermark(fig)

# Save PNG to knowledge/figures/ regardless of where Quarto renders from

output_path = get_figure_output_path('exceedance-personal_lifetime_wealth.png')
plt.savefig(output_path, dpi=150, bbox_inches='tight', facecolor=COLOR_WHITE)

add_png_metadata(
    output_path,
    title=f'Exceedance: {display_name}',
    description=f'Probability of {display_name} exceeding various thresholds'
)

plt.show()
```

*This exceedance probability chart shows the likelihood that Personal Lifetime Wealth (Age 30, 1% Treaty) will exceed any given threshold. Higher curves indicate more favorable outcomes with greater certainty.*
