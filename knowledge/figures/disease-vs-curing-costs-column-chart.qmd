```{python}
#| echo: false
from dih_models.parameters import *
```

```{python}
#| fig-cap: "Cost of Disease vs Curing Diseases"
#| output: false
from pathlib import Path

import matplotlib
matplotlib.use('Agg')  # Use non-interactive backend
import matplotlib.pyplot as plt
import numpy as np
from dih_models.plotting.chart_style import (
    setup_chart_style, add_watermark, clean_spines,
    COLOR_BLACK, COLOR_WHITE,
    add_png_metadata, get_figure_output_path)

# Setup styling

setup_chart_style(style='light', dpi=150)

# Disease burden (from cost-of-disease.qmd)

disease_medical = 9900  # Direct medical costs
disease_productivity = 5000  # Lost productivity
disease_lives = 94200  # Lost human life (DALYs)
disease_total = disease_medical + disease_productivity + disease_lives  # $109.1T

# Cure research spending

cure_total = GLOBAL_MED_RESEARCH_SPENDING  # Global government medical research spending

categories = [
    'Cost of\nDisease',
    'Curing\nDiseases'
]

# Create figure - tall to accommodate stacked text without overlapping

fig, ax = plt.subplots(figsize=(14, 16))

# Column 1: Disease Burden (white bar with black text)

ax.bar(0, disease_total, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=3, width=0.8)

ax.text(0, disease_total * 0.98, 'Dealing\nwith\nUncured\nDiseases', ha='center', va='center',
        fontsize=40, weight='bold', color=COLOR_BLACK)
ax.text(0, disease_total * 0.95, '$109T', ha='center', va='center',
        fontsize=96, weight='bold', color=COLOR_BLACK)

# Add breakdown - simple and clear

disease_breakdown = (
    'Medical: $10T\n'
    'Lost Work: $5T\n'
    'Lost Lives: $94T\n\n'
    '55M Deaths/Year'
)
ax.text(0, disease_total * 0.92, disease_breakdown, ha='center', va='center',
        fontsize=32, weight='bold', color=COLOR_BLACK, linespacing=1.4)

# Column 2: Cure Research Spending (solid black)

ax.bar(1, cure_total, color=COLOR_WHITE, edgecolor=COLOR_BLACK, linewidth=3, width=0.8)
ax.text(1, cure_total + (disease_total * 0.005), f'${cure_total:.0f}B\nCuring Diseases',
        ha='center', va='bottom', fontsize=44, weight='bold', color=COLOR_BLACK, linespacing=1.2)

# Remove all axis labels and ticks (all columns are labeled with amounts)

ax.set_xticks([])
ax.set_xticklabels([])
ax.set_yticks([])
ax.set_yticklabels([])

# Set axis limits to ensure proper spacing around bars and text
# X-axis: add padding on both sides to prevent text clipping

ax.set_xlim(-0.8, 1.8)

# Set Y-axis limit to remove extra whitespace at the top

ax.set_ylim(0, disease_total * 1.01)

# Remove all spines for ultra-clean look

clean_spines(ax, ['top', 'right', 'left', 'bottom'])

# Add branding
# NOTE: add_watermark disabled due to matplotlib dimension bug
# add_watermark(fig)

# Save in brain/figures directory

output_path = get_figure_output_path('disease-vs-curing-costs-column-chart.png')

# Save the figure
# Note: bbox_inches='tight' removed due to matplotlib bug with large y-axis values

plt.savefig(output_path, dpi=150, facecolor=COLOR_WHITE)

# Add metadata for attribution

add_png_metadata(output_path, title="Disease Vs Curing Costs Column Chart")
plt.close()
```
